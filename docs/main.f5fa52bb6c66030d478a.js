(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var f=Object(r.e)(h.value,2),d=f[1];u===this.normalizeInstanceIdentifier(f[0])&&d.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=Object(r.g)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.6.0","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return en}),n.d(e,"b",function(){return Qa}),n.d(e,"c",function(){return za}),n.d(e,"d",function(){return Ba}),n.d(e,"e",function(){return Ha}),n.d(e,"f",function(){return Bu}),n.d(e,"g",function(){return Nu}),n.d(e,"h",function(){return Qs}),n.d(e,"i",function(){return su}),n.d(e,"j",function(){return bs}),n.d(e,"k",function(){return Za}),n.d(e,"l",function(){return Es}),n.d(e,"m",function(){return pr}),n.d(e,"n",function(){return Ca}),n.d(e,"o",function(){return Qi}),n.d(e,"p",function(){return _n}),n.d(e,"q",function(){return k}),n.d(e,"r",function(){return tn}),n.d(e,"s",function(){return ho}),n.d(e,"t",function(){return Bs}),n.d(e,"u",function(){return zs}),n.d(e,"v",function(){return Xa}),n.d(e,"w",function(){return sa}),n.d(e,"x",function(){return Du}),n.d(e,"y",function(){return oa}),n.d(e,"z",function(){return Iu}),n.d(e,"A",function(){return cu}),n.d(e,"B",function(){return On}),n.d(e,"C",function(){return $a}),n.d(e,"D",function(){return Wa}),n.d(e,"E",function(){return Ts}),n.d(e,"F",function(){return Cs}),n.d(e,"G",function(){return vr}),n.d(e,"H",function(){return As}),n.d(e,"I",function(){return cr}),n.d(e,"J",function(){return En}),n.d(e,"K",function(){return Vu}),n.d(e,"L",function(){return ea}),n.d(e,"M",function(){return mu}),n.d(e,"N",function(){return nn}),n.d(e,"O",function(){return js}),n.d(e,"P",function(){return xs}),n.d(e,"Q",function(){return ua}),n.d(e,"R",function(){return V}),n.d(e,"S",function(){return Au}),n.d(e,"T",function(){return Cu}),n.d(e,"U",function(){return g}),n.d(e,"V",function(){return Su}),n.d(e,"W",function(){return Uu}),n.d(e,"X",function(){return bu}),n.d(e,"Y",function(){return Ya}),n.d(e,"Z",function(){return Xi}),n.d(e,"ab",function(){return os}),n.d(e,"bb",function(){return ar}),n.d(e,"cb",function(){return zn}),n.d(e,"db",function(){return Rn}),n.d(e,"eb",function(){return Pn}),n.d(e,"fb",function(){return Fn}),n.d(e,"gb",function(){return Vn}),n.d(e,"hb",function(){return Mn}),n.d(e,"ib",function(){return Ln}),n.d(e,"jb",function(){return es}),n.d(e,"kb",function(){return Fu}),n.d(e,"lb",function(){return ns}),n.d(e,"mb",function(){return rs}),n.d(e,"nb",function(){return Dn}),n.d(e,"ob",function(){return B}),n.d(e,"pb",function(){return _o}),n.d(e,"qb",function(){return Po}),n.d(e,"rb",function(){return Ro}),n.d(e,"sb",function(){return Do}),n.d(e,"tb",function(){return ts}),n.d(e,"ub",function(){return It}),n.d(e,"vb",function(){return f}),n.d(e,"wb",function(){return Nn}),n.d(e,"xb",function(){return po}),n.d(e,"yb",function(){return _t}),n.d(e,"zb",function(){return ms}),n.d(e,"Ab",function(){return ei}),n.d(e,"Bb",function(){return So}),n.d(e,"Cb",function(){return Bo}),n.d(e,"Db",function(){return La}),n.d(e,"Eb",function(){return tt}),n.d(e,"Fb",function(){return at}),n.d(e,"Gb",function(){return O}),n.d(e,"Hb",function(){return E}),n.d(e,"Ib",function(){return it}),n.d(e,"Jb",function(){return ut}),n.d(e,"Kb",function(){return To}),n.d(e,"Lb",function(){return ko}),n.d(e,"Mb",function(){return jo}),n.d(e,"Nb",function(){return xo}),n.d(e,"Ob",function(){return No}),n.d(e,"Pb",function(){return Qe}),n.d(e,"Qb",function(){return Yo}),n.d(e,"Rb",function(){return vn}),n.d(e,"Sb",function(){return Xe}),n.d(e,"Tb",function(){return qa}),n.d(e,"Ub",function(){return Mo}),n.d(e,"Vb",function(){return Fa}),n.d(e,"Wb",function(){return Fo}),n.d(e,"Xb",function(){return Io}),n.d(e,"Yb",function(){return Ea}),n.d(e,"Zb",function(){return Va}),n.d(e,"ac",function(){return Gt}),n.d(e,"bc",function(){return lr}),n.d(e,"cc",function(){return ot}),n.d(e,"dc",function(){return Co}),n.d(e,"ec",function(){return Wo}),n.d(e,"fc",function(){return $o});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("EQ5u"),u=n("x+ZX");function c(){return new r.a}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function f(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(f).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function d(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function g(t){return t.__forward_ref__=g,t.toString=function(){return f(this())},t}function m(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class v extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function b(t){return"string"==typeof t?t:null==t?"":String(t)}function w(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():b(t)}function _(t,e){const n=e?` in ${e}`:"";throw new v("201",`No provider for ${w(t)} found${n}`)}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function E(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return C(t,I)||C(t,x)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function T(t){return t&&(t.hasOwnProperty(A)||t.hasOwnProperty(j))?t[A]:null}const I=l({"\u0275prov":l}),A=l({"\u0275inj":l}),x=l({ngInjectableDef:l}),j=l({ngInjectorDef:l});var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let N;function R(t){const e=N;return N=t,e}function D(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void _(f(t),"Injector")}function P(t){return{toString:t}.toString()}var M=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),V=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const L="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,B=L||q||F||U,H={},z=[],G=[],K=l({"\u0275cmp":l}),W=l({"\u0275dir":l}),$=l({"\u0275pipe":l}),Q=l({"\u0275mod":l}),Y=l({"\u0275loc":l}),X=l({"\u0275fac":l}),Z=l({__NG_ELEMENT_ID__:l});let J=0;function tt(t){return P(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===M.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||G,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||V.Emulated,id:"c",styles:t.styles||G,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=J++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(nt):null,n})}function et(t){return ct(t)||function(t){return t[W]||null}(t)}function nt(t){return function(t){return t[$]||null}(t)}const rt={};function it(t){const e={type:t.type,bootstrap:t.bootstrap||G,declarations:t.declarations||G,imports:t.imports||G,exports:t.exports||G,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&P(()=>{rt[t.id]=t.type}),e}function ot(t,e){return P(()=>{const n=lt(t,!0);n.declarations=e.declarations||G,n.imports=e.imports||G,n.exports=e.exports||G})}function st(t,e){if(null==t)return H;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const at=tt;function ut(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ct(t){return t[K]||null}function lt(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${f(t)} does not have '\u0275mod' property.`);return n}const ht=20,ft=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function gt(t){return 0!=(8&t.flags)}function mt(t){return 2==(2&t.flags)}function yt(t){return 1==(1&t.flags)}function vt(t){return null!==t.template}function bt(t,e){return t.hasOwnProperty(X)?t[X]:null}class wt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _t(){return Ot}function Ot(t){return t.type.prototype.ngOnChanges&&(t.setInput=St),Et}function Et(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===H)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function St(t,e,n,r){const i=Ct(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:H,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new wt(u&&u.currentValue,e,s===H),t[r]=e}function Ct(t){return t.__ngSimpleChanges__||null}let Tt;function It(t){Tt=t}function At(t){return!!t.listen}_t.ngInherit=!0;const xt={createRenderer:(t,e)=>void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0};function jt(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return jt(e[t])}function Nt(t,e){return jt(e[t.index])}function Rt(t,e){return t.data[e]}function Dt(t,e){const n=e[t];return dt(n)?n:n[0]}function Pt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Mt(t){return 4==(4&t[2])}function Vt(t){return 128==(128&t[2])}function Lt(t,e){return null==e?null:t[e]}function Ft(t){t[18]=0}function Ut(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:ae(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Bt(){return qt.bindingsEnabled}function Ht(){return qt.lFrame.lView}function zt(){return qt.lFrame.tView}function Gt(t){qt.lFrame.contextLView=t}function Kt(){let t=Wt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Wt(){return qt.lFrame.currentTNode}function $t(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Qt(){return qt.lFrame.isParent}function Yt(){return qt.isInCheckNoChangesMode}function Xt(t){qt.isInCheckNoChangesMode=t}function Zt(){return qt.lFrame.bindingIndex++}function Jt(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,te(e)}function te(t){qt.lFrame.currentDirectiveIndex=t}function ee(){return qt.lFrame.currentQueryIndex}function ne(t){qt.lFrame.currentQueryIndex=t}function re(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ie(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=re(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=se();return r.currentTNode=e,r.lView=t,!0}function oe(t){const e=se(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function se(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?ae(t):e}function ae(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ue(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ce=ue;function le(){const t=ue();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function he(){return qt.lFrame.selectedIndex}function fe(t){qt.lFrame.selectedIndex=t}function de(){const t=qt.lFrame;return Rt(t.tView,t.selectedIndex)}function pe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ge(t,e,n){ve(t,e,3,n)}function me(t,e,n,r){(3&t[2])===n&&ve(t,e,n,r)}function ye(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ve(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(be(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function be(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const we=-1;class _e{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Oe(t,e,n){const r=At(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Se(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ee(t){return 3===t||4===t||6===t}function Se(t){return 64===t.charCodeAt(0)}function Ce(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Te(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Te(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ie(t){return t!==we}function Ae(t){return 32767&t}function xe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let je=!0;function ke(t){const e=je;return je=t,e}let Ne=0;function Re(t,e){const n=Pe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,De(r.data,t),De(e,null),De(r.blueprint,null));const i=Me(t,e),o=t.injectorIndex;if(Ie(i)){const t=Ae(i),n=xe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function De(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Pe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Me(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return we;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return we}function Ve(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Z)&&(r=n[Z]),null==r&&(r=n[Z]=Ne++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Le(t,e,n){if(n&k.Optional)return t;_(e,"NodeInjector")}function Fe(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],o=R(void 0);try{return i?i.get(e,r,n&k.Optional):D(e,r,n&k.Optional)}finally{R(o)}}return Le(r,e,n)}function Ue(t,e,n,r=k.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Z)?t[Z]:void 0;return"number"==typeof e?e>=0?255&e:Be:e}(n);if("function"==typeof o){if(!ie(e,t,r))return r&k.Host?Le(i,n,r):Fe(e,n,r,i);try{const t=o();if(null!=t||r&k.Optional)return t;_(n)}finally{ce()}}else if("number"==typeof o){let i=null,s=Pe(t,e),a=we,u=r&k.Host?e[16][6]:null;for((-1===s||r&k.SkipSelf)&&(a=-1===s?Me(t,e):e[s+8],a!==we&&We(r,!1)?(i=e[1],s=Ae(a),e=xe(a,e)):s=-1);-1!==s;){const t=e[1];if(Ke(o,s,t.data)){const t=He(s,e,n,i,r,u);if(t!==qe)return t}a=e[s+8],a!==we&&We(r,e[1].data[s+8]===u)&&Ke(o,s,e)?(i=t,s=Ae(a),e=xe(a,e)):s=-1}}}return Fe(e,n,r,i)}const qe={};function Be(){return new $e(Kt(),Ht())}function He(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=ze(a,s,n,null==r?mt(a)&&je:r!=s&&0!=(3&a.type),i&k.Host&&o===a);return null!==u?Ge(e,s,u,a):qe}function ze(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&vt(t)&&t.type===n)return u}return null}function Ge(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof _e){const s=i;s.resolving&&function(t,e){throw new v("200",`Circular dependency in DI detected for ${t}`)}(w(o[n]));const a=ke(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?R(s.injectImpl):null;ie(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ot(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&R(u),ke(a),s.resolving=!1,ce()}}return i}function Ke(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function We(t,e){return!(t&k.Self||t&k.Host&&e)}class $e{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ue(this._tNode,this._lView,t,void 0,e)}}function Qe(t){return P(()=>{const e=t.prototype.constructor,n=e[X]||Ye(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[X]||Ye(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ye(t){return y(t)?()=>{const e=Ye(m(t));return e&&e()}:bt(t)}function Xe(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ee(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Kt(),t)}const Ze="__parameters__";function Je(t,e,n){return P(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Ze)?t[Ze]:Object.defineProperty(t,Ze,{value:[]})[Ze];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class tn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=O({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const en=new tn("AnalyzeForEntryComponents"),nn=Function;function rn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),rn(r,e)):e!==t&&e.push(r)}return e}function on(t,e){t.forEach(t=>Array.isArray(t)?on(t,e):e(t))}function sn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function an(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function un(t,e,n){let r=ln(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function cn(t,e){const n=ln(t,e);if(n>=0)return t[1|n]}function ln(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const hn={},fn=/\n/gm,dn="__source",pn=l({provide:String,useValue:l});let gn;function mn(t){const e=gn;return gn=t,e}function yn(t,e=k.Default){if(void 0===gn)throw new Error("inject() must be called from an injection context");return null===gn?D(t,void 0,e):gn.get(t,e&k.Optional?null:void 0,e)}function vn(t,e=k.Default){return(N||yn)(m(t),e)}function bn(t){const e=[];for(let n=0;n<t.length;n++){const r=m(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(vn(t,n))}else e.push(vn(r))}return e}function wn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const _n=wn(Je("Inject",t=>({token:t})),-1),On=wn(Je("Optional"),8),En=wn(Je("SkipSelf"),4);let Sn;function Cn(t){var e;return(null===(e=function(){if(void 0===Sn&&(Sn=null,B.trustedTypes))try{Sn=B.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Sn}())||void 0===e?void 0:e.createHTML(t))||t}class Tn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class In extends Tn{getTypeName(){return"HTML"}}class An extends Tn{getTypeName(){return"Style"}}class xn extends Tn{getTypeName(){return"Script"}}class jn extends Tn{getTypeName(){return"URL"}}class kn extends Tn{getTypeName(){return"ResourceURL"}}function Nn(t){return t instanceof Tn?t.changingThisBreaksApplicationSecurity:t}function Rn(t,e){const n=Dn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Dn(t){return t instanceof Tn&&t.getTypeName()||null}function Pn(t){return new In(t)}function Mn(t){return new An(t)}function Vn(t){return new xn(t)}function Ln(t){return new jn(t)}function Fn(t){return new kn(t)}class Un{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Cn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class qn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Cn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Cn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Bn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Hn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function zn(t){return(t=String(t)).match(Bn)||t.match(Hn)?t:"unsafe:"+t}function Gn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Kn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Wn=Gn("area,br,col,hr,img,wbr"),$n=Gn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Qn=Gn("rp,rt"),Yn=Kn(Qn,$n),Xn=Kn(Wn,Kn($n,Gn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kn(Qn,Gn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yn),Zn=Gn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jn=Gn("srcset"),tr=Kn(Zn,Jn,Gn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Gn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),er=Gn("script,style,template");class nr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Xn.hasOwnProperty(e))return this.sanitizedSomething=!0,!er.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!tr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Zn[o]&&(s=zn(s)),Jn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>zn(t.trim())).join(", ")),this.buf.push(" ",e,'="',or(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Xn.hasOwnProperty(e)&&!Wn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(or(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const rr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ir=/([^\#-~ |!])/g;function or(t){return t.replace(/&/g,"&amp;").replace(rr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ir,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let sr;function ar(t,e){let n=null;try{sr=sr||function(t){const e=new qn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Cn(""),"text/html")}catch(t){return!1}}()?new Un(e):e}(t);let r=e?String(e):"";n=sr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=sr.getInertBodyElement(r)}while(r!==o);return Cn((new nr).sanitizeChildren(ur(n)||n))}finally{if(n){const t=ur(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ur(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var cr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function lr(t){const e=function(){const t=Ht();return t&&t[12]}();return e?e.sanitize(cr.URL,t)||"":Rn(t,"URL")?Nn(t):zn(b(t))}function hr(t){return t.ngDebugContext}function fr(t){return t.ngOriginalError}function dr(t,...e){t.error(...e)}class pr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||dr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?hr(t)?hr(t):this._findContext(fr(t)):null}_findOriginalError(t){let e=fr(t);for(;e&&fr(e);)e=fr(e);return e}}function gr(t,e){t.__ngContext__=e}const mr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(B))();function yr(t){return t instanceof Function?t():t}var vr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function br(t,e){return(void 0)(t,e)}function wr(t){const e=t[3];return pt(e)?e[3]:e}function _r(t){return Er(t[13])}function Or(t){return Er(t[4])}function Er(t){for(;null!==t&&!pt(t);)t=t[4];return t}function Sr(t,e,n,r,i){if(null!=r){let o,s=!1;pt(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=jt(r);0===t&&null!==n?null==i?kr(e,n,a):jr(e,n,a,i||null,!0):1===t&&null!==n?jr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Rr(t,e);r&&function(t,e,n,r){At(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==jt(n)&&Sr(e,t,r,o,i);for(let s=ft;s<n.length;s++){const i=n[s];Fr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Cr(t,e,n){return At(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Tr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ut(i,-1)),n.splice(r,1)}function Ir(t,e){if(t.length<=ft)return;const n=ft+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Tr(o,r),e>0&&(t[n-1][4]=r[4]);const s=an(t,ft+e);Fr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ar(t,e){if(!(256&e[2])){const n=e[11];At(n)&&n.destroyNode&&Fr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return xr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&xr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&xr(e[1],e),n=e&&e[4]}e=n}}(e)}}function xr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof _e)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):jt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&At(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&Tr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function jr(t,e,n,r,i){At(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function kr(t,e,n){At(t)?t.appendChild(e,n):e.appendChild(n)}function Nr(t,e,n,r,i){null!==r?jr(t,e,n,r,i):kr(t,e,n)}function Rr(t,e){return At(t)?t.parentNode(e):e.parentNode}function Dr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===V.None||e===V.Emulated)return null}return Nt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Nt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Nr(o,i,n[a],s,!1);else Nr(o,i,n,s,!1)}function Pr(t,e){if(null!==e){const n=e.type;if(3&n)return Nt(e,t);if(4&n)return Vr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Pr(t,n);{const n=t[e.index];return pt(n)?Vr(-1,n):jt(n)}}if(32&n)return br(e,t)()||jt(t[e.index]);{const n=Mr(t,e);return null!==n?Array.isArray(n)?n[0]:Pr(wr(t[16]),n):Pr(t,e.next)}}return null}function Mr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Vr(t,e){const n=ft+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Pr(t,r)}return e[7]}function Lr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&gr(jt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Lr(t,e,n.child,r,i,o,!1),Sr(e,t,i,a,o);else if(32&u){const s=br(n,r);let u;for(;u=s();)Sr(e,t,i,u,o);Sr(e,t,i,a,o)}else 16&u?Ur(t,e,r,n,i,o):Sr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Fr(t,e,n,r,i,o){Lr(n,r,t.firstChild,e,i,o,!1)}function Ur(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Sr(e,t,i,a[u],o);else Lr(t,e,a,s[3],i,o,!0)}function qr(t,e,n){At(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Br(t,e,n){At(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Hr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const zr="ng-template";function Gr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Hr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Kr(t){return 4===t.type&&t.value!==zr}function Wr(t,e,n){return e===(4!==t.type||n?t.value:zr)}function $r(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ee(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Wr(t,u,n)||""===u&&1===e.length){if(Qr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Gr(t.attrs,c,n)){if(Qr(r))return!1;s=!0}continue}const l=Yr(8&r?"class":u,i,Kr(t),n);if(-1===l){if(Qr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Hr(e,c,0)||2&r&&c!==t){if(Qr(r))return!1;s=!0}}}}else{if(!s&&!Qr(r)&&!Qr(u))return!1;if(s&&Qr(u))continue;s=!1,r=u|1&r}}return Qr(r)||s}function Qr(t){return 0==(1&t)}function Yr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Xr(t,e,n=!1){for(let r=0;r<e.length;r++)if($r(t,e[r],n))return!0;return!1}function Zr(t,e){return t?":not("+e.trim()+")":e}function Jr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Qr(s)||(e+=Zr(o,i),i=""),r=s,o=o||!Qr(r);n++}return""!==i&&(e+=Zr(o,i)),e}const ti={};function ei(t){ni(zt(),Ht(),he()+t,Yt())}function ni(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&ge(e,r,n)}else{const r=t.preOrderHooks;null!==r&&me(e,r,0,n)}fe(n)}function ri(t,e){return t<<17|e<<2}function ii(t){return t>>17&32767}function oi(t){return 2|t}function si(t){return(131068&t)>>2}function ai(t,e){return-131069&t|e<<2}function ui(t){return 1|t}function ci(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ne(i),n.contentQueries(2,e[o],o)}}}function li(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ft(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function hi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Wt(),s=Qt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return $t(o,!0),o}function fi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function di(t,e,n){oe(e);try{const r=t.viewQuery;null!==r&&Bi(1,r,n);const i=t.template;null!==i&&mi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ci(t,e),t.staticViewQueries&&Bi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Vi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,le()}}function pi(t,e,n,r){const i=e[2];if(256==(256&i))return;oe(e);const o=Yt();try{Ft(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&mi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&ge(e,n,null)}else{const n=t.preOrderHooks;null!==n&&me(e,n,0,null),ye(e,0)}if(function(t){for(let e=_r(t);null!==e;e=Or(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ut(r,1),n[2]|=1024}}}(e),function(t){for(let e=_r(t);null!==e;e=Or(e))for(let t=ft;t<e.length;t++){const n=e[t],r=n[1];Vt(n)&&pi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ci(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&ge(e,n)}else{const n=t.contentHooks;null!==n&&me(e,n,1),ye(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)fe(~r);else{const i=r,o=n[++t],s=n[++t];Jt(o,i),s(2,e[i])}}}finally{fe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Pi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Bi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&ge(e,n)}else{const n=t.viewHooks;null!==n&&me(e,n,2),ye(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ut(e[3],-1))}finally{le()}}function gi(t,e,n,r){const i=e[10],o=!Yt(),s=Mt(e);try{o&&!s&&i.begin&&i.begin(),s&&di(t,e,r),pi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function mi(t,e,n,r,i){const o=he(),s=2&r;try{fe(-1),s&&e.length>ht&&ni(t,e,ht,Yt()),n(r,i)}finally{fe(o)}}function yi(t,e,n){Bt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Re(n,e),gr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=vt(r);o&&ki(e,n,r);const u=Ge(e,t,a,n);gr(u,e),null!==s&&Ni(0,a-i,u,r,0,s),o&&(Dt(n.index,e)[8]=u)}}(t,e,n,Nt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{fe(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];te(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ti(r,i)}}finally{fe(-1),te(s)}}(t,e,n))}function vi(t,e,n=Nt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function bi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=wi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function wi(t,e,n,r,i,o,s,a,u,c){const l=ht+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ti);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function _i(t,e,n,r){const i=zi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Gi(t).push(r,i.length-1))}function Oi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ei(t,e,n,r,i,o,s,a){const u=Nt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Wi(t,n,c,r,i),mt(e)&&function(t,e){const n=Dt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,At(o)?o.setProperty(u,r,i):Se(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Si(t,e,n,r){let i=!1;if(Bt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Xr(n,s.selectors,!1)&&(i||(i=[]),Ve(Re(n,e),t,s.type),vt(s)?(Ii(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,xi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=fi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ce(n.mergedAttrs,c.hostAttrs),ji(t,n,e,u,c),Ai(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Kr(e)?null:Ri(n,i);o.push(c),s=Oi(n,u,s),a=Oi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new v("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ce(n.mergedAttrs,n.attrs),i}function Ci(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ti(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ii(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ai(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vt(e)&&(n[""]=t)}}function xi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ji(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=bt(i.type)),s=new _e(o,vt(i),null);t.blueprint[r]=s,n[r]=s,Ci(t,e,0,r,fi(t,n,i.hostVars,ti),i)}function ki(t,e,n){const r=Nt(e,t),i=bi(n),o=t[10],s=Li(t,li(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ni(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Ri(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Di(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Pi(t,e){const n=Dt(e,t);if(Vt(n)){const t=n[1];80&n[2]?pi(t,n,t.template,n[8]):n[5]>0&&Mi(n)}}function Mi(t){for(let n=_r(t);null!==n;n=Or(n))for(let t=ft;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];pi(t,e,t.template,e[8])}else e[5]>0&&Mi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Dt(e[n],t);Vt(r)&&r[5]>0&&Mi(r)}}function Vi(t,e){const n=Dt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),di(r,n,n[8])}function Li(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Fi(t){for(;t;){t[2]|=64;const e=wr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Ui(t,e,n){const r=e[10];r.begin&&r.begin();try{pi(t,e,t.template,n)}catch(i){throw Ki(e,i),i}finally{r.end&&r.end()}}function qi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Pt(n),i=r[1];gi(i,r,i.template,n)}}(t[8])}function Bi(t,e,n){ne(0),e(t,n)}const Hi=(()=>Promise.resolve(null))();function zi(t){return t[7]||(t[7]=[])}function Gi(t){return t.cleanup||(t.cleanup=[])}function Ki(t,e){const n=t[9],r=n?n.get(pr,null):null;r&&r.handleError(e)}function Wi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function $i(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=d(i,t):2==o&&(r=d(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Qi=new tn("INJECTOR",-1);class Yi{get(t,e=hn){if(e===hn){const e=new Error(`NullInjectorError: No provider for ${f(t)}!`);throw e.name="NullInjectorError",e}return e}}const Xi=new tn("Set Injector scope."),Zi={},Ji={},to=[];let eo;function no(){return void 0===eo&&(eo=new Yi),eo}function ro(t,e=null,n=null,r){return new io(t,n,e||no(),r)}class io{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&on(e,n=>this.processProvider(n,t,e)),on([t],t=>this.processInjectorType(t,[],i)),this.records.set(Qi,ao(void 0,this));const o=this.records.get(Xi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:f(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=hn,n=k.Default){this.assertNotDestroyed();const r=mn(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof tn)&&S(t);e=n&&this.injectableDefInScope(n)?ao(oo(t),Zi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?no():this.parent).get(t,e=n&k.Optional&&e===hn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(f(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[dn]&&i.unshift(e[dn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=f(e);if(Array.isArray(e))i=e.map(f).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):f(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(fn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{mn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(f(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=m(t)))return!1;let r=T(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=T(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{on(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];on(r,t=>this.processProvider(t,n,r||to))}}this.injectorDefTypes.add(o);const a=bt(o)||(()=>new o);this.records.set(o,ao(a,Zi));const u=r.providers;if(null!=u&&!s){const e=t;on(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=co(t=m(t))?t:m(t&&t.provide);const i=function(t,e,n){return uo(t)?ao(void 0,t.useValue):ao(so(t),Zi)}(t);if(co(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ao(void 0,Zi,!0),e.factory=()=>bn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Zi&&(e.value=Ji,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function oo(t){const e=S(t),n=null!==e?e.factory:bt(t);if(null!==n)return n;if(t instanceof tn)throw new Error(`Token ${f(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${f(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[x]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function so(t,e,n){let r;if(co(t)){const e=m(t);return bt(e)||oo(e)}if(uo(t))r=()=>m(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...bn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>vn(m(t.useExisting));else{const e=m(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return bt(e)||oo(e);r=()=>new e(...bn(t.deps))}var i;return r}function ao(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function uo(t){return null!==t&&"object"==typeof t&&pn in t}function co(t){return"function"==typeof t}const lo=function(t,e,n){return function(t,e=null,n=null,r){const i=ro(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let ho=(()=>{class t{static create(t,e){return Array.isArray(t)?lo(t,e,""):lo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=hn,t.NULL=new Yi,t.\u0275prov=O({token:t,providedIn:"any",factory:()=>vn(Qi)}),t.__NG_ELEMENT_ID__=-1,t})();function fo(t,e){pe(Pt(t)[1],Kt())}function po(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(vt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=go(t.inputs),e.declaredInputs=go(t.declaredInputs),e.outputs=go(t.outputs);const n=i.hostBindings;n&&vo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&mo(t,o),s&&yo(t,s),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),vt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===po&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ce(i.hostAttrs,n=Ce(n,i.hostAttrs))}}(r)}function go(t){return t===H?{}:t===G?[]:t}function mo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function yo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function vo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let bo=null;function wo(){if(!bo){const t=B.Symbol;if(t&&t.iterator)bo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(bo=n)}}}return bo}function _o(t){return!!Oo(t)&&(Array.isArray(t)||!(t instanceof Map)&&wo()in t)}function Oo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Eo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function So(t,e,n,r){const i=Ht();return Eo(i,Zt(),e)&&(zt(),function(t,e,n,r,i,o){const s=Nt(t,e);!function(t,e,n,r,i,o,s){if(null==o)At(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?b(o):s(o,r||"",i);At(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(de(),i,t,e,n,r)),So}function Co(t,e,n,r,i,o,s,a){const u=Ht(),c=zt(),l=t+ht,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=hi(e,t,4,s||null,Lt(c,a));Si(e,n,l,Lt(c,u)),pe(e,l);const h=l.tViews=wi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];$t(h,!1);const f=u[11].createComment("");Dr(c,u,f,h),gr(f,u),Li(u,u[l]=Di(f,u,f,h)),yt(h)&&yi(c,u,h),null!=s&&vi(u,h,a)}function To(t,e=k.Default){const n=Ht();return null===n?vn(t,e):Ue(Kt(),n,m(t),e)}function Io(t,e,n){const r=Ht();return Eo(r,Zt(),e)&&Ei(zt(),de(),r,t,e,r[11],n,!1),Io}function Ao(t,e,n,r,i){const o=i?"class":"style";Wi(t,n,e.inputs[o],o,r)}function xo(t,e,n,r){const i=Ht(),o=zt(),s=ht+t,a=i[11],u=i[s]=Cr(a,e,qt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=hi(e,t,2,i,Lt(a,o));return Si(e,n,u,Lt(a,s)),null!==u.attrs&&$i(u,u.attrs,!1),null!==u.mergedAttrs&&$i(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];$t(c,!0);const l=c.mergedAttrs;null!==l&&Oe(a,u,l);const h=c.classes;null!==h&&Br(a,u,h);const f=c.styles;null!==f&&qr(a,u,f),64!=(64&c.flags)&&Dr(o,i,u,c),0===qt.lFrame.elementDepthCount&&gr(u,i),qt.lFrame.elementDepthCount++,yt(c)&&(yi(o,i,c),function(t,e,n){if(gt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&vi(i,c)}function jo(){let t=Kt();Qt()?qt.lFrame.isParent=!1:(t=t.parent,$t(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=zt();n.firstCreatePass&&(pe(n,t),gt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ao(n,e,Ht(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ao(n,e,Ht(),e.stylesWithoutHost,!1)}function ko(t,e,n,r){xo(t,e,n,r),jo()}function No(){return Ht()}function Ro(t){return!!t&&"function"==typeof t.then}function Do(t){return!!t&&"function"==typeof t.subscribe}const Po=Do;function Mo(t,e,n=!1,r){const i=Ht(),o=zt(),s=Kt();return function(t,e,n,r,i,o,s=!1,a){const u=yt(r),c=t.firstCreatePass&&Gi(t),l=zi(e);let h=!0;if(3&r.type){const f=Nt(r,e),d=a?a(f):H,p=d.target||f,g=l.length,m=a?t=>a(jt(t[r.index])).target:r.index;if(At(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Lo(r,e,0,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=Lo(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=Lo(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Mo}function Vo(t,e,n,r){try{return!1!==n(r)}catch(i){return Ki(t,i),!1}}function Lo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Dt(t.index,e):e;0==(32&e[2])&&Fi(s);let a=Vo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Vo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Fo(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function Uo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ii(o):si(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];qo(t[a],e)&&(u=!0,t[a+1]=r?ui(n):oi(n)),a=r?ii(n):si(n)}u&&(t[n+1]=r?oi(o):ui(o))}function qo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ln(t,e)>=0}function Bo(t,e){return function(t,e,n,r){const i=Ht(),o=zt(),s=function(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[he()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=zo(n=Ho(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Ho(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==si(r))return t[ii(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Ho(null,t,e,n[1],r),n=zo(n,e.attrs,r),function(t,e,n,r){t[ii(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=zo(r,t[o].hostAttrs,true);return zo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ii(s),u=si(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ln(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ii(t[a+1]);t[r+1]=ri(e,a),0!==e&&(t[e+1]=ai(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ri(a,0),0!==a&&(t[a+1]=ai(t[a+1],r)),a=r;else t[r+1]=ri(u,0),0===a?a=r:t[u+1]=ai(t[u+1],r),u=r;l&&(t[r+1]=oi(t[r+1])),Uo(t,c,r,!0),Uo(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&ln(o,e)>=0&&(n[r+1]=ui(n[r+1]))}(e,c,t,r),s=ri(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==ti&&Eo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Ko(1==(1&c)?Go(u,e,n,i,si(c),s):void 0)||(Ko(o)||function(t){return 2==(2&t)}(c)&&(o=Go(u,null,n,i,a,s)),function(t,e,n,r,i){const o=At(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,kt(he(),n),i,o))}(o,o.data[he()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=f(Nn(t))),t}(e),true,s)}(t,e),Bo}function Ho(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=zo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function zo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),un(t,s,!!n||e[++o]))}return void 0===t?null:t}function Go(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ti&&(l=c?z:void 0);let h=c?cn(l,r):u===r?l:void 0;if(o&&!Ko(h)&&(h=cn(e,r)),Ko(h)&&(a=h,s))return a;const f=t[i+1];i=s?ii(f):si(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=cn(t,r))}return a}function Ko(t){return void 0!==t}function Wo(t,e=""){const n=Ht(),r=zt(),i=t+ht,o=r.firstCreatePass?hi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return At(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Dr(r,n,s,o),$t(o,!1)}function $o(t){return Qo("",t,""),$o}function Qo(t,e,n){const r=Ht(),i=function(t,e,n,r){return Eo(t,Zt(),n)?e+b(n)+r:ti}(r,t,e,n);return i!==ti&&function(t,e,n){const r=kt(e,t);!function(t,e,n){At(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,he(),i),Qo}function Yo(t,e,n){const r=Ht();return Eo(r,Zt(),e)&&Ei(zt(),de(),r,t,e,r[11],n,!0),Yo}const Xo=void 0;var Zo=["en",[["a","p"],["AM","PM"],Xo],[["AM","PM"],Xo,Xo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xo,"{1} 'at' {0}",Xo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Jo={};function ts(t,e,n){"string"!=typeof e&&(n=e,e=t[os.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Jo[e]=t,n&&(Jo[e][os.ExtraData]=n)}function es(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=is(e);if(n)return n;const r=e.split("-")[0];if(n=is(r),n)return n;if("en"===r)return Zo;throw new Error(`Missing locale data for the locale "${t}".`)}function ns(t){return es(t)[os.CurrencyCode]||null}function rs(t){return es(t)[os.PluralCase]}function is(t){return t in Jo||(Jo[t]=B.ng&&B.ng.common&&B.ng.common.locales&&B.ng.common.locales[t]),Jo[t]}var os=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ss="en-US";let as=ss;function us(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(as=t.toLowerCase().replace(/_/g,"-"))}function cs(t,e,n,r,i){if(t=m(t),Array.isArray(t))for(let o=0;o<t.length;o++)cs(t[o],e,n,r,i);else{const o=zt(),s=Ht();let a=co(t)?t:m(t.provide),u=so(t);const c=Kt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(co(t)||!t.multi){const r=new _e(u,i,To),d=fs(a,e,i?l:l+f,h);-1===d?(Ve(Re(c,s),o,a),ls(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=fs(a,e,l+f,h),p=fs(a,e,l,l+f),g=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!g){Ve(Re(c,s),o,a);const l=function(t,e,n,r,i){const o=new _e(t,n,To);return o.multi=[],o.index=e,o.componentProviders=0,hs(o,i,r&&!n),o}(i?ps:ds,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),ls(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else ls(o,t,d>-1?d:p,hs(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function ls(t,e,n,r){const i=co(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function hs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function fs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ds(t,e,n,r){return gs(this.multi,[])}function ps(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ge(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),gs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],gs(i,o);return o}function gs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ms(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=zt();if(r.firstCreatePass){const i=vt(t);cs(n,r.data,r.blueprint,i,!0),cs(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class ys{}class vs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${f(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let bs=(()=>{class t{}return t.NULL=new vs,t})();function ws(...t){}function _s(t,e){return new Es(Nt(t,e))}const Os=function(){return _s(Kt(),Ht())};let Es=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Os,t})();function Ss(t){return t instanceof Es?t.nativeElement:t}class Cs{}let Ts=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Is(),t})();const Is=function(){const t=Ht(),e=Dt(Kt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let As=(()=>{class t{}return t.\u0275prov=O({token:t,providedIn:"root",factory:()=>null}),t})();class xs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const js=new xs("11.2.13");class ks{constructor(){}supports(t){return _o(t)}create(t){return new Rs(t)}}const Ns=(t,e)=>e;class Rs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ns}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Vs(n,r,i)?e:n,s=Vs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!_o(t))throw new Error(`Error trying to diff '${f(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[wo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Ds(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ms),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ms),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ds{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ps{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ms{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ps,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Vs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ls{constructor(){}supports(t){return t instanceof Map||Oo(t)}create(){return new Fs}}class Fs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Oo(t)))throw new Error(`Error trying to diff '${f(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Us(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Us{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qs(){return new Bs([new ks])}let Bs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||qs()),deps:[[t,new En,new On]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=O({token:t,providedIn:"root",factory:qs}),t})();function Hs(){return new zs([new Ls])}let zs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Hs()),deps:[[t,new En,new On]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=O({token:t,providedIn:"root",factory:Hs}),t})();function Gs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(jt(o)),pt(o))for(let t=ft;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Gs(e[1],e,n,r)}const s=n.type;if(8&s)Gs(t,e,n.child,r);else if(32&s){const t=br(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Mr(e,n);if(Array.isArray(t))r.push(...t);else{const n=wr(e[16]);Gs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ks{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Gs(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Ir(t,n),an(e,n))}this._attachedToViewContainer=!1}Ar(this._lView[1],this._lView)}onDestroy(t){_i(this._lView[1],this._lView,null,t)}markForCheck(){Fi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ui(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Xt(!0);try{Ui(t,e,n)}finally{Xt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Fr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ws extends Ks{constructor(t){super(t),this._view=t}detectChanges(){qi(this._view)}checkNoChanges(){!function(t){Xt(!0);try{qi(t)}finally{Xt(!1)}}(this._view)}get context(){return null}}const $s=Ys;let Qs=(()=>{class t{}return t.__NG_ELEMENT_ID__=$s,t.__ChangeDetectorRef__=!0,t})();function Ys(t=!1){return function(t,e,n){if(!n&&mt(t)){const n=Dt(t.index,e);return new Ks(n,n)}return 47&t.type?new Ks(e[16],e):null}(Kt(),Ht(),t)}const Xs=[new Ls],Zs=new Bs([new ks]),Js=new zs(Xs),ta=function(){return ia(Kt(),Ht())};let ea=(()=>{class t{}return t.__NG_ELEMENT_ID__=ta,t})();const na=ea,ra=class extends na{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=li(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),di(e,n,t),new Ks(n)}};function ia(t,e){return 4&t.type?new ra(e,t,_s(t,e)):null}class oa{}class sa{}const aa=function(){return da(Kt(),Ht())};let ua=(()=>{class t{}return t.__NG_ELEMENT_ID__=aa,t})();const ca=ua,la=class extends ca{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return _s(this._hostTNode,this._hostLView)}get injector(){return new $e(this._hostTNode,this._hostLView)}get parentInjector(){const t=Me(this._hostTNode,this._hostLView);if(Ie(t)){const e=xe(t,this._hostLView),n=Ae(t);return new $e(e[1].data[n+8],e)}return new $e(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ha(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(oa,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new la(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ft+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ft?(e[4]=n[i],sn(n,ft+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Vr(i,o),a=n[11],u=Rr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Fr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),sn(fa(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ha(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Ir(this._lContainer,e);n&&(an(fa(this._lContainer),e),Ar(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Ir(this._lContainer,e);return n&&null!=an(fa(this._lContainer),e)?new Ks(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ha(t){return t[8]}function fa(t){return t[8]||(t[8]=[])}function da(t,e){let n;const r=e[t.index];if(pt(r))n=r;else{let i;if(8&t.type)i=jt(r);else{const n=e[11];i=n.createComment("");const r=Nt(t,e);jr(n,Rr(n,r),i,function(t,e){return At(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Di(r,e,i,t),Li(e,n)}return new la(n,t,e)}const pa={};class ga extends bs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ct(t);return new va(e,this.ngModule)}}function ma(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ya=new tn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>mr});class va extends ys{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Jr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ma(this.componentDef.inputs)}get outputs(){return ma(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,pa,i);return o!==pa||r===pa?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Cs,xt),s=i.get(As,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(At(t))return t.selectRootElement(e,n===V.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Cr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:mr,clean:Hi,playerHandler:null,flags:0},f=wi(0,null,null,1,0,null,null,null,null,null),d=li(null,f,h,l,null,null,o,a,s,i);let p,g;oe(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=hi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&($i(a,u,!0),null!==t&&(Oe(i,t,u),null!==a.classes&&Br(i,t,a.classes),null!==a.styles&&qr(i,t,a.styles)));const c=r.createRenderer(t,e),l=li(n,bi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Ve(Re(a,n),s,e.type),Ii(s,a),xi(a,n.length,1)),Li(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Oe(a,c,["ng-version",js.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Qr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Oe(a,c,t),e&&e.length>0&&Br(a,c,e.join(" "))}if(g=Rt(f,ht),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Kt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ji(t,r,e,fi(t,e,1,null),n));const i=Ge(e,t,r.directiveStart,r);gr(i,e);const o=Nt(r,e);return o&&gr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Kt();e.contentQueries(1,s,t.directiveStart)}const a=Kt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(fe(a.index),Ci(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ti(e,s)),s}(t,this.componentDef,d,h,[fo]),di(f,d,null)}finally{le()}return new ba(this.componentType,p,_s(g,d),d,g)}}class ba extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Ws(r),this.componentType=t}get injector(){return new $e(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const wa=new Map;class _a extends oa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ga(this);const n=lt(t),r=t[Y]||null;r&&us(r),this._bootstrapComponents=yr(n.bootstrap),this._r3Injector=ro(t,e,[{provide:oa,useValue:this},{provide:bs,useValue:this.componentFactoryResolver}],f(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ho.THROW_IF_NOT_FOUND,n=k.Default){return t===ho||t===oa||t===Qi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Oa extends sa{constructor(t){super(),this.moduleType=t,null!==lt(t)&&function(t){const e=new Set;!function t(n){const r=lt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${f(e)} vs ${f(e.name)}`)}(i,wa.get(i),n),wa.set(i,n));const o=yr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new _a(this.moduleType,t)}}function Ea(t,e,n){const r=function(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=Ht();return i[r]===ti?function(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Sa(t){return e=>{setTimeout(t,void 0,e)}}const Ca=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Sa(u),a&&(a=Sa(a)),c&&(c=Sa(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function Ta(){return this._results[wo()]()}class Ia{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=wo(),n=Ia.prototype;n[e]||(n[e]=Ta)}get changes(){return this._changes||(this._changes=new Ca)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=rn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Aa{constructor(t){this.queryList=t,this.matches=null}clone(){return new Aa(this.queryList)}setDirty(){this.queryList.setDirty()}}class xa{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new xa(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ua(t,e).matches&&this.queries[e].setDirty()}}class ja{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class ka{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new ka(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Na{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Na(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ra(e,i)),this.matchTNodeWithReadOption(t,e,ze(e,t,i,!1,!1))}else n===ea?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,ze(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Es||r===ua||r===ea&&4&e.type)this.addMatch(e.index,-2);else{const n=ze(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ra(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Da(t,e,n,r){return-1===n?function(t,e){return 11&t.type?_s(t,e):4&t.type?ia(t,e):null}(e,t):-2===n?function(t,e,n){return n===Es?_s(e,t):n===ea?ia(e,t):n===ua?da(e,t):void 0}(t,e,r):Ge(t,t[1],n,e)}function Pa(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Da(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ma(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Pa(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ft;t<s.length;t++){const e=s[t];e[17]===e[3]&&Ma(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Ma(n[1],n,i,r)}}}}}return r}function Va(t){const e=Ht(),n=zt(),r=ee();ne(r+1);const i=Ua(n,r);if(t.dirty&&Mt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Ma(n,e,r,[]):Pa(n,e,i,r);t.reset(o,Ss),t.notifyOnChanges()}return!0}return!1}function La(t,e,n,r){const i=zt();if(i.firstCreatePass){const o=Kt();(function(t,e,n){null===t.queries&&(t.queries=new ka),t.queries.track(new Na(e,n))})(i,new ja(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Ia(4==(4&n));_i(t,e,r,r.destroy),null===e[19]&&(e[19]=new xa),e[19].queries.push(new Aa(r))}(i,Ht(),n)}function Fa(){return t=Ht(),e=ee(),t[19].queries[e].queryList;var t,e}function Ua(t,e){return t.queries.getByIndex(e)}function qa(t=k.Default){const e=Ys(!0);if(null!=e||t&k.Optional)return e;_("ChangeDetectorRef")}const Ba=new tn("Application Initializer");let Ha=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ws,this.reject=ws,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Ro(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(vn(Ba,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const za=new tn("AppId"),Ga={provide:za,useFactory:function(){return`${Ka()}${Ka()}${Ka()}`},deps:[]};function Ka(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Wa=new tn("Platform Initializer"),$a=new tn("Platform ID"),Qa=new tn("appBootstrapListener");let Ya=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const Xa=new tn("LocaleId"),Za=new tn("DefaultCurrencyCode");class Ja{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const tu=function(t){return new Oa(t)},eu=tu,nu=function(t){return Promise.resolve(tu(t))},ru=function(t){const e=tu(t),n=yr(lt(t).declarations).reduce((t,e)=>{const n=ct(e);return n&&t.push(new va(n)),t},[]);return new Ja(e,n)},iu=ru,ou=function(t){return Promise.resolve(ru(t))};let su=(()=>{class t{constructor(){this.compileModuleSync=eu,this.compileModuleAsync=nu,this.compileModuleAndAllComponentsSync=iu,this.compileModuleAndAllComponentsAsync=ou}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const au=(()=>Promise.resolve(0))();function uu(t){"undefined"==typeof Zone?au.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class cu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ca(!1),this.onMicrotaskEmpty=new Ca(!1),this.onStable=new Ca(!1),this.onError=new Ca(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=B.requestAnimationFrame,e=B.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(B,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,fu(t),hu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),fu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return du(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),pu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return du(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),pu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,fu(t),hu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(cu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,lu,ws,ws);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const lu={};function hu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function du(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pu(t){t._nesting--,hu(t)}class gu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ca,this.onMicrotaskEmpty=new Ca,this.onStable=new Ca,this.onError=new Ca}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let mu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cu.assertNotInAngularZone(),uu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())uu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(vn(cu))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})(),yu=(()=>{class t{constructor(){this._applications=new Map,_u.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return _u.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();class vu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function bu(t){_u=t}let wu,_u=new vu,Ou=!0,Eu=!1;function Su(){return Eu=!0,Ou}function Cu(){if(Eu)throw new Error("Cannot enable prod mode after platform setup.");Ou=!1}const Tu=new tn("AllowMultipleToken");class Iu{constructor(t,e){this.name=t,this.token=e}}function Au(t,e,n=[]){const r=`Platform: ${e}`,i=new tn(r);return(e=[])=>{let o=xu();if(!o||o.injector.get(Tu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Xi,useValue:"platform"});!function(t){if(wu&&!wu.destroyed&&!wu.injector.get(Tu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");wu=t.get(ju);const e=t.get(Wa,null);e&&e.forEach(t=>t())}(ho.create({providers:t,name:r}))}return function(t){const e=xu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function xu(){return wu&&!wu.destroyed?wu:null}let ju=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new gu:("zone.js"===t?void 0:t)||new cu({enableLongStackTrace:Su(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:cu,useValue:n}];return n.run(()=>{const e=ho.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(pr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Ru(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Ro(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Ha);return t.runInitializers(),t.donePromise.then(()=>(us(i.injector.get(Xa,ss)||ss),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=ku({},e);return function(t,e,n){const r=new Oa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Nu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${f(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(vn(ho))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function ku(t,e){return Array.isArray(e)?e.reduce(ku,t):Object.assign(Object.assign({},t),e)}let Nu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{cu.assertNotInAngularZone(),uu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{cu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(l,h.pipe(t=>{return Object(u.a)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.b);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ys?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(oa),i=n.create(ho.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(mu,null),a=s&&i.injector.get(yu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Ru(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ru(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Qa,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(vn(cu),vn(ho),vn(pr),vn(bs),vn(Ha))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Ru(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Du{}class Pu{}const Mu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Vu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Mu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Lu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Lu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(vn(su),vn(Pu,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Lu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Fu=function(t){return null},Uu=Au(null,"core",[{provide:$a,useValue:"unknown"},{provide:ju,deps:[ho]},{provide:yu,deps:[]},{provide:Ya,deps:[]}]),qu=[{provide:Nu,useClass:Nu,deps:[cu,ho,pr,bs,Ha]},{provide:ya,deps:[cu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ha,useClass:Ha,deps:[[new On,Ba]]},{provide:su,useClass:su,deps:[]},Ga,{provide:Bs,useFactory:function(){return Zs},deps:[]},{provide:zs,useFactory:function(){return Js},deps:[]},{provide:Xa,useFactory:function(t){return us(t=t||"undefined"!=typeof $localize&&$localize.locale||ss),t},deps:[[new _n(Xa),new On,new En]]},{provide:Za,useValue:"USD"}];let Bu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(vn(Nu))},t.\u0275mod=it({type:t}),t.\u0275inj=E({providers:qu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return O}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return E}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return s}),n.d(e,"h",function(){return T}),n.d(e,"i",function(){return c}),n.d(e,"j",function(){return f}),n.d(e,"k",function(){return d}),n.d(e,"l",function(){return g}),n.d(e,"m",function(){return m}),n.d(e,"n",function(){return l}),n.d(e,"o",function(){return h}),n.d(e,"p",function(){return p}),n.d(e,"q",function(){return y});var r=n("mrSG"),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return c().indexOf("Electron/")>=0}function m(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}var v=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,b.prototype.create),o}return Object(r.c)(e,t),e}(Error),b=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?w(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new v(i,a,r);return u},t}();function w(t,e){return t.replace(_,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var _=/\{\$([^}]+)}/g;function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E(t,e){var n=new S(t,e);return n.subscribe.bind(n)}var S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function C(){}function T(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return S}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return O});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),w=new u.P("6.1.4");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const O=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function S(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const C={provide:class{},useFactory:_,deps:[v,u.A,[new u.B,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(u.C))},t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({providers:[C]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.f)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.5.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.g)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.g)(e,t)},createSubscribe:s.e,ErrorFactory:s.b,deepExtend:s.g}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.j)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.o)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.21",void 0),t.registerVersion("fire-js","")}(w),e.a=w},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Rb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=Object(r.Gb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Rb)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Rb)(s).location;return new b(Object(r.Rb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(m),r.Rb(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Gb)({factory:O,token:t,providedIn:"root"}),t})();function O(){return new _(Object(r.Rb)(m),Object(r.Rb)(a))}function E(t){return t.replace(/\/index.html$/,"")}var S=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const C=r.mb;class T{}let I=(()=>{class t extends T{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(C(e||this.locale)(t)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.v))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class A{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let x=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new j(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new j(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L),r.Kb(r.t))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class j{constructor(t,e){this.record=t,this.view=e}}let k=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new N,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){R("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){R("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class N{constructor(){this.$implicit=null,this.ngIf=null}}function R(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}let D=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.u),r.Kb(r.E))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[{provide:T,useClass:I}]}),t})();function M(t){return"server"===t}let V=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new L(Object(r.Rb)(s),window)}),t})();class L{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=F(this.window.history)||F(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function F(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class U extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new U,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=B||(B=document.querySelector("base"),B)?B.getAttribute("href"):null;return null==e?null:(n=e,q||(q=document.createElement("a")),q.setAttribute("href",n),"/"===q.pathname.charAt(0)?q.pathname:"/"+q.pathname);var n}resetBaseElement(){B=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let q,B=null;const H=new r.r("TRANSITION_ID"),z=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[H,s,r.s],multi:!0}];class G{static init(){Object(r.X)(new G)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const K=new r.r("EventManagerPlugins");let W=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(K),r.Rb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class ${constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Q=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Y=(()=>{class t extends Q{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const X={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Z=/%COMP%/g;function J(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?J(t,i,n):(i=i.replace(Z,t),n.push(i))}return n}function tt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let et=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new nt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new rt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new it(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=J(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(W),r.Rb(Y),r.Rb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class nt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(X[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=X[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=X[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,tt(n)):this.eventManager.addEventListener(t,e,tt(n))}}class rt extends nt{constructor(t,e,n,r){super(t),this.component=n;const i=J(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Z,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Z,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class it extends nt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=J(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ot=(()=>{class t extends ${constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const st=["alt","control","meta","shift"],at={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ut={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ct={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let lt=(()=>{class t extends ${constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(st.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ut.hasOwnProperty(e)&&(e=ut[e]))}return at[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),st.forEach(r=>{r!=n&&(0,ct[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const ht=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){U.makeCurrent(),G.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],ft=Object(r.S)(r.W,"browser",ht),dt=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:K,useClass:ot,multi:!0,deps:[s,r.A,r.C]},{provide:K,useClass:lt,multi:!0,deps:[s]},[],{provide:et,useClass:et,deps:[W,Y,r.c]},{provide:r.F,useExisting:et},{provide:Q,useExisting:Y},{provide:Y,useClass:Y,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:W,useClass:W,deps:[K,r.A]},[]];let pt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:H,useExisting:r.c},z]}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(t,12))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:dt,imports:[P,r.f]}),t})();"undefined"!=typeof window&&window;var gt=n("Cfvw"),mt=n("LRne"),yt=n("XNiG"),vt=n("9ppp");class bt extends yt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new vt.a;return this._value}next(t){super.next(this._value=t)}}var wt=n("z+Ro"),_t=n("DH7j"),Ot=n("7o/Q");class Et extends Ot.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class St extends Ot.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Ct=n("SeVD"),Tt=n("HDdC");function It(t,e,n,r,i=new St(t,n,r)){if(!i.closed)return e instanceof Tt.a?e.subscribe(i):Object(Ct.a)(e)(i)}var At=n("yCtX");const xt={};class jt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new kt(t,this.resultSelector))}}class kt extends Et{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(xt),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(It(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===xt?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Nt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Rt=n("bHdf");function Dt(...t){return Object(Rt.a)(1)(Object(mt.a)(...t))}var Pt=n("EY2u");function Mt(t){return new Tt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(gt.a)(n):Object(Pt.b)()).subscribe(e)})}var Vt=n("EQ5u"),Lt=n("lJxs"),Ft=n("zx2A");function Ut(t,e){return"function"==typeof e?n=>n.pipe(Ut((n,r)=>Object(gt.a)(t(n,r)).pipe(Object(Lt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new qt(t))}class qt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Bt(t,this.project))}}class Bt extends Ft.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Ft.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Ft.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Ht=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function zt(t){return e=>0===t?Object(Pt.b)():e.lift(new Gt(t))}class Gt{constructor(t){if(this.total=t,this.total<0)throw new Ht}call(t,e){return e.subscribe(new Kt(t,this.total))}}class Kt extends Ot.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Wt(...t){const e=t[t.length-1];return Object(wt.a)(e)?(t.pop(),n=>Dt(t,n,e)):e=>Dt(t,e)}function $t(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Qt(t,e,n))}}class Qt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Yt(t,this.accumulator,this.seed,this.hasSeed))}}class Yt extends Ot.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Xt(t,e){return function(n){return n.lift(new Zt(t,e))}}class Zt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Jt(t,this.predicate,this.thisArg))}}class Jt extends Ot.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function te(t){return function(e){const n=new ee(t),r=e.lift(n);return n.caught=r}}class ee{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ne(t,this.selector,this.caught))}}class ne extends Ft.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Ft.a(this);this.add(r);const i=Object(Ft.c)(n,r);i!==r&&this.add(i)}}}var re=n("5+tZ");function ie(t,e){return Object(re.a)(t,e,1)}function oe(t){return function(e){return 0===t?Object(Pt.b)():e.lift(new se(t))}}class se{constructor(t){if(this.total=t,this.total<0)throw new Ht}call(t,e){return e.subscribe(new ae(t,this.total))}}class ae extends Ot.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ue(t=he){return e=>e.lift(new ce(t))}class ce{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new le(t,this.errorFactory))}}class le extends Ot.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Pv){t=Pv}this.destination.error(t)}}}function he(){return new Nt}function fe(t=null){return e=>e.lift(new de(t))}class de{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new pe(t,this.defaultValue))}}class pe extends Ot.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ge=n("SpAZ");function me(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Xt((e,n)=>t(e,n,r)):ge.a,zt(1),n?fe(e):ue(()=>new Nt))}var ye=n("vkgz"),ve=n("x+ZX"),be=n("quSY");class we{constructor(t){this.callback=t}call(t,e){return e.subscribe(new _e(t,this.callback))}}class _e extends Ot.a{constructor(t,e){super(t),this.add(new be.a(e))}}class Oe{constructor(t,e){this.id=t,this.url=e}}class Ee extends Oe{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Se extends Oe{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ce extends Oe{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Te extends Oe{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ie extends Oe{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ae extends Oe{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xe extends Oe{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class je extends Oe{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ke extends Oe{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ne{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Re{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class De{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pe{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Me{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ve{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Le{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Fe="primary";class Ue{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function qe(t){return new Ue(t)}function Be(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function He(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ze(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Ge(t[i],e[i]))return!1;return!0}function Ge(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Ke(t){return Array.prototype.concat.apply([],t)}function We(t){return t.length>0?t[t.length-1]:null}function $e(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Qe(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(gt.a)(Promise.resolve(t)):Object(mt.a)(t)}function Ye(t,e,n){return n?function(t,e){return ze(t,e)}(t.queryParams,e.queryParams)&&Xe(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ge(t[n],e[n]))}(t.queryParams,e.queryParams)&&Ze(t.root,e.root)}function Xe(t,e){if(!rn(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Xe(t.children[n],e.children[n]))return!1}return!0}function Ze(t,e){return Je(t,e,e.segments)}function Je(t,e,n){if(t.segments.length>n.length)return!!rn(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!rn(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Ze(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!rn(t.segments,r)&&!!t.children.primary&&Je(t.children.primary,e,i)}}class tn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qe(this.queryParams)),this._queryParamMap}toString(){return an.serialize(this)}}class en{constructor(t,e){this.segments=t,this.children=e,this.parent=null,$e(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return un(this)}}class nn{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=qe(this.parameters)),this._parameterMap}toString(){return gn(this)}}function rn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class on{}class sn{parse(t){const e=new wn(t);return new tn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${cn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${hn(e)}=${hn(t)}`).join("&"):`${hn(e)}=${hn(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const an=new sn;function un(t){return t.segments.map(t=>gn(t)).join("/")}function cn(t,e){if(!t.hasChildren())return un(t);if(e){const e=t.children.primary?cn(t.children.primary,!1):"",n=[];return $e(t.children,(t,e)=>{e!==Fe&&n.push(`${e}:${cn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return $e(t.children,(t,r)=>{r===Fe&&(n=n.concat(e(t,r)))}),$e(t.children,(t,r)=>{r!==Fe&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Fe?[cn(t.children.primary,!1)]:[`${n}:${cn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${un(t)}/${e[0]}`:`${un(t)}/(${e.join("//")})`}}function ln(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hn(t){return ln(t).replace(/%3B/gi,";")}function fn(t){return ln(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dn(t){return decodeURIComponent(t)}function pn(t){return dn(t.replace(/\+/g,"%20"))}function gn(t){return`${fn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${fn(t)}=${fn(e[t])}`).join("")}`;var e}const mn=/^[^\/()?;=#]+/;function yn(t){const e=t.match(mn);return e?e[0]:""}const vn=/^[^=?&#]+/,bn=/^[^?&#]+/;class wn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new en(t,e)),n}parseSegment(){const t=yn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new nn(dn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=yn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=yn(this.remaining);t&&(n=t,this.capture(n))}t[dn(e)]=dn(n)}parseQueryParam(t){const e=function(t){const e=t.match(vn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(bn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=pn(e),i=pn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=yn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Fe);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new en([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class _n{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=On(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=On(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=En(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return En(t,this._root).map(t=>t.value)}}function On(t,e){if(t===e.value)return e;for(const n of e.children){const e=On(t,n);if(e)return e}return null}function En(t,e){if(t===e.value)return[e];for(const n of e.children){const r=En(t,n);if(r.length)return r.unshift(e),r}return[]}class Sn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Cn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Tn extends _n{constructor(t,e){super(t),this.snapshot=e,Nn(this,t)}toString(){return this.snapshot.toString()}}function In(t,e){const n=function(t,e){const n=new jn([],{},{},"",{},Fe,e,null,t.root,-1,{});return new kn("",new Sn(n,[]))}(t,e),r=new bt([new nn("",{})]),i=new bt({}),o=new bt({}),s=new bt({}),a=new bt(""),u=new An(r,i,s,a,o,Fe,e,n.root);return u.snapshot=n.root,new Tn(new Sn(u,[]),n)}class An{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Lt.a)(t=>qe(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Lt.a)(t=>qe(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class jn{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kn extends _n{constructor(t,e){super(e),this.url=t,Nn(this,e)}toString(){return Rn(this._root)}}function Nn(t,e){e.value._routerState=t,e.children.forEach(e=>Nn(t,e))}function Rn(t){const e=t.children.length>0?` { ${t.children.map(Rn).join(", ")} } `:"";return`${t.value}${e}`}function Dn(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ze(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ze(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ze(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ze(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Pn(t,e){return ze(t.params,e.params)&&function(t,e){return rn(t,e)&&t.every((t,n)=>ze(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Pn(t.parent,e.parent))}function Mn(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Mn(t,e,r);return Mn(t,e)})}(t,e,n);return new Sn(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Vn(e,t),t}}const n=new An(new bt((r=e.value).url),new bt(r.params),new bt(r.queryParams),new bt(r.fragment),new bt(r.data),r.outlet,r.component,r),i=e.children.map(e=>Mn(t,e));return new Sn(n,i)}var r}function Vn(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Vn(t.children[n],e.children[n])}function Ln(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Fn(t){return"object"==typeof t&&null!=t&&t.outlets}function Un(t,e,n,r,i){let o={};return r&&$e(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new tn(n.root===t?e:qn(n.root,t,e),o,i)}function qn(t,e,n){const r={};return $e(t.children,(t,i)=>{r[i]=t===e?n:qn(t,e,n)}),new en(t.segments,r)}class Bn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ln(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Fn);if(r&&r!==We(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function zn(t,e,n){if(t||(t=new en([],{})),0===t.segments.length&&t.hasChildren())return Gn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Fn(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Qn(a,u,e))return o;r+=2}else{if(!Qn(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new en(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new en(t.segments.slice(r.pathIndex),t.children),Gn(e,0,i)}return r.match&&0===i.length?new en(t.segments,{}):r.match&&!t.hasChildren()?Kn(t,e,n):r.match?Gn(t,0,i):Kn(t,e,n)}function Gn(t,e,n){if(0===n.length)return new en(t.segments,{});{const r=function(t){return Fn(t[0])?t[0].outlets:{[Fe]:t}}(n),i={};return $e(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=zn(t.children[r],e,n))}),$e(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new en(t.segments,i)}}function Kn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Fn(o)){const t=Wn(o.outlets);return new en(r,t)}if(0===i&&Ln(n[0])){r.push(new nn(t.segments[e].path,$n(n[0]))),i++;continue}const s=Fn(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ln(a)?(r.push(new nn(s,$n(a))),i+=2):(r.push(new nn(s,{})),i++)}return new en(r,{})}function Wn(t){const e={};return $e(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Kn(new en([],{}),0,t))}),e}function $n(t){const e={};return $e(t,(t,n)=>e[n]=`${t}`),e}function Qn(t,e,n){return t==n.path&&ze(e,n.parameters)}class Yn{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Dn(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Cn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),$e(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Cn(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Cn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ve(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Pe(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Dn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Xn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Xn(t){Dn(t.value),t.children.forEach(Xn)}class Zn{constructor(t,e){this.routes=t,this.module=e}}function Jn(t){return"function"==typeof t}function tr(t){return t instanceof tn}const er=Symbol("INITIAL_VALUE");function nr(){return Ut(t=>function(...t){let e,n;return Object(wt.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(_t.a)(t[0])&&(t=t[0]),Object(At.a)(t,n).lift(new jt(e))}(t.map(t=>t.pipe(zt(1),Wt(er)))).pipe($t((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==er)return t;if(r===er&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||tr(r))return r}return t},t)},er),Xt(t=>t!==er),Object(Lt.a)(t=>tr(t)?t:!0===t),zt(1)))}let rr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[Qr]},encapsulation:2}),t})();function ir(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];or(r,sr(e,r))}}function or(t,e){t.children&&ir(t.children,e)}function sr(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function ar(t){const e=t.children&&t.children.map(ar),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Fe&&(n.component=rr),n}function ur(t){return t.outlet||Fe}function cr(t,e){const n=t.filter(t=>ur(t)===e);return n.push(...t.filter(t=>ur(t)!==e)),n}const lr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function hr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},lr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||He)(n,t,e);if(!i)return Object.assign({},lr);const o={};$e(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function fr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>dr(t,e,n)&&ur(n)!==Fe)}(t,n,r)){const i=new en(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&ur(o)!==Fe){const n=new en([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[ur(o)]=n}return i}(t,e,r,new en(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>dr(t,e,n))}(t,n,r)){const o=new en(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(dr(t,n,a)&&!i[ur(a)]){const n=new en([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[ur(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new en(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function dr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function pr(t,e,n,r){return!!(ur(t)===r||r!==Fe&&dr(e,n,t))&&("**"===t.path||hr(e,t,n).matched)}function gr(t,e,n){return 0===e.length&&!t.children[n]}class mr{constructor(t){this.segmentGroup=t||null}}class yr{constructor(t){this.urlTree=t}}function vr(t){return new Tt.a(e=>e.error(new mr(t)))}function br(t){return new Tt.a(e=>e.error(new yr(t)))}function wr(t){return new Tt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class _r{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=fr(this.urlTree.root,[],[],this.config).segmentGroup,e=new en(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Fe).pipe(Object(Lt.a)(t=>this.createUrlTree(Or(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(te(t=>{if(t instanceof yr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof mr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Fe).pipe(Object(Lt.a)(e=>this.createUrlTree(Or(e),t.queryParams,t.fragment))).pipe(te(t=>{if(t instanceof mr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new en([],{[Fe]:t}):t;return new tn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Lt.a)(t=>new en([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(gt.a)(r).pipe(ie(r=>{const i=n.children[r],o=cr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(Lt.a)(t=>({segment:t,outlet:r})))}),$t((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Xt((e,n)=>t(e,n,r)):ge.a,oe(1),n?fe(e):ue(()=>new Nt))}())}expandSegment(t,e,n,r,i,o){return Object(gt.a)(n).pipe(ie(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(te(t=>{if(t instanceof mr)return Object(mt.a)(null);throw t}))),me(t=>!!t),te((t,n)=>{if(t instanceof Nt||"EmptyError"===t.name){if(gr(e,r,i))return Object(mt.a)(new en([],{}));throw new mr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return pr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):vr(e):vr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?br(i):this.lineralizeSegments(n,i).pipe(Object(re.a)(n=>{const i=new en(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=hr(e,r,i);if(!s)return vr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?br(l):this.lineralizeSegments(r,l).pipe(Object(re.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(mt.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(Lt.a)(t=>(n._loadedConfig=t,new en(r,{})))):Object(mt.a)(new en(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=hr(e,n,r);if(!o)return vr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(re.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=fr(e,s,u,o),l=new en(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(Lt.a)(t=>new en(s,t)));if(0===o.length&&0===c.length)return Object(mt.a)(new en(s,{}));const h=ur(n)===i;return this.expandSegment(r,l,o,c,h?Fe:i,!0).pipe(Object(Lt.a)(t=>new en(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(mt.a)(new Zn(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(mt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(re.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Lt.a)(t=>(e._loadedConfig=t,t))):function(t){return new Tt.a(e=>e.error(Be(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(mt.a)(new Zn([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(mt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Jn(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Jn(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Qe(o)});return Object(mt.a)(i).pipe(nr(),Object(ye.a)(t=>{if(!tr(t))return;const e=Be(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Lt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(mt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return wr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new tn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return $e(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return $e(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new en(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Or(t){const e={};for(const n of Object.keys(t.children)){const r=Or(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new en(t.segments.concat(e.segments),e.children)}return t}(new en(t.segments,e))}class Er{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Sr{constructor(t,e){this.component=t,this.route=e}}function Cr(t,e,n){const r=t._root;return Ir(r,e?e._root:null,n,[r.value])}function Tr(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ir(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Cn(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!rn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!rn(t.url,e.url)||!ze(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pn(t,e)||!ze(t.queryParams,e.queryParams);case"paramsChange":default:return!Pn(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Er(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ir(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Sr(a.outlet.component,s))}else s&&Ar(e,a,i),i.canActivateChecks.push(new Er(r)),Ir(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),$e(o,(t,e)=>Ar(t,n.getContext(e),i)),i}function Ar(t,e,n){const r=Cn(t),i=t.value;$e(r,(t,r)=>{Ar(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Sr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class xr{}function jr(t){return new Tt.a(e=>e.error(t))}class kr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=fr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Fe);if(null===e)return null;const n=new jn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Fe,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Sn(n,e),i=new kn(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=xn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=cr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Rr(n);return r.sort((t,e)=>t.value.outlet===Fe?-1:e.value.outlet===Fe?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return gr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!pr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?We(n).parameters:{};i=new jn(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mr(t),ur(t),t.component,t,Dr(e),Pr(e)+n.length,Vr(t))}else{const r=hr(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new jn(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mr(t),ur(t),t.component,t,Dr(e),Pr(e)+o.length,Vr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=fr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Sn(i,t)]}if(0===a.length&&0===c.length)return[new Sn(i,[])];const l=ur(t)===r,h=this.processSegment(a,u,c,l?Fe:r);return null===h?null:[new Sn(i,h)]}}function Nr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Rr(t){const e=[],n=new Set;for(const r of t){if(!Nr(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Rr(r.children);e.push(new Sn(r.value,t))}return e.filter(t=>!n.has(t))}function Dr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Pr(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Mr(t){return t.data||{}}function Vr(t){return t.resolve||{}}function Lr(t){return Ut(e=>{const n=t(e);return n?Object(gt.a)(n).pipe(Object(Lt.a)(()=>e)):Object(mt.a)(e)})}class Fr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Ur=new r.r("ROUTES");class qr{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(Lt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Zn(Ke(i.injector.get(Ur,void 0,r.q.Self|r.q.Optional)).map(ar),i)}),te(t=>{throw e._loader$=void 0,t}));return e._loader$=new Vt.a(n,()=>new yt.a).pipe(Object(ve.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(gt.a)(this.loader.load(t)):Qe(t()).pipe(Object(re.a)(t=>t instanceof r.w?Object(mt.a)(t):Object(gt.a)(this.compiler.compileModuleAsync(t))))}}class Br{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Hr,this.attachRef=null}}class Hr{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Br,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class zr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Gr(t){throw t}function Kr(t,e,n){return e.parse("/")}function Wr(t,e){return Object(mt.a)(null)}let $r=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new yt.a,this.errorHandler=Gr,this.malformedUriErrorHandler=Kr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Wr,afterPreactivation:Wr},this.urlHandlingStrategy=new zr,this.routeReuseStrategy=new Fr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new tn(new en([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new qr(s,a,t=>this.triggerEvent(new Ne(t)),t=>this.triggerEvent(new Re(t))),this.routerState=In(this.currentUrlTree,this.rootComponentType),this.transitions=new bt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Xt(t=>0!==t.id),Object(Lt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Ut(t=>{let n=!1,r=!1;return Object(mt.a)(t).pipe(Object(ye.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ut(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(mt.a)(t).pipe(Ut(t=>{const n=this.transitions.getValue();return e.next(new Ee(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Pt.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Ut(t=>function(t,e,n,r,i){return new _r(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Lt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(ye.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(re.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new kr(t,e,n,r,i,o).recognize();return null===s?jr(new xr):Object(mt.a)(s)}catch(Pv){return jr(Pv)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Lt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(ye.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Ie(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Ee(n,this.serializeUrl(r),i,o);e.next(a);const u=In(r,this.rootComponentType).snapshot;return Object(mt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Pt.a}),Lr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(ye.a)(t=>{const e=new Ae(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Lt.a)(t=>Object.assign(Object.assign({},t),{guards:Cr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(re.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(mt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(gt.a)(t).pipe(Object(re.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(mt.a)(!0);const s=o.map(o=>{const s=Tr(o,e,i);let a;if(function(t){return t&&Jn(t.canDeactivate)}(s))a=Qe(s.canDeactivate(t,e,n,r));else{if(!Jn(s))throw new Error("Invalid CanDeactivate guard");a=Qe(s(t,e,n,r))}return a.pipe(me())});return Object(mt.a)(s).pipe(nr())}(t.component,t.route,n,e,r)),me(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(re.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(gt.a)(e).pipe(ie(e=>Dt(function(t,e){return null!==t&&e&&e(new De(t)),Object(mt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Me(t)),Object(mt.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Mt(()=>{const i=e.guards.map(i=>{const o=Tr(i,e.node,n);let s;if(function(t){return t&&Jn(t.canActivateChild)}(o))s=Qe(o.canActivateChild(r,t));else{if(!Jn(o))throw new Error("Invalid CanActivateChild guard");s=Qe(o(r,t))}return s.pipe(me())});return Object(mt.a)(i).pipe(nr())}));return Object(mt.a)(i).pipe(nr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(mt.a)(!0);const i=r.map(r=>Mt(()=>{const i=Tr(r,e,n);let o;if(function(t){return t&&Jn(t.canActivate)}(i))o=Qe(i.canActivate(e,t));else{if(!Jn(i))throw new Error("Invalid CanActivate guard");o=Qe(i(e,t))}return o.pipe(me())}));return Object(mt.a)(i).pipe(nr())}(t,e.route,n))),me(t=>!0!==t,!0))}(r,o,t,e):Object(mt.a)(n)),Object(Lt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(ye.a)(t=>{if(tr(t.guardsResult)){const e=Be(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new xe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Xt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Ce(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Lr(t=>{if(t.guards.canActivateChecks.length)return Object(mt.a)(t).pipe(Object(ye.a)(t=>{const e=new je(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Ut(t=>{let n=!1;return Object(mt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(re.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(mt.a)(t);let o=0;return Object(gt.a)(n).pipe(ie(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(mt.a)({});const o={};return Object(gt.a)(i).pipe(Object(re.a)(i=>function(t,e,n,r){const i=Tr(t,e,r);return Qe(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(ye.a)(t=>{o[i]=t}))),oe(1),Object(re.a)(()=>Object.keys(o).length===i.length?Object(mt.a)(o):Pt.a))}(t._resolve,t,e,r).pipe(Object(Lt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),xn(t,n).resolve),null)))}(t.route,e,r,i)),Object(ye.a)(()=>o++),oe(1),Object(re.a)(e=>o===n.length?Object(mt.a)(t):Pt.a))})),Object(ye.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Ce(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(ye.a)(t=>{const e=new ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Lr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Lt.a)(t=>{const e=function(t,e,n){const r=Mn(t,e._root,n?n._root:void 0);return new Tn(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(ye.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Lt.a)(t=>(new Yn(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(ye.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Ce(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new we(i))),te(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=tr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Ce(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Te(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(al){t.reject(al)}}var i;return Pt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ir(t),this.config=t.map(ar),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Un(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Bn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return $e(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Bn(n,e,r)}(n);if(o.toRoot())return Un(e.root,new en([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Hn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Hn(t,t===e.root,0)}const r=Ln(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Hn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Gn(s.segmentGroup,s.index,o.commands):zn(s.segmentGroup,s.index,o.commands);return Un(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=tr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Pv){e=this.malformedUriErrorHandler(Pv,this.urlSerializer,t)}return e}isActive(t,e){if(tr(t))return Ye(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Ye(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Se(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.N),r.Rb(on),r.Rb(Hr),r.Rb(_),r.Rb(r.s),r.Rb(r.x),r.Rb(r.i),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Qr=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Fe,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Yr(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Hr),r.Kb(r.Q),r.Kb(r.j),r.Sb("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Yr{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===An?this.route:t===Hr?this.childContexts:this.parent.get(t,e)}}class Xr{}class Zr{preload(t,e){return Object(mt.a)(null)}}let Jr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new qr(e,n,e=>t.triggerEvent(new Ne(e)),e=>t.triggerEvent(new Re(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Xt(t=>t instanceof Se),ie(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(gt.a)(n).pipe(Object(Rt.a)(),Object(Lt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(mt.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(re.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb($r),r.Rb(r.x),r.Rb(r.i),r.Rb(r.s),r.Rb(Xr))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),ti=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ee?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Se&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Le&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Le(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb($r),r.Rb(V),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const ei=new r.r("ROUTER_CONFIGURATION"),ni=new r.r("ROUTER_FORROOT_GUARD"),ri=[_,{provide:on,useClass:sn},{provide:$r,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new $r(null,t,e,n,r,i,s,Ke(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[on,Hr,_,r.s,r.x,r.i,Ur,ei,[class{},new r.B],[class{},new r.B]]},Hr,{provide:An,useFactory:function(t){return t.routerState.root},deps:[$r]},{provide:r.x,useClass:r.K},Jr,Zr,class{preload(t,e){return e().pipe(te(()=>Object(mt.a)(null)))}},{provide:ei,useValue:{enableTracing:!1}}];function ii(){return new r.z("Router",$r)}let oi=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[ri,ci(e),{provide:ni,useFactory:ui,deps:[[$r,new r.B,new r.J]]},{provide:ei,useValue:n||{}},{provide:m,useFactory:ai,deps:[a,[new r.p(v),new r.B],ei]},{provide:ti,useFactory:si,deps:[$r,V,ei]},{provide:Xr,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Zr},{provide:r.z,multi:!0,useFactory:ii},[li,{provide:r.d,multi:!0,useFactory:hi,deps:[li]},{provide:di,useFactory:fi,deps:[li]},{provide:r.b,multi:!0,useExisting:di}]]}}static forChild(e){return{ngModule:t,providers:[ci(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ni,8),r.Rb($r,8))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})();function si(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ti(t,e,n)}function ai(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function ui(t){return"guarded"}function ci(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Ur,multi:!0,useValue:t}]}let li=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new yt.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get($r),r=this.injector.get(ei);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(mt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(ei),n=this.injector.get(Jr),i=this.injector.get(ti),o=this.injector.get($r),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function hi(t){return t.appInitializer.bind(t)}function fi(t){return t.bootstrapListener.bind(t)}const di=new r.r("Router Initializer");var pi=n("D0XW");function gi(){return t=>t.lift(new mi)}class mi{call(t,e){return e.subscribe(new yi(t))}}class yi extends Ot.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class vi{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new bi(t,this.compare,this.keySelector))}}class bi extends Ot.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var wi=n("pxpQ"),_i=n("spgP"),Oi=n("Jgta"),Ei=n("zIRd"),Si=n("qOnz"),Ci=n("q/0M"),Ti=function(t,e){return(Ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ii(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ai,xi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ji=ji||{},ki=xi||self;function Ni(){}function Ri(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Di(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Pi="closure_uid_"+(1e9*Math.random()>>>0),Mi=0;function Vi(t,e,n){return t.call.apply(t.bind,arguments)}function Li(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Fi(t,e,n){return(Fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vi:Li).apply(null,arguments)}function Ui(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function qi(){return Date.now()}function Bi(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Hi(){this.j=this.j,this.i=this.i}Hi.prototype.j=!1,Hi.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Pi)&&t[Pi]||(t[Pi]=++Mi)}(this)},Hi.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var zi=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Gi=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ki(t){return Array.prototype.concat.apply([],arguments)}function Wi(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function $i(t){return/^[\s\xa0]*$/.test(t)}var Qi,Yi=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Xi(t,e){return-1!=t.indexOf(e)}function Zi(t,e){return t<e?-1:t>e?1:0}t:{var Ji=ki.navigator;if(Ji){var to=Ji.userAgent;if(to){Qi=to;break t}}Qi=""}function eo(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function no(t){var e={};for(var n in t)e[n]=t[n];return e}var ro="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function io(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ro.length;o++)n=ro[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function oo(t){return oo[" "](t),t}oo[" "]=Ni;var so,ao,uo=Xi(Qi,"Opera"),co=Xi(Qi,"Trident")||Xi(Qi,"MSIE"),lo=Xi(Qi,"Edge"),ho=lo||co,fo=Xi(Qi,"Gecko")&&!(Xi(Qi.toLowerCase(),"webkit")&&!Xi(Qi,"Edge"))&&!(Xi(Qi,"Trident")||Xi(Qi,"MSIE"))&&!Xi(Qi,"Edge"),po=Xi(Qi.toLowerCase(),"webkit")&&!Xi(Qi,"Edge");function go(){var t=ki.document;return t?t.documentMode:void 0}t:{var mo="",yo=(ao=Qi,fo?/rv:([^\);]+)(\)|;)/.exec(ao):lo?/Edge\/([\d\.]+)/.exec(ao):co?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ao):po?/WebKit\/(\S+)/.exec(ao):uo?/(?:Version)[ \/]?(\S+)/.exec(ao):void 0);if(yo&&(mo=yo?yo[1]:""),co){var vo=go();if(null!=vo&&vo>parseFloat(mo)){so=String(vo);break t}}so=mo}var bo={};function wo(t){return function(t,e){var n=bo;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Yi(String(so)).split("."),r=Yi(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Zi(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Zi(0==s[2].length,0==a[2].length)||Zi(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var _o=ki.document&&co&&(go()||parseInt(so,10))||void 0,Oo=!co||9<=Number(_o),Eo=co&&!wo("9"),So=function(){if(!ki.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ki.addEventListener("test",Ni,e),ki.removeEventListener("test",Ni,e)}catch(n){}return t}();function Co(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function To(t,e){if(Co.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(fo){t:{try{oo(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Io[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Co.prototype.b=function(){this.defaultPrevented=!0},Bi(To,Co);var Io={2:"touch",3:"pen",4:"mouse"};To.prototype.b=function(){To.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Eo)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Ao="closure_listenable_"+(1e6*Math.random()|0),xo=0;function jo(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++xo,this.Y=this.Z=!1}function ko(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function No(t){this.src=t,this.a={},this.b=0}function Ro(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=zi(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ko(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Do(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}No.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Do(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new jo(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Po="closure_lm_"+(1e6*Math.random()|0),Mo={};function Vo(t,e,n,r,i){if(r&&r.once)return Fo(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Vo(t,e[o],n,r,i);return null}return n=Wo(n),t&&t[Ao]?t.va(e,n,Di(r)?!!r.capture:!!r,i):Lo(t,e,n,!1,r,i)}function Lo(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Di(i)?!!i.capture:!!i;if(s&&!Oo)return null;var a=Go(t);if(a||(t[Po]=a=new No(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=zo,e=Oo?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)So||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Bo(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Fo(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Fo(t,e[o],n,r,i);return null}return n=Wo(n),t&&t[Ao]?t.wa(e,n,Di(r)?!!r.capture:!!r,i):Lo(t,e,n,!0,r,i)}function Uo(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Uo(t,e[o],n,r,i);else r=Di(r)?!!r.capture:!!r,n=Wo(n),t&&t[Ao]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Do(o=t.a[e],n,r,i))&&(ko(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Go(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Do(e,n,r,i)),(n=-1<t?e[t]:null)&&qo(n))}function qo(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Ao])Ro(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Bo(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Go(e))?(Ro(n,t),0==n.b&&(n.src=null,e[Po]=null)):ko(t)}}}function Bo(t){return t in Mo?Mo[t]:Mo[t]="on"+t}function Ho(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&qo(t),n.call(r,e)}function zo(t,e){if(t.Y)return!0;if(!Oo){if(!e)t:{e=["window","event"];for(var n=ki,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ho(t,e=new To(e,this))}return Ho(t,new To(e,this))}function Go(t){return(t=t[Po])instanceof No?t:null}var Ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wo(t){return"function"==typeof t?t:(t[Ko]||(t[Ko]=function(e){return t.handleEvent(e)}),t[Ko])}function $o(){Hi.call(this),this.c=new No(this),this.J=this,this.C=null}function Qo(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Co(e,t);else if(e instanceof Co)e.target=e.target||t;else{var i=e;io(e=new Co(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Yo(s,r,!0,e)&&i}if(i=Yo(s=e.a=t,r,!0,e)&&i,i=Yo(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Yo(s=e.a=n[o],r,!1,e)&&i}function Yo(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Ro(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Bi($o,Hi),$o.prototype[Ao]=!0,(Ai=$o.prototype).addEventListener=function(t,e,n,r){Vo(this,t,e,n,r)},Ai.removeEventListener=function(t,e,n,r){Uo(this,t,e,n,r)},Ai.G=function(){if($o.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ko(n[r]);delete e.a[t],e.b--}}this.C=null},Ai.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Ai.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Xo=ki.JSON.stringify;function Zo(){this.b=this.a=null}var Jo,ts=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ns},function(t){t.reset()});function es(){var t=ss,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ns(){this.next=this.b=this.a=null}function rs(t){ki.setTimeout(function(){throw t},0)}function is(t,e){Jo||function(){var t=ki.Promise.resolve(void 0);Jo=function(){t.then(as)}}(),os||(Jo(),os=!0),ss.add(t,e)}Zo.prototype.add=function(t,e){var n=ts.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ns.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ns.prototype.reset=function(){this.next=this.b=this.a=null};var os=!1,ss=new Zo;function as(){for(var t;t=es();){try{t.a.call(t.b)}catch(n){rs(n)}var e=ts;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}os=!1}function us(t,e){$o.call(this),this.b=t||1,this.a=e||ki,this.f=Fi(this.Za,this),this.g=qi()}function cs(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ls(t,e,n){if("function"==typeof t)n&&(t=Fi(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Fi(t.handleEvent,t)}return 2147483647<Number(e)?-1:ki.setTimeout(t,e||0)}function hs(t){t.a=ls(function(){t.a=null,t.c&&(t.c=!1,hs(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Bi(us,$o),(Ai=us.prototype).aa=!1,Ai.M=null,Ai.Za=function(){if(this.aa){var t=qi()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Qo(this,"tick"),this.aa&&(cs(this),this.start()))}},Ai.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=qi())},Ai.G=function(){us.X.G.call(this),cs(this),delete this.a};var fs=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Ti(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:hs(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(ki.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Hi);function ds(t){Hi.call(this),this.b=t,this.a={}}Bi(ds,Hi);var ps=[];function gs(t,e,n,r){Array.isArray(n)||(n&&(ps[0]=n.toString()),n=ps);for(var i=0;i<n.length;i++){var o=Vo(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ms(t){eo(t.a,function(t,e){this.a.hasOwnProperty(e)&&qo(t)},t),t.a={}}function ys(){this.a=!0}function vs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Xo(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}ds.prototype.G=function(){ds.X.G.call(this),ms(this)},ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ys.prototype.info=function(){};var bs={},ws=null;function _s(){return ws=ws||new $o}function Os(t){Co.call(this,bs.Fa,t)}function Es(t){var e=_s();Qo(e,new Os(e,t))}function Ss(t,e){Co.call(this,bs.STAT_EVENT,t),this.stat=e}function Cs(t){var e=_s();Qo(e,new Ss(e,t))}function Ts(t){Co.call(this,bs.Ga,t)}function Is(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ki.setTimeout(function(){t()},e)}bs.Fa="serverreachability",Bi(Os,Co),bs.STAT_EVENT="statevent",Bi(Ss,Co),bs.Ga="timingevent",Bi(Ts,Co);var As={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},xs={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function js(){}function ks(){}js.prototype.a=null;var Ns,Rs={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ds(){Co.call(this,"d")}function Ps(){Co.call(this,"c")}function Ms(){}function Vs(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ds(this),this.P=Ls,this.R=new us(t=ho?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Bi(Ds,Co),Bi(Ps,Co),Bi(Ms,js),Ns=new Ms;var Ls=45e3,Fs={},Us={};function qs(t,e,n){t.H=1,t.i=ca(ra(e)),t.j=n,t.I=!0,Bs(t,null)}function Bs(t,e){t.u=qi(),Gs(t),t.l=ra(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Oa(n.b,"t",r),t.D=0,t.a=mu(t.g,t.g.C?e:null),0<t.O&&(t.F=new fs(Fi(t.Ca,t,t.a),t.O)),gs(t.J,t.a,"readystatechange",t.Xa),e=t.B?no(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Es(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Hs(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=zs(t,n);if(i==Us){4==e&&(t.h=4,Cs(14),r=!1),vs(t.c,t.f,null,"[Incomplete Response]");break}if(i==Fs){t.h=4,Cs(15),vs(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}vs(t.c,t.f,i,null),Ys(t,i)}4==e&&0==n.length&&(t.h=1,Cs(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),uu(e),e.F=!0,Cs(11))):(vs(t.c,t.f,n,"[Invalid Chunked Response]"),Qs(t),$s(t))}function zs(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Us:(n=Number(e.substring(n,r)),isNaN(n)?Fs:(r+=1)+n>e.length?Us:(e=e.substr(r,n),t.D=r+n,e))}function Gs(t){t.T=qi()+t.P,Ks(t,t.P)}function Ks(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Is(Fi(t.Va,t),e)}function Ws(t){t.o&&(ki.clearTimeout(t.o),t.o=null)}function $s(t){0==t.g.v||t.A||hu(t.g,t)}function Qs(t){Ws(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,cs(t.R),ms(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ys(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||xa(n.b,t)))if(n.I=t.N,!t.C&&xa(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Zy){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;lu(n),Ja(n)}au(n),Cs(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Is(Fi(n.Sa,n),6e3));if(1>=Aa(n.b)&&n.ea){try{n.ea()}catch(Zy){}n.ea=void 0}}else du(n,11)}else if((t.C||n.a==t)&&lu(n),!$i(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Xi(l,"spdy")||Xi(l,"quic")||Xi(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(ja(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,ua(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=qi()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=gu(u,u.C?u.ga:null,u.fa),d.C){ka(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Ws(p),Gs(p)),u.a=d}else su(u);0<n.g.length&&nu(n)}else"stop"!=i[0]&&"close"!=i[0]||du(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?du(n,7):Za(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Es(4)}catch(Zy){}}function Xs(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ri(t)||"string"==typeof t)Gi(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ri(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ri(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Zs(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Zs)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Js(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ta(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)ta(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function ta(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ai=Vs.prototype).setTimeout=function(t){this.P=t},Ai.Xa=function(t){t=t.target;var e=this.F;e&&3==$a(t)?e.f():this.Ca(t)},Ai.Ca=function(t){try{if(t==this.a)t:{var e=$a(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!ho&&!this.a.$())){this.A||4!=e||7==n||Es(8==n||0>=r?3:2),Ws(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$i(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Cs(12),Qs(this),$s(this);break t}vs(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ys(this,u)}this.I?(Hs(this,e,o),ho&&this.b&&3==e&&(gs(this.J,this.R,"tick",this.Wa),this.R.start())):(vs(this.c,this.f,o,null),Ys(this,o)),4==e&&Qs(this),this.b&&!this.A&&(4==e?hu(this.g,this):(this.b=!1,Gs(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Cs(12)):(this.h=0,Cs(13)),Qs(this),$s(this)}}}catch(c){}},Ai.Wa=function(){if(this.a){var t=$a(this.a),e=this.a.$();this.D<e.length&&(Ws(this),Hs(this,t,e),this.b&&4!=t&&Gs(this))}},Ai.cancel=function(){this.A=!0,Qs(this)},Ai.Va=function(){this.o=null;var t=qi();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Es(3),Cs(17)),Qs(this),this.h=2,$s(this)):Ks(this,this.T-t)},(Ai=Zs.prototype).K=function(){Js(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Ai.L=function(){return Js(this),this.a.concat()},Ai.get=function(t,e){return ta(this.b,t)?this.b[t]:e},Ai.set=function(t,e){ta(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Ai.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ea=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function na(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof na){this.a=void 0!==e?e:t.a,ia(this,t.f),this.j=t.j,oa(this,t.c),sa(this,t.h),this.g=t.g,e=t.b;var n=new va;n.c=e.c,e.a&&(n.a=new Zs(e.a),n.b=e.b),aa(this,n),this.i=t.i}else t&&(n=String(t).match(ea))?(this.a=!!e,ia(this,n[1]||"",!0),this.j=la(n[2]||""),oa(this,n[3]||"",!0),sa(this,n[4]),this.g=la(n[5]||"",!0),aa(this,n[6]||"",!0),this.i=la(n[7]||"")):(this.a=!!e,this.b=new va(null,this.a))}function ra(t){return new na(t)}function ia(t,e,n){t.f=n?la(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function oa(t,e,n){t.c=n?la(e,!0):e}function sa(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function aa(t,e,n){e instanceof va?(t.b=e,function(t,e){e&&!t.f&&(ba(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(wa(this,e),Oa(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=ha(e,ma)),t.b=new va(e,t.a))}function ua(t,e,n){t.b.set(e,n)}function ca(t){return ua(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^qi()).toString(36)),t}function la(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ha(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,fa),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fa(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}na.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ha(e,da,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ha(e,da,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ha(n,"/"==n.charAt(0)?ga:pa,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ha(n,ya)),t.join("")};var da=/[#\/\?@]/g,pa=/[#\?:]/g,ga=/[#\?]/g,ma=/[#\?@]/g,ya=/#/g;function va(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ba(t){t.a||(t.a=new Zs,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function wa(t,e){ba(t),e=Ea(t,e),ta(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ta((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Js(t)))}function _a(t,e){return ba(t),e=Ea(t,e),ta(t.a.b,e)}function Oa(t,e,n){wa(t,e),0<n.length&&(t.c=null,t.a.set(Ea(t,e),Wi(n)),t.b+=n.length)}function Ea(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Ai=va.prototype).add=function(t,e){ba(this),this.c=null,t=Ea(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Ai.forEach=function(t,e){ba(this),this.a.forEach(function(n,r){Gi(n,function(n){t.call(e,n,r,this)},this)},this)},Ai.L=function(){ba(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ai.K=function(t){ba(this);var e=[];if("string"==typeof t)_a(this,t)&&(e=Ki(e,this.a.get(Ea(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ki(e,t[n])}return e},Ai.set=function(t,e){return ba(this),this.c=null,_a(this,t=Ea(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Ai.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Ai.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Sa=function(){return function(t,e){this.b=t,this.a=e}}();function Ca(t){this.g=t||Ta,t=ki.PerformanceNavigationTiming?0<(t=ki.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ki.ia&&ki.ia.ya&&ki.ia.ya()&&ki.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ta=10;function Ia(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Aa(t){return t.b?1:t.a?t.a.size:0}function xa(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ja(t,e){t.a?t.a.add(e):t.b=e}function ka(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Na(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ii(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Wi(t.c)}function Ra(){}function Da(){this.a=new Ra}function Pa(t,e,n){var r=n||"";try{Xs(t,function(t,n){var i=t;Di(t)&&(i=Xo(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Pv){throw e.push(r+"type="+encodeURIComponent("_badmap")),Pv}}function Ma(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Ca.prototype.cancel=function(){var t,e;if(this.c=Na(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ii(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ra.prototype.stringify=function(t){return ki.JSON.stringify(t,void 0)},Ra.prototype.parse=function(t){return ki.JSON.parse(t,void 0)};var Va=ki.JSON.parse;function La(t){$o.call(this),this.headers=new Zs,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Fa,this.D=this.F=!1}Bi(La,$o);var Fa="",Ua=/^https?$/i,qa=["POST","PUT"];function Ba(t){return"content-type"==t.toLowerCase()}function Ha(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,za(t),Ka(t)}function za(t){t.u||(t.u=!0,Qo(t,"complete"),Qo(t,"error"))}function Ga(t){if(t.b&&void 0!==ji&&(!t.s[1]||4!=$a(t)||2!=t.W()))if(t.l&&4==$a(t))ls(t.za,0,t);else if(Qo(t,"readystatechange"),4==$a(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(ea)[1]||null;if(!o&&ki.self&&ki.self.location){var s=ki.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ua.test(o?o.toLowerCase():"")}e=i}if(e)Qo(t,"complete"),Qo(t,"success");else{t.h=6;try{var a=2<$a(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",za(t)}}finally{Ka(t)}}}function Ka(t,e){if(t.a){Wa(t);var n=t.a,r=t.s[0]?Ni:null;t.a=null,t.s=null,e||Qo(t,"ready");try{n.onreadystatechange=r}catch(Pv){}}}function Wa(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(ki.clearTimeout(t.m),t.m=null)}function $a(t){return t.a?t.a.readyState:0}function Qa(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return eo(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ua(t,e,n))}function Ya(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Xa(t){this.pa=0,this.g=[],this.c=new ys,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Ya("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Ya("baseRetryDelayMs",5e3,t),this.Ra=Ya("retryDelaySeedMs",1e4,t),this.Ma=Ya("forwardChannelMaxRetries",2,t),this.ma=Ya("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Ca(t&&t.concurrentRequestLimit),this.ka=new Da,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Za(t){if(tu(t),3==t.v){var e=t.R++,n=ra(t.B);ua(n,"SID",t.J),ua(n,"RID",e),ua(n,"TYPE","terminate"),iu(t,n),(e=new Vs(t,t.c,e,void 0)).H=2,e.i=ca(ra(n)),n=!1,ki.navigator&&ki.navigator.sendBeacon&&(n=ki.navigator.sendBeacon(e.i.toString(),"")),!n&&ki.Image&&((new Image).src=e.i,n=!0),n||(e.a=mu(e.g,null),e.a.ba(e.i)),e.u=qi(),Gs(e)}pu(t)}function Ja(t){t.a&&(uu(t),t.a.cancel(),t.a=null)}function tu(t){Ja(t),t.j&&(ki.clearTimeout(t.j),t.j=null),lu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&ki.clearTimeout(t.h),t.h=null)}function eu(t,e){t.g.push(new Sa(t.Oa++,e)),3==t.v&&nu(t)}function nu(t){Ia(t.b)||t.h||(t.h=!0,is(t.Ba,t),t.u=0)}function ru(t,e){var n;n=e?e.f:t.R++;var r=ra(t.B);ua(r,"SID",t.J),ua(r,"RID",n),ua(r,"AID",t.P),iu(t,r),t.i&&t.l&&Qa(r,t.i,t.l),n=new Vs(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ou(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ja(t.b,n),qs(n,r,e)}function iu(t,e){t.f&&Xs({},function(t,n){ua(e,n,t)})}function ou(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Fi(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Pa(l,s,"req"+c+"_")}catch(Wu){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function su(t){t.a||t.j||(t.T=1,is(t.Aa,t),t.o=0)}function au(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Is(Fi(t.Aa,t),fu(t,t.o)),t.o++,0))}function uu(t){null!=t.s&&(ki.clearTimeout(t.s),t.s=null)}function cu(t){t.a=new Vs(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=ra(t.la);ua(e,"RID","rpc"),ua(e,"SID",t.J),ua(e,"CI",t.H?"0":"1"),ua(e,"AID",t.P),iu(t,e),ua(e,"TYPE","xmlhttp"),t.i&&t.l&&Qa(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ca(ra(e)),n.j=null,n.I=!0,Bs(n,t)}function lu(t){null!=t.m&&(ki.clearTimeout(t.m),t.m=null)}function hu(t,e){var n=null;if(t.a==e){lu(t),uu(t),t.a=null;var r=2}else{if(!xa(t.b,e))return;n=e.s,ka(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=qi()-e.u;var i=t.u;Qo(r=_s(),new Ts(r,n,e,i)),nu(t)}else su(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Aa(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Is(Fi(t.Ba,t,e),fu(t,t.u)),t.u++,0)))}(t,e)||2==r&&au(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:du(t,5);break;case 4:du(t,10);break;case 3:du(t,6);break;default:du(t,2)}}function fu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function du(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Fi(t.Ya,t);n||(n=new na("//www.google.com/images/cleardot.gif"),ki.location&&"http"==ki.location.protocol||ia(n,"https"),ca(n)),function(t,e){var n=new ys;if(ki.Image){var r=new Image;r.onload=Ui(Ma,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ui(Ma,n,r,"TestLoadImage: error",!1,e),r.onabort=Ui(Ma,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ui(Ma,n,r,"TestLoadImage: timeout",!1,e),ki.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Cs(2);t.v=0,t.f&&t.f.ra(e),pu(t),tu(t)}function pu(t){t.v=0,t.I=-1,t.f&&(0==Na(t.b).length&&0==t.g.length||(t.b.c.length=0,Wi(t.g),t.g.length=0),t.f.qa())}function gu(t,e,n){var r=function(t){return t instanceof na?ra(t):new na(t,void 0)}(n);if(""!=r.c)e&&oa(r,e+"."+r.c),sa(r,r.h);else{var i=ki.location;r=function(t,e,n,r){var i=new na(null,void 0);return t&&ia(i,t),e&&oa(i,e),n&&sa(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&eo(t.V,function(t,e){ua(r,e,t)}),n=t.na,(e=t.A)&&n&&ua(r,e,n),ua(r,"VER",t.ha),iu(t,r),r}function mu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new La(t.Na)).F=t.C,e}function yu(){}function vu(){if(co&&!(10<=Number(_o)))throw Error("Environmental error: no available transport.")}function bu(t,e){$o.call(this),this.a=new Xa(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!$i(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$i(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Ou(this)}function wu(t){Ds.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function _u(){Ps.call(this),this.status=1}function Ou(t){this.a=t}(Ai=La.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Ns),this.a.onreadystatechange=Fi(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Ha(this,o)}t=n||"";var i=new Zs(this.headers);r&&Xs(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Ba,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=ki.FormData&&t instanceof ki.FormData,!(0<=zi(qa,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Wa(this),0<this.o&&((this.D=function(t){return co&&wo(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Fi(this.xa,this)):this.m=ls(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Ha(this,o)}},Ai.xa=function(){void 0!==ji&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Qo(this,"timeout"),this.abort(8))},Ai.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Qo(this,"complete"),Qo(this,"abort"),Ka(this))},Ai.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ka(this,!0)),La.X.G.call(this)},Ai.za=function(){this.j||(this.A||this.l||this.g?Ga(this):this.Ua())},Ai.Ua=function(){Ga(this)},Ai.W=function(){try{return 2<$a(this)?this.a.status:-1}catch(ao){return-1}},Ai.$=function(){try{return this.a?this.a.responseText:""}catch(ao){return""}},Ai.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Va(e)}},Ai.ua=function(){return this.h},Ai.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Ai=Xa.prototype).ha=8,Ai.v=1,Ai.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Vs(this,this.c,t,void 0),r=this.l;if(this.O&&(r?io(r=no(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ou(this,n,e),ua(i=ra(this.B),"RID",t),ua(i,"CVER",22),this.A&&ua(i,"X-HTTP-Session-Id",this.A),iu(this,i),this.i&&r&&Qa(i,this.i,r),ja(this.b,n),this.Ia&&ua(i,"TYPE","init"),this.da?(ua(i,"$req",e),ua(i,"SID","null"),n.U=!0,qs(n,i,null)):qs(n,i,e),this.v=2}}else 3==this.v&&(t?ru(this,t):0==this.g.length||Ia(this.b)||ru(this))},Ai.Aa=function(){if(this.j=null,cu(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Is(Fi(this.Ta,this),t)}},Ai.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Cs(10),Ja(this),cu(this))},Ai.Sa=function(){null!=this.m&&(this.m=null,Ja(this),au(this),Cs(19))},Ai.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Cs(2)):(this.c.info("Failed to ping google.com"),Cs(1))},(Ai=yu.prototype).ta=function(){},Ai.sa=function(){},Ai.ra=function(){},Ai.qa=function(){},Ai.Ja=function(){},vu.prototype.a=function(t,e){return new bu(t,e)},Bi(bu,$o),bu.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Cs(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=gu(t,null,t.fa),nu(t)},bu.prototype.close=function(){Za(this.a)},bu.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,eu(this.a,e)}else this.l?((e={}).__data__=Xo(t),eu(this.a,e)):eu(this.a,t)},bu.prototype.G=function(){this.a.f=null,delete this.f,Za(this.a),delete this.a,bu.X.G.call(this)},Bi(wu,Ds),Bi(_u,Ps),Bi(Ou,yu),Ou.prototype.ta=function(){Qo(this.a,"a")},Ou.prototype.sa=function(t){Qo(this.a,new wu(t))},Ou.prototype.ra=function(t){Qo(this.a,new _u(t))},Ou.prototype.qa=function(){Qo(this.a,"b")},vu.prototype.createWebChannel=vu.prototype.a,bu.prototype.send=bu.prototype.h,bu.prototype.open=bu.prototype.g,bu.prototype.close=bu.prototype.close,As.NO_ERROR=0,As.TIMEOUT=8,As.HTTP_ERROR=6,xs.COMPLETE="complete",ks.EventType=Rs,Rs.OPEN="a",Rs.CLOSE="b",Rs.ERROR="c",Rs.MESSAGE="d",$o.prototype.listen=$o.prototype.va,La.prototype.listenOnce=La.prototype.wa,La.prototype.getLastError=La.prototype.Qa,La.prototype.getLastErrorCode=La.prototype.ua,La.prototype.getStatus=La.prototype.W,La.prototype.getResponseJson=La.prototype.Pa,La.prototype.getResponseText=La.prototype.$,La.prototype.send=La.prototype.ba;var Eu=As,Su=xs,Cu=bs,Tu=ks,Iu=La,Au=n("mrSG"),xu=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();xu.o=-1;var ju={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ku=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Au.c)(e,t),e}(Error),Nu=new Ci.b("@firebase/firestore");function Ru(){return Nu.logLevel}function Du(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Nu.logLevel<=Ci.a.DEBUG){var r=e.map(Vu);Nu.debug.apply(Nu,Object(Au.f)(["Firestore (8.5.0): "+t],r))}}function Pu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Nu.logLevel<=Ci.a.ERROR){var r=e.map(Vu);Nu.error.apply(Nu,Object(Au.f)(["Firestore (8.5.0): "+t],r))}}function Mu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Nu.logLevel<=Ci.a.WARN){var r=e.map(Vu);Nu.warn.apply(Nu,Object(Au.f)(["Firestore (8.5.0): "+t],r))}}function Vu(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Pv){return t}}function Lu(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw Pu(e),new Error(e)}function Fu(t,e){t||Lu()}function Uu(t,e){return t}function qu(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Bu=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=qu(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Hu(t,e){return t<e?-1:t>e?1:0}function zu(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Gu(t){return t+"\0"}var Ku=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ku(ju.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ku(ju.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ku(ju.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ku(ju.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Hu(this.nanoseconds,t.nanoseconds):Hu(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Wu=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Ku(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function $u(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qu(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Yu(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Xu=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Lu(),void 0===n?n=t.length-e:n>t.length-e&&Lu(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Zu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Au.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new ku(ju.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Xu),Ju=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Au.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Ju.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ku(ju.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ku(ju.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ku(ju.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ku(ju.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Xu),ec=function(){function t(t){this.fields=t,t.sort(tc.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return zu(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),nc=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Hu(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();nc.EMPTY_BYTE_STRING=new nc("");var rc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ic(t){if(Fu(!!t),"string"==typeof t){var e=0,n=rc.exec(t);if(Fu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:oc(t.seconds),nanos:oc(t.nanos)}}function oc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function sc(t){return"string"==typeof t?nc.fromBase64String(t):nc.fromUint8Array(t)}function ac(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function uc(t){var e=t.mapValue.fields.__previous_value__;return ac(e)?uc(e):e}function cc(t){var e=ic(t.mapValue.fields.__local_write_time__.timestampValue);return new Ku(e.seconds,e.nanos)}function lc(t){return null==t}function hc(t){return 0===t&&1/t==-1/0}function fc(t){return"number"==typeof t&&Number.isInteger(t)&&!hc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var dc=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Zu.fromString(e))},t.fromName=function(e){return new t(Zu.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Zu.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Zu.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Zu(e.slice()))},t}();function pc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ac(t)?4:10:Lu()}function gc(t,e){var n=pc(t);if(n!==pc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return cc(t).isEqual(cc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ic(t.timestampValue),r=ic(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return sc(t.bytesValue).isEqual(sc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return oc(t.geoPointValue.latitude)===oc(e.geoPointValue.latitude)&&oc(t.geoPointValue.longitude)===oc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return oc(t.integerValue)===oc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=oc(t.doubleValue),r=oc(e.doubleValue);return n===r?hc(n)===hc(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return zu(t.arrayValue.values||[],e.arrayValue.values||[],gc);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if($u(n)!==$u(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gc(n[i],r[i])))return!1;return!0}(t,e);default:return Lu()}}function mc(t,e){return void 0!==(t.values||[]).find(function(t){return gc(t,e)})}function yc(t,e){var n=pc(t),r=pc(e);if(n!==r)return Hu(n,r);switch(n){case 0:return 0;case 1:return Hu(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=oc(t.integerValue||t.doubleValue),r=oc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return vc(t.timestampValue,e.timestampValue);case 4:return vc(cc(t),cc(e));case 5:return Hu(t.stringValue,e.stringValue);case 6:return function(t,e){var n=sc(t),r=sc(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Hu(n[i],r[i]);if(0!==o)return o}return Hu(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Hu(oc(t.latitude),oc(e.latitude));return 0!==n?n:Hu(oc(t.longitude),oc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=yc(n[i],r[i]);if(o)return o}return Hu(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Hu(r[s],o[s]);if(0!==a)return a;var u=yc(n[r[s]],i[o[s]]);if(0!==u)return u}return Hu(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Lu()}}function vc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Hu(t,e);var n=ic(t),r=ic(e),i=Hu(n.seconds,r.seconds);return 0!==i?i:Hu(n.nanos,r.nanos)}function bc(t){return wc(t)}function wc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ic(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?sc(t.bytesValue).toBase64():"referenceValue"in t?dc.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=wc(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+wc(t.fields[o])}return e+"}"}(t.mapValue):Lu();var e}function _c(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Oc(t){return!!t&&"integerValue"in t}function Ec(t){return!!t&&"arrayValue"in t}function Sc(t){return!!t&&"nullValue"in t}function Cc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tc(t){return!!t&&"mapValue"in t}var Ic=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(tc.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return gc(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===pc(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Tc(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(tc.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Tc(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Ac(t){var e=[];return Qu(t.fields||{},function(t,n){var r=new tc([t]);if(Tc(n)){var i=Ac(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new ec(e)}var xc=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Wu.min(),Ic.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ic.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ic.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ic.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ic.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),jc=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function kc(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new jc(t,e,n,r,i,o,s)}function Nc(t){var e=Uu(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+bc(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),lc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Gc(e.startAt)),e.endAt&&(n+="|ub:",n+=Gc(e.endAt)),e.h=n}return e.h}function Rc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Wc(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!gc(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qc(t.startAt,e.startAt)&&Qc(t.endAt,e.endAt)}function Dc(t){return dc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Pc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Au.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Mc(t,n,r):"array-contains"===n?new Uc(t,r):"in"===n?new qc(t,r):"not-in"===n?new Bc(t,r):"array-contains-any"===n?new Hc(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Vc(t,n):new Lc(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(yc(e,this.value)):null!==e&&pc(this.value)===pc(e)&&this.m(yc(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Lu()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Mc=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=dc.fromName(r.referenceValue),i}return Object(Au.c)(e,t),e.prototype.matches=function(t){var e=dc.comparator(t.key,this.key);return this.m(e)},e}(Pc),Vc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Fc(0,n),r}return Object(Au.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Pc),Lc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Fc(0,n),r}return Object(Au.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Pc);function Fc(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return dc.fromName(t.referenceValue)})}var Uc=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Au.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Ec(e)&&mc(e.arrayValue,this.value)},e}(Pc),qc=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Au.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&mc(this.value.arrayValue,e)},e}(Pc),Bc=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Au.c)(e,t),e.prototype.matches=function(t){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!mc(this.value.arrayValue,e)},e}(Pc),Hc=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Au.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Ec(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return mc(e.value.arrayValue,t)})},e}(Pc),zc=function(t,e){this.position=t,this.before=e};function Gc(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return bc(t)}).join(",")}var Kc=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Wc(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function $c(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?dc.comparator(dc.fromName(s.referenceValue),n.key):yc(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Qc(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!gc(t.position[n],e.position[n]))return!1;return!0}var Yc=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Xc(t,e,n,r,i,o,s,a){return new Yc(t,e,n,r,i,o,s,a)}function Zc(t){return new Yc(t)}function Jc(t){return!lc(t.limit)&&"F"===t.limitType}function tl(t){return!lc(t.limit)&&"L"===t.limitType}function el(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function nl(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function rl(t){return null!==t.collectionGroup}function il(t){var e=Uu(t);if(null===e.p){e.p=[];var n=nl(e),r=el(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Kc(n)),e.p.push(new Kc(tc.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Kc(tc.keyField(),u))}}}return e.p}function ol(t){var e=Uu(t);if(!e.T)if("F"===e.limitType)e.T=kc(e.path,e.collectionGroup,il(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=il(e);r<i.length;r++){var o=i[r];n.push(new Kc(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new zc(e.endAt.position,!e.endAt.before):null,a=e.startAt?new zc(e.startAt.position,!e.startAt.before):null;e.T=kc(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function sl(t,e,n){return new Yc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function al(t,e){return Rc(ol(t),ol(e))&&t.limitType===e.limitType}function ul(t){return Nc(ol(t))+"|lt:"+t.limitType}function cl(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+bc(e.value);var e}).join(", ")+"]"),lc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Gc(t.startAt)),t.endAt&&(e+=", endAt: "+Gc(t.endAt)),"Target("+e+")"}(ol(t))+"; limitType="+t.limitType+")"}function ll(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):dc.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!$c(t.startAt,il(t),e)||t.endAt&&$c(t.endAt,il(t),e))}(t,e)}function hl(t){return function(e,n){for(var r=!1,i=0,o=il(t);i<o.length;i++){var s=o[i],a=fl(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function fl(t,e,n){var r=t.field.isKeyField()?dc.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?yc(r,i):Lu()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Lu()}}function dl(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function pl(t){return{integerValue:""+t}}function gl(t,e){return fc(e)?pl(e):dl(t,e)}var ml=function(){this._=void 0};function yl(t,e,n){return t instanceof wl?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof _l?Ol(t,e):t instanceof El?Sl(t,e):function(t,e){var n=bl(t,e),r=Tl(n)+Tl(t.A);return Oc(n)&&Oc(t.A)?pl(r):dl(t.R,r)}(t,e)}function vl(t,e,n){return t instanceof _l?Ol(t,e):t instanceof El?Sl(t,e):n}function bl(t,e){return t instanceof Cl?Oc(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var wl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Au.c)(e,t),e}(ml),_l=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Au.c)(e,t),e}(ml);function Ol(t,e){for(var n=Il(e),r=function(t){n.some(function(e){return gc(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var El=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Au.c)(e,t),e}(ml);function Sl(t,e){for(var n=Il(e),r=function(t){n=n.filter(function(e){return!gc(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Cl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Au.c)(e,t),e}(ml);function Tl(t){return oc(t.integerValue||t.doubleValue)}function Il(t){return Ec(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Al=function(t,e){this.field=t,this.transform=e},xl=function(t,e){this.version=t,this.transformResults=e},jl=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function kl(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Nl=function(){};function Rl(t,e,n){t instanceof Ll?function(t,e,n){var r=t.value.clone(),i=ql(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Fl?function(t,e,n){if(kl(t.precondition,e)){var r=ql(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ul(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Dl(t,e,n){t instanceof Ll?function(t,e,n){if(kl(t.precondition,e)){var r=t.value.clone(),i=Bl(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Vl(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Fl?function(t,e,n){if(kl(t.precondition,e)){var r=Bl(t.fieldTransforms,n,e),i=e.data;i.setAll(Ul(t)),i.setAll(r),e.convertToFoundDocument(Vl(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){kl(t.precondition,e)&&e.convertToNoDocument(Wu.min())}(t,e)}function Pl(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=bl(o.transform,s||null);null!=a&&(null==n&&(n=Ic.empty()),n.set(o.field,a))}return n||null}function Ml(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&zu(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof _l&&e instanceof _l||t instanceof El&&e instanceof El?zu(t.elements,e.elements,gc):t instanceof Cl&&e instanceof Cl?gc(t.A,e.A):t instanceof wl&&e instanceof wl}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Vl(t){return t.isFoundDocument()?t.version:Wu.min()}var Ll=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Au.c)(e,t),e}(Nl),Fl=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Au.c)(e,t),e}(Nl);function Ul(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function ql(t,e,n){var r=new Map;Fu(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,vl(s,a,n[i]))}return r}function Bl(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,yl(a,u,e))}return r}var Hl,zl,Gl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Au.c)(e,t),e}(Nl),Kl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Au.c)(e,t),e}(Nl),Wl=function(t){this.count=t};function $l(t){switch(t){case ju.OK:return Lu();case ju.CANCELLED:case ju.UNKNOWN:case ju.DEADLINE_EXCEEDED:case ju.RESOURCE_EXHAUSTED:case ju.INTERNAL:case ju.UNAVAILABLE:case ju.UNAUTHENTICATED:return!1;case ju.INVALID_ARGUMENT:case ju.NOT_FOUND:case ju.ALREADY_EXISTS:case ju.PERMISSION_DENIED:case ju.FAILED_PRECONDITION:case ju.ABORTED:case ju.OUT_OF_RANGE:case ju.UNIMPLEMENTED:case ju.DATA_LOSS:return!0;default:return Lu()}}function Ql(t){if(void 0===t)return Pu("GRPC error has no .code"),ju.UNKNOWN;switch(t){case Hl.OK:return ju.OK;case Hl.CANCELLED:return ju.CANCELLED;case Hl.UNKNOWN:return ju.UNKNOWN;case Hl.DEADLINE_EXCEEDED:return ju.DEADLINE_EXCEEDED;case Hl.RESOURCE_EXHAUSTED:return ju.RESOURCE_EXHAUSTED;case Hl.INTERNAL:return ju.INTERNAL;case Hl.UNAVAILABLE:return ju.UNAVAILABLE;case Hl.UNAUTHENTICATED:return ju.UNAUTHENTICATED;case Hl.INVALID_ARGUMENT:return ju.INVALID_ARGUMENT;case Hl.NOT_FOUND:return ju.NOT_FOUND;case Hl.ALREADY_EXISTS:return ju.ALREADY_EXISTS;case Hl.PERMISSION_DENIED:return ju.PERMISSION_DENIED;case Hl.FAILED_PRECONDITION:return ju.FAILED_PRECONDITION;case Hl.ABORTED:return ju.ABORTED;case Hl.OUT_OF_RANGE:return ju.OUT_OF_RANGE;case Hl.UNIMPLEMENTED:return ju.UNIMPLEMENTED;case Hl.DATA_LOSS:return ju.DATA_LOSS;default:return Lu()}}(zl=Hl||(Hl={}))[zl.OK=0]="OK",zl[zl.CANCELLED=1]="CANCELLED",zl[zl.UNKNOWN=2]="UNKNOWN",zl[zl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zl[zl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zl[zl.NOT_FOUND=5]="NOT_FOUND",zl[zl.ALREADY_EXISTS=6]="ALREADY_EXISTS",zl[zl.PERMISSION_DENIED=7]="PERMISSION_DENIED",zl[zl.UNAUTHENTICATED=16]="UNAUTHENTICATED",zl[zl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zl[zl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zl[zl.ABORTED=10]="ABORTED",zl[zl.OUT_OF_RANGE=11]="OUT_OF_RANGE",zl[zl.UNIMPLEMENTED=12]="UNIMPLEMENTED",zl[zl.INTERNAL=13]="INTERNAL",zl[zl.UNAVAILABLE=14]="UNAVAILABLE",zl[zl.DATA_LOSS=15]="DATA_LOSS";var Yl=function(){function t(t,e){this.comparator=t,this.root=e||Zl.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zl.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zl.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Xl(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Xl(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Xl(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Xl(this.root,t,this.comparator,!0)},t}(),Xl=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Zl=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Lu();if(this.right.isRed())throw Lu();var t=this.left.check();if(t!==this.right.check())throw Lu();return t+(this.isRed()?0:1)},t}();Zl.EMPTY=null,Zl.RED=!0,Zl.BLACK=!1,Zl.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Lu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Lu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Lu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Lu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Lu()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Zl(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Jl=function(){function t(t){this.comparator=t,this.data=new Yl(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new th(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new th(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),th=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),eh=new Yl(dc.comparator);function nh(){return eh}var rh=new Yl(dc.comparator);function ih(){return rh}var oh=new Yl(dc.comparator);function sh(){return oh}var ah=new Jl(dc.comparator);function uh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ah,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ch=new Jl(Hu);function lh(){return ch}var hh=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,fh.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Wu.min(),r,lh(),nh(),uh())},t}(),fh=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(nc.EMPTY_BYTE_STRING,n,uh(),uh(),uh())},t}(),dh=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ph=function(t,e){this.targetId=t,this.V=e},gh=function(t,e,n,r){void 0===n&&(n=nc.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},mh=function(){function t(){this.S=0,this.D=bh(),this.C=nc.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=uh(),e=uh(),n=uh();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Lu()}}),new fh(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=bh()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),yh=function(){function t(t){this.W=t,this.G=new Map,this.H=nh(),this.J=vh(),this.Y=new Jl(Hu)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Lu()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Dc(i))if(0===n){var o=new dc(i.path);this.tt(e,o,xc.newNoDocument(o,Wu.min()))}else Fu(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Dc(o.target)){var s=new dc(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,xc.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=uh();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new hh(t,n,this.Y,this.H,r);return this.H=nh(),this.J=vh(),this.Y=new Jl(Hu),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new mh,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Jl(Hu),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Du("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new mh),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function vh(){return new Yl(dc.comparator)}function bh(){return new Yl(dc.comparator)}var wh={asc:"ASCENDING",desc:"DESCENDING"},_h={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oh=function(t,e){this.databaseId=t,this.I=e};function Eh(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sh(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ch(t,e){return Eh(t,e.toTimestamp())}function Th(t){return Fu(!!t),Wu.fromTimestamp(function(t){var e=ic(t);return new Ku(e.seconds,e.nanos)}(t))}function Ih(t,e){return function(t){return new Zu(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ah(t){var e=Zu.fromString(t);return Fu(Zh(e)),e}function xh(t,e){return Ih(t.databaseId,e.path)}function jh(t,e){var n=Ah(e);if(n.get(1)!==t.databaseId.projectId)throw new ku(ju.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ku(ju.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new dc(Dh(n))}function kh(t,e){return Ih(t.databaseId,e)}function Nh(t){var e=Ah(t);return 4===e.length?Zu.emptyPath():Dh(e)}function Rh(t){return new Zu(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Dh(t){return Fu(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ph(t,e,n){return{name:xh(t,e),fields:n.toProto().mapValue.fields}}function Mh(t,e,n){var r=jh(t,e.name),i=Th(e.updateTime),o=new Ic({mapValue:{fields:e.fields}}),s=xc.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Vh(t,e){var n;if(e instanceof Ll)n={update:Ph(t,e.key,e.value)};else if(e instanceof Gl)n={delete:xh(t,e.key)};else if(e instanceof Fl)n={update:Ph(t,e.key,e.data),updateMask:Xh(e.fieldMask)};else{if(!(e instanceof Kl))return Lu();n={verify:xh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof wl)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _l)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof El)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Cl)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Lu()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ch(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Lu()}(t,e.precondition)),n}function Lh(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?jl.updateTime(Th(t.updateTime)):void 0!==t.exists?jl.exists(t.exists):jl.none()}(e.currentDocument):jl.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Fu("REQUEST_TIME"===e.setToServerValue),n=new wl):"appendMissingElements"in e?n=new _l(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new El(e.removeAllFromArray.values||[]):"increment"in e?n=new Cl(t,e.increment):Lu();var r=tc.fromServerFormat(e.fieldPath);return new Al(r,n)}(t,e)}):[];if(e.update){var i=jh(t,e.update.name),o=new Ic({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new ec((t.fieldPaths||[]).map(function(t){return tc.fromServerFormat(t)}))}(e.updateMask);return new Fl(i,o,s,n,r)}return new Ll(i,o,n,r)}if(e.delete){var a=jh(t,e.delete);return new Gl(a,n)}if(e.verify){var u=jh(t,e.verify);return new Kl(u,n)}return Lu()}function Fh(t,e){return{documents:[kh(t,e.path)]}}function Uh(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=kh(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=kh(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Cc(t.value))return{unaryFilter:{field:Wh(t.field),op:"IS_NAN"}};if(Sc(t.value))return{unaryFilter:{field:Wh(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Cc(t.value))return{unaryFilter:{field:Wh(t.field),op:"IS_NOT_NAN"}};if(Sc(t.value))return{unaryFilter:{field:Wh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wh(t.field),op:Kh(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Wh(t.field),direction:Gh(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||lc(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Hh(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Hh(e.endAt)),n}function qh(t){var e=Nh(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Fu(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Bh(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Kc($h(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return lc(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=zh(n.startAt));var l=null;return n.endAt&&(l=zh(n.endAt)),Xc(e,i,a,s,u,"F",c,l)}function Bh(t){return t?void 0!==t.unaryFilter?[Yh(t)]:void 0!==t.fieldFilter?[Qh(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Bh(t)}).reduce(function(t,e){return t.concat(e)}):Lu():[]}function Hh(t){return{before:t.before,values:t.position}}function zh(t){return new zc(t.values||[],!!t.before)}function Gh(t){return wh[t]}function Kh(t){return _h[t]}function Wh(t){return{fieldPath:t.canonicalString()}}function $h(t){return tc.fromServerFormat(t.fieldPath)}function Qh(t){return Pc.create($h(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Lu()}}(t.fieldFilter.op),t.fieldFilter.value)}function Yh(t){switch(t.unaryFilter.op){case"IS_NAN":var e=$h(t.unaryFilter.field);return Pc.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=$h(t.unaryFilter.field);return Pc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=$h(t.unaryFilter.field);return Pc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=$h(t.unaryFilter.field);return Pc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Lu()}}function Xh(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Zh(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Jh(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ef(e)),e=tf(t.get(n),e);return ef(e)}function tf(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function ef(t){return t+"\x01\x01"}function nf(t){var e=t.length;if(Fu(e>=2),2===e)return Fu("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Zu.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Lu(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Lu()}o=s+2}return new Zu(r)}var rf=function(t,e){this.seconds=t,this.nanoseconds=e},of=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};of.store="owner",of.key="owner";var sf=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};sf.store="mutationQueues",sf.keyPath="userId";var af=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};af.store="mutations",af.keyPath="batchId",af.userMutationsIndex="userMutationsIndex",af.userMutationsKeyPath=["userId","batchId"];var uf=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Jh(e)]},t.key=function(t,e,n){return[t,Jh(e),n]},t}();uf.store="documentMutations",uf.PLACEHOLDER=new uf;var cf=function(t,e){this.path=t,this.readTime=e},lf=function(t,e){this.path=t,this.version=e},hf=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};hf.store="remoteDocuments",hf.readTimeIndex="readTimeIndex",hf.readTimeIndexPath="readTime",hf.collectionReadTimeIndex="collectionReadTimeIndex",hf.collectionReadTimeIndexPath=["parentPath","readTime"];var ff=function(t){this.byteSize=t};ff.store="remoteDocumentGlobal",ff.key="remoteDocumentGlobalKey";var df=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};df.store="targets",df.keyPath="targetId",df.queryTargetsIndexName="queryTargetsIndex",df.queryTargetsKeyPath=["canonicalId","targetId"];var pf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};pf.store="targetDocuments",pf.keyPath=["targetId","path"],pf.documentTargetsIndex="documentTargetsIndex",pf.documentTargetsKeyPath=["path","targetId"];var gf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};gf.key="targetGlobalKey",gf.store="targetGlobal";var mf=function(t,e){this.collectionId=t,this.parent=e};mf.store="collectionParents",mf.keyPath=["collectionId","parent"];var yf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};yf.store="clientMetadata",yf.keyPath="clientId";var vf=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};vf.store="bundles",vf.keyPath="bundleId";var bf=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};bf.store="namedQueries",bf.keyPath="name";var wf=Object(Au.f)(Object(Au.f)([],Object(Au.f)(Object(Au.f)([],Object(Au.f)(Object(Au.f)([],Object(Au.f)(Object(Au.f)([],[sf.store,af.store,uf.store,hf.store,df.store,of.store,gf.store,pf.store]),[yf.store])),[ff.store])),[mf.store])),[vf.store,bf.store]),_f="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Of=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Ef=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Sf=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Lu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Cf=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Ef,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Af(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Rf(e.target.error);n.ft.reject(new Af(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Af(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Du("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new jf(e)},t}(),Tf=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Si.i)())&&Pu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Du("SimpleDb","Removing database:",t),kf(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Si.i)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Au.b)(this,void 0,void 0,function(){var e,n=this;return Object(Au.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Du("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Af(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new ku(ju.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Af(t,n))},i.onupgradeneeded=function(t){Du("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Du("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Au.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Au.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Au.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Cf.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Sf.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Du("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),If=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return kf(this.Pt.delete())},t}(),Af=function(t){function e(e,n){var r=this;return(r=t.call(this,ju.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Au.c)(e,t),e}(ku);function xf(t){return"IndexedDbTransactionError"===t.name}var jf=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Du("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Du("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),kf(n)},t.prototype.add=function(t){return Du("SimpleDb","ADD",this.store.name,t,t),kf(this.store.add(t))},t.prototype.get=function(t){var e=this;return kf(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Du("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Du("SimpleDb","DELETE",this.store.name,t),kf(this.store.delete(t))},t.prototype.count=function(){return Du("SimpleDb","COUNT",this.store.name),kf(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Du("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Sf(function(n,r){e.onerror=function(t){var e=Rf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Sf(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new If(i),s=e(i.primaryKey,i.value,o);if(s instanceof Sf){var a=s.catch(function(t){return o.done(),Sf.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Sf.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function kf(t){return new Sf(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Rf(t.target.error);n(e)}})}var Nf=!1;function Rf(t){var e=Tf._t(Object(Si.i)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ku("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Nf||(Nf=!0,setTimeout(function(){throw r},0)),r}}return t}var Df=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Au.c)(e,t),e}(Of);function Pf(t,e){var n=Uu(t);return Tf.It(n.Mt,e)}var Mf=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Rl(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Dl(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Dl(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Wu.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},uh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&zu(this.mutations,t.mutations,function(t,e){return Ml(t,e)})&&zu(this.baseMutations,t.baseMutations,function(t,e){return Ml(t,e)})},t}(),Vf=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Fu(e.mutations.length===r.length);for(var i=sh(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Lf=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Wu.min()),void 0===o&&(o=Wu.min()),void 0===s&&(s=nc.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Ff=function(t){this.Lt=t};function Uf(t,e){if(e.document)return Mh(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=dc.fromSegments(e.noDocument.path),r=Gf(e.noDocument.readTime),i=xc.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=dc.fromSegments(e.unknownDocument.path);return r=Gf(e.unknownDocument.version),xc.newUnknownDocument(o,r)}return Lu()}function qf(t,e,n){var r=Bf(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:xh(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Eh(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new hf(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=zf(e.version);return s=e.hasCommittedMutations,new hf(null,new cf(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=zf(e.version);return new hf(new lf(c,l),null,null,!0,r,i)}return Lu()}function Bf(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Hf(t){var e=new Ku(t[0],t[1]);return Wu.fromTimestamp(e)}function zf(t){var e=t.toTimestamp();return new rf(e.seconds,e.nanoseconds)}function Gf(t){var e=new Ku(t.seconds,t.nanoseconds);return Wu.fromTimestamp(e)}function Kf(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Lh(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Lh(t.Lt,e)}),o=Ku.fromMillis(e.localWriteTimeMs);return new Mf(e.batchId,o,n,i)}function Wf(t){var e,n,r=Gf(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Gf(t.lastLimboFreeSnapshotVersion):Wu.min();return void 0!==t.query.documents?(Fu(1===(n=t.query).documents.length),e=ol(Zc(Nh(n.documents[0])))):e=function(t){return ol(qh(t))}(t.query),new Lf(e,t.targetId,0,t.lastListenSequenceNumber,r,i,nc.fromBase64String(t.resumeToken))}function $f(t,e){var n,r=zf(e.snapshotVersion),i=zf(e.lastLimboFreeSnapshotVersion);n=Dc(e.target)?Fh(t.Lt,e.target):Uh(t.Lt,e.target);var o=e.resumeToken.toBase64();return new df(e.targetId,Nc(e.target),r,o,e.sequenceNumber,i,n)}function Qf(t){var e=qh({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?sl(e,e.limit,"L"):e}var Yf=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Xf(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Gf(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Xf(t).put({bundleId:(n=e).id,createTime:zf(Th(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Zf(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Qf(e.bundledQuery),readTime:Gf(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Zf(t).put(function(t){return{name:t.name,readTime:zf(Th(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Xf(t){return Pf(t,vf.store)}function Zf(t){return Pf(t,bf.store)}var Jf=function(){function t(){this.Bt=new td}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Sf.resolve()},t.prototype.getCollectionParents=function(t,e){return Sf.resolve(this.Bt.getEntries(e))},t}(),td=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Jl(Zu.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Jl(Zu.comparator)).toArray()},t}(),ed=function(){function t(){this.qt=new td}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Jh(i)};return nd(t).put(o)}return Sf.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Gu(e),""],!1,!0);return nd(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(nf(o.parent))}return n})},t}();function nd(t){return Pf(t,mf.store)}var rd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},id=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function od(t,e,n){var r=t.store(af.store),i=t.store(uf.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Fu(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=uf.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Sf.waitFor(o).next(function(){return c})}function sd(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Lu();e=t.noDocument}return JSON.stringify(e).length}id.DEFAULT_COLLECTION_PERCENTILE=10,id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,id.DEFAULT=new id(41943040,id.DEFAULT_COLLECTION_PERCENTILE,id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),id.DISABLED=new id(-1,0,0);var ad=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Fu(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cd(t).Ot({index:af.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=ld(t),s=cd(t);return s.add({}).next(function(a){Fu("number"==typeof a);for(var u=new Mf(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Vh(t.Lt,e)}),i=n.mutations.map(function(e){return Vh(t.Lt,e)});return new af(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Jl(function(t,e){return Hu(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=uf.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,uf.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Sf.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return cd(t).get(e).next(function(t){return t?(Fu(t.userId===n.userId),Kf(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Sf.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return cd(t).Ot({index:af.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Fu(e.batchId>=r),o=Kf(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return cd(t).Ot({index:af.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cd(t).Nt(af.userMutationsIndex,n).next(function(t){return t.map(function(t){return Kf(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=uf.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ld(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=nf(r[1]);if(a===n.userId&&e.path.isEqual(c))return cd(t).get(u).next(function(t){if(!t)throw Lu();Fu(t.userId===n.userId),o.push(Kf(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Jl(Hu),i=[];return e.forEach(function(e){var o=uf.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=ld(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=nf(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Sf.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=uf.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Jl(Hu);return ld(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=nf(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(cd(t).get(e).next(function(t){if(null===t)throw Lu();Fu(t.userId===n.userId),r.push(Kf(n.R,t))}))}),Sf.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return od(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Sf.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Sf.resolve();var r=IDBKeyRange.lowerBound(uf.prefixForUser(e.userId)),i=[];return ld(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=nf(t[1]);i.push(o)}else r.done()}).next(function(){Fu(0===i.length)})})},t.prototype.containsKey=function(t,e){return ud(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return hd(t).get(this.userId).next(function(t){return t||new sf(e.userId,-1,"")})},t}();function ud(t,e,n){var r=uf.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ld(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function cd(t){return Pf(t,af.store)}function ld(t){return Pf(t,uf.store)}function hd(t){return Pf(t,sf.store)}var fd=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),dd=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new fd(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Wu.fromTimestamp(new Ku(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return pd(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Fu(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return pd(t).Ot(function(s,a){var u=Wf(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Sf.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return pd(t).Ot(function(t,n){var r=Wf(n);e(r)})},t.prototype.Xt=function(t){return gd(t).get(gf.key).next(function(t){return Fu(null!==t),t})},t.prototype.Zt=function(t,e){return gd(t).put(gf.key,e)},t.prototype.te=function(t,e){return pd(t).put($f(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Nc(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return pd(t).Ot({range:r,index:df.queryTargetsIndexName},function(t,n,r){var o=Wf(n);Rc(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=md(t);return e.forEach(function(e){var s=Jh(e.path);i.push(o.put(new pf(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Sf.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=md(t);return Sf.forEach(e,function(e){var o=Jh(e.path);return Sf.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=md(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=md(t),i=uh();return r.Ot({range:n,kt:!0},function(t,e,n){var r=nf(t[1]),o=new dc(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Jh(e.path),r=IDBKeyRange.bound([n],[Gu(n)],!1,!0),i=0;return md(t).Ot({index:pf.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return pd(t).get(e).next(function(t){return t?Wf(t):null})},t}();function pd(t){return Pf(t,df.store)}function gd(t){return Pf(t,gf.store)}function md(t){return Pf(t,pf.store)}function yd(t){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(e){if(t.code!==ju.FAILED_PRECONDITION||t.message!==_f)throw t;return Du("LocalStore","Unexpectedly lost primary lease"),[2]})})}function vd(t,e){var n=t[1],r=e[1],i=Hu(t[0],e[0]);return 0===i?Hu(n,r):i}var bd=function(){function t(t){this.ne=t,this.buffer=new Jl(vd),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();vd(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),wd=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Du("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Au.b)(e,void 0,void 0,function(){var e;return Object(Au.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return xf(e=n.sent())?(Du("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,yd(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),_d=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Sf.resolve(xu.o);var r=new bd(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Du("LruGarbageCollector","Garbage collection skipped; disabled"),Sf.resolve(rd)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Du("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),rd):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Du("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Ru()<=Ci.a.DEBUG&&Du("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Sf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Od=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new _d(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Ed(t,n)},t.prototype.removeReference=function(t,e,n){return Ed(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Ed(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return hd(t).$t(function(r){return ud(t,r,e).next(function(t){return t&&(n=!0),Sf.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),md(t).delete([0,Jh(s.path)])})});i.push(u)}}).next(function(){return Sf.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Ed(t,e)},t.prototype.we=function(t,e){var n,r=md(t),i=xu.o;return r.Ot({index:pf.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==xu.o&&e(new dc(nf(n)),i),i=s,n=o):i=xu.o}).next(function(){i!==xu.o&&e(new dc(nf(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Ed(t,e){return md(t).put(function(t,e){return new pf(0,Jh(t.path),e)}(e,t.currentSequenceNumber))}var Sd=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Qu(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Yu(this.inner)},t}(),Cd=function(){function t(){this.changes=new Sd(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Wu.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:xc.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Sf.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Td=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return xd(t).put(jd(e),n)},t.prototype.removeEntry=function(t,e){var n=xd(t),r=jd(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return xd(t).get(jd(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return xd(t).get(jd(e)).next(function(t){return{document:n.ye(e,t),size:sd(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=nh();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=nh(),i=new Yl(dc.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,sd(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Sf.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return xd(t).Ot({range:r},function(t,e,r){for(var s=dc.fromSegments(t);o&&dc.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=nh(),o=e.path.length+1,s={};if(n.isEqual(Wu.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Bf(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=hf.collectionReadTimeIndex}return xd(t).Ot(s,function(t,n,s){if(t.length===o){var a=Uf(r.R,n);e.path.isPrefixOf(a.key.path)?ll(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Id(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Ad(t).get(ff.key).next(function(t){return Fu(!!t),t})},t.prototype.me=function(t,e){return Ad(t).put(ff.key,e)},t.prototype.ye=function(t,e){if(e){var n=Uf(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Wu.min()))return n}return xc.newInvalidDocument(t)},t}(),Id=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Sd(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Au.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Jl(function(t,e){return Hu(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=qf(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=sd(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=qf(e.Ie.R,xc.newNoDocument(o,Wu.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Sf.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Cd);function Ad(t){return Pf(t,ff.store)}function xd(t){return Pf(t,hf.store)}function jd(t){return t.path.toArray()}var kd=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Fu(n<r&&n>=0&&r<=11);var o=new Cf("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(of.store)}(t),function(t){t.createObjectStore(sf.store,{keyPath:sf.keyPath}),t.createObjectStore(af.store,{keyPath:af.keyPath,autoIncrement:!0}).createIndex(af.userMutationsIndex,af.userMutationsKeyPath,{unique:!0}),t.createObjectStore(uf.store)}(t),Nd(t),function(t){t.createObjectStore(hf.store)}(t));var s=Sf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(pf.store),t.deleteObjectStore(df.store),t.deleteObjectStore(gf.store)}(t),Nd(t)),s=s.next(function(){return function(t){var e=t.store(gf.store),n=new gf(0,0,Wu.min().toTimestamp(),0);return e.put(gf.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(af.store).Nt().next(function(n){t.deleteObjectStore(af.store),t.createObjectStore(af.store,{keyPath:af.keyPath,autoIncrement:!0}).createIndex(af.userMutationsIndex,af.userMutationsKeyPath,{unique:!0});var r=e.store(af.store),i=n.map(function(t){return r.put(t)});return Sf.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(yf.store,{keyPath:yf.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(ff.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(hf.store);e.createIndex(hf.readTimeIndex,hf.readTimeIndexPath,{unique:!1}),e.createIndex(hf.collectionReadTimeIndex,hf.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(vf.store,{keyPath:vf.keyPath})}(t),function(t){t.createObjectStore(bf.store,{keyPath:bf.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(hf.store).Ot(function(t,n){e+=sd(n)}).next(function(){var n=new ff(e);return t.store(ff.store).put(ff.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(sf.store),r=t.store(af.store);return n.Nt().next(function(n){return Sf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(af.userMutationsIndex,i).next(function(r){return Sf.forEach(r,function(r){Fu(r.userId===n.userId);var i=Kf(e.R,r);return od(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(pf.store),n=t.store(hf.store);return t.store(gf.store).get(gf.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new Zu(n),s=function(t){return[0,Jh(t)]}(o);r.push(e.get(s).next(function(n){return n?Sf.resolve():function(n){return e.put(new pf(0,Jh(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Sf.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(mf.store,{keyPath:mf.keyPath});var n=e.store(mf.store),r=new td,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Jh(i)})}};return e.store(hf.store).Ot({kt:!0},function(t,e){var n=new Zu(t);return i(n.popLast())}).next(function(){return e.store(uf.store).Ot({kt:!0},function(t,e){var n=nf(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(df.store);return n.Ot(function(t,r){var i=Wf(r),o=$f(e.R,i);return n.put(o)})},t}();function Nd(t){t.createObjectStore(pf.store,{keyPath:pf.keyPath}).createIndex(pf.documentTargetsIndex,pf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(df.store,{keyPath:df.keyPath}).createIndex(df.queryTargetsIndexName,df.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(gf.store)}var Rd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Dd=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new ku(ju.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Od(this,i),this.Le=n+"main",this.R=new Ff(u),this.Be=new Tf(this.Le,11,new kd(this.R)),this.qe=new dd(this.referenceDelegate,this.R),this.Ut=new ed,this.Ue=function(t,e){return new Td(t,e)}(this.R,this.Ut),this.Qe=new Yf,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Pu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ku(ju.FAILED_PRECONDITION,Rd);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new xu(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Au.b)(e,void 0,void 0,function(){return Object(Au.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Au.b)(e,void 0,void 0,function(){return Object(Au.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Au.b)(e,void 0,void 0,function(){return Object(Au.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Md(e).put(new yf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(xf(e))return Du("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Du("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Pd(t).get(of.key).next(function(t){return Sf.resolve(e.tn(t))})},t.prototype.en=function(t){return Md(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Au.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Au.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Pf(t,yf.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Sf.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Sf.resolve(!0):Pd(t).get(of.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new ku(ju.FAILED_PRECONDITION,Rd);return!1}}return!(!e.networkEnabled||!e.inForeground)||Md(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Du("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Au.b)(this,void 0,void 0,function(){var t=this;return Object(Au.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[of.store,yf.store],function(e){var n=new Df(e,xu.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Md(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return ad.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Du("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",wf,function(o){return r=new Df(o,i.Ne?i.Ne.next():xu.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Pu("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new ku(ju.FAILED_PRECONDITION,_f);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Pd(t).get(of.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ku(ju.FAILED_PRECONDITION,Rd)})},t.prototype.Ze=function(t){var e=new of(this.clientId,this.allowTabSynchronization,Date.now());return Pd(t).put(of.key,e)},t.yt=function(){return Tf.yt()},t.prototype.Xe=function(t){var e=this,n=Pd(t);return n.get(of.key).next(function(t){return e.tn(t)?(Du("IndexedDbPersistence","Releasing primary lease."),n.delete(of.key)):Sf.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Pu("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Du("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Pu("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Pu("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Pd(t){return Pf(t,of.store)}function Md(t){return Pf(t,yf.store)}function Vd(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Ld=function(t,e){this.progress=t,this.wn=e},Fd=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return dc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):rl(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new dc(e)).next(function(t){var e=ih();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ih();return this.Ut.getCollectionParents(t,i).next(function(s){return Sf.forEach(s,function(s){var a=function(t,e){return new Yc(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=xc.newInvalidDocument(c),r=r.insert(c,l)),Dl(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){ll(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=uh(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Fl&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Ud=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=uh(),i=uh(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),qd=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Wu.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Jc(e)||tl(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Ru()<=Ci.a.DEBUG&&Du("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),cl(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Jl(hl(t));return e.forEach(function(e,r){ll(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Ru()<=Ci.a.DEBUG&&Du("QueryEngine","Using full collection scan to execute query:",cl(e)),this.Sn.getDocumentsMatchingQuery(t,e,Wu.min())},t}(),Bd=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Yl(Hu),this.kn=new Sd(function(t){return Nc(t)},Rc),this.On=Wu.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Fd(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Hd(t,e,n,r){return new Bd(t,e,n,r)}function zd(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Au.d)(this,function(s){switch(s.label){case 0:return n=Uu(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Fd(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=uh(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Gd(t,e){var n=Uu(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Sf.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Fu(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Kd(t){var e=Uu(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Wd(t,e){var n=Uu(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Fu(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=nh();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push($d(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Wu.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Sf.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function $d(t,e,n,r,i){var o=uh();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=nh();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Wu.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Du("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Qd(t,e){var n=Uu(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Yd(t,e){var n=Uu(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Sf.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Lf(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Xd(t,e,n){return Object(Au.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Au.d)(this,function(a){switch(a.label){case 0:r=Uu(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!xf(s=a.sent()))throw s;return Du("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Zd(t,e,n){var r=Uu(t),i=Wu.min(),o=uh();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Uu(t),i=r.kn.get(n);return void 0!==i?Sf.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,ol(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Wu.min(),n?o:uh())}).next(function(t){return{documents:t,Bn:o}})})}function Jd(t,e){var n=Uu(t),r=Uu(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function tp(t){var e=Uu(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Uu(t),i=nh(),o=Bf(n),s=xd(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:hf.readTimeIndex,range:a},function(t,e){var n=Uf(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Hf(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function ep(t){return Object(Au.b)(this,void 0,void 0,function(){var e;return Object(Au.d)(this,function(n){return[2,(e=Uu(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=xd(t),n=Wu.min();return e.Ot({index:hf.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Hf(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function np(t,e,n,r){return Object(Au.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(Au.d)(this,function(p){switch(p.label){case 0:for(i=Uu(t),o=uh(),s=nh(),a=sh(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Yd(i,function(t){return ol(Zc(Zu.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return $d(t,f,s,Wu.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function rp(t,e,n){return void 0===n&&(n=uh()),Object(Au.b)(this,void 0,void 0,function(){var r,i;return Object(Au.d)(this,function(o){switch(o.label){case 0:return[4,Yd(t,ol(Qf(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Uu(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Th(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(nc.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var ip=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Sf.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Th(n.createTime)}),Sf.resolve()},t.prototype.getNamedQuery=function(t,e){return Sf.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Qf(t.bundledQuery),readTime:Th(t.readTime)}}(e)),Sf.resolve()},t}(),op=function(){function t(){this.Wn=new Jl(sp.Gn),this.zn=new Jl(sp.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new sp(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new sp(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new dc(new Zu([])),r=new sp(n,t),i=new sp(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new dc(new Zu([])),n=new sp(e,t),r=new sp(e,t+1),i=uh();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new sp(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),sp=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return dc.comparator(t.key,e.key)||Hu(t.ns,e.ns)},t.Hn=function(t,e){return Hu(t.ns,e.ns)||dc.comparator(t.key,e.key)},t}(),ap=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Jl(sp.Gn)}return t.prototype.checkEmpty=function(t){return Sf.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Mf(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new sp(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Sf.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Sf.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Sf.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Sf.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Sf.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new sp(e,0),i=new sp(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Sf.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Jl(Hu);return e.forEach(function(t){var e=new sp(t,0),i=new sp(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Sf.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;dc.isDocumentKey(i)||(i=i.child(""));var o=new sp(new dc(i),0),s=new Jl(Hu);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Sf.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Fu(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Sf.forEach(e.mutations,function(i){var o=new sp(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new sp(e,0),r=this.rs.firstAfterOrEqual(n);return Sf.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Sf.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),up=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Yl(dc.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Sf.resolve(n?n.document.clone():xc.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=nh();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():xc.newInvalidDocument(t))}),Sf.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=nh(),i=new dc(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||ll(e,u)&&(r=r.insert(u.key,u.clone()))}return Sf.resolve(r)},t.prototype.fs=function(t,e){return Sf.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new cp(this)},t.prototype.getSize=function(t){return Sf.resolve(this.size)},t}(),cp=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Au.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Sf.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Cd),lp=function(){function t(t){this.persistence=t,this.ds=new Sd(function(t){return Nc(t)},Rc),this.lastRemoteSnapshotVersion=Wu.min(),this.highestTargetId=0,this.ws=0,this._s=new op,this.targetCount=0,this.ys=fd.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Sf.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Sf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Sf.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Sf.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Sf.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new fd(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Sf.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Sf.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Sf.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Sf.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Sf.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Sf.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Sf.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Sf.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Sf.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Sf.resolve(n)},t.prototype.containsKey=function(t,e){return Sf.resolve(this._s.containsKey(e))},t}(),hp=function(){function t(t,e){var n=this;this.gs={},this.Ne=new xu(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new lp(this),this.Ut=new Jf,this.Ue=function(t,e){return new up(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Ff(e),this.Qe=new ip(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new ap(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Du("MemoryPersistence","Starting transaction:",t);var i=new fp(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Sf.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),fp=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Au.c)(e,t),e}(Of),dp=function(){function t(t){this.persistence=t,this.As=new op,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Lu()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Sf.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Sf.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Sf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Sf.forEach(this.vs,function(r){var i=dc.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Sf.or([function(){return Sf.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),pp=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function gp(t,e){return"firestore_clients_"+t+"_"+e}function mp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function yp(t,e){return"firestore_targets_"+t+"_"+e}pp.UNAUTHENTICATED=new pp(null),pp.GOOGLE_CREDENTIALS=new pp("google-credentials-uid"),pp.FIRST_PARTY=new pp("first-party-uid");var vp=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new ku(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Pu("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),bp=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ku(i.error.code,i.error.message)),o?new t(e,i.state,r):(Pu("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),wp=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=lh(),s=0;i&&s<r.activeTargetIds.length;++s)i=fc(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Pu("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),_p=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Pu("SharedClientState","Failed to parse online state: "+e),null)},t}(),Op=function(){function t(){this.activeTargetIds=lh()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ep=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Yl(Hu),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=gp(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Op),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Au.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Au.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(gp(this.persistenceKey,r)))&&(o=wp.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(yp(this.persistenceKey,t));if(n){var r=bp.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(yp(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Du("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Du("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Du("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Du("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Pu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Au.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Au.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=xu.o;if(null!=t)try{var n=JSON.parse(t);Fu("number"==typeof n),e=n}catch(t){Pu("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==xu.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new vp(this.currentUser,t,e,n),i=mp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=mp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=yp(this.persistenceKey,t),i=new bp(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return wp.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return vp.Vs(new pp(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return bp.Vs(r,e)},t.prototype.js=function(t){return _p.Vs(t)},t.prototype.ii=function(t){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Du("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=lh();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Sp=function(){function t(){this.li=new Op,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Op,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Cp=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Tp=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Du("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Du("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ip={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ap=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),xp=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Au.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Iu;s.listenOnce(Su.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Eu.NO_ERROR:var e=s.getResponseJson();Du("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Eu.TIMEOUT:Du("Connection",'RPC "'+t+'" timed out'),o(new ku(ju.DEADLINE_EXCEEDED,"Request time out"));break;case Eu.HTTP_ERROR:var n=s.getStatus();if(Du("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ju).indexOf(e)>=0?e:ju.UNKNOWN}(r.status);o(new ku(a,r.message))}else o(new ku(ju.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ku(ju.UNAVAILABLE,"Connection failed."));break;default:Lu()}}finally{Du("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new vu,i=_s(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(Si.n)()||Object(Si.p)()||Object(Si.l)()||Object(Si.m)()||Object(Si.q)()||Object(Si.k)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Du("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Ap({Ei:function(t){c?Du("Connection","Not sending because WebChannel is closed:",t):(u||(Du("Connection","Opening WebChannel transport."),a.open(),u=!0),Du("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Tu.EventType.OPEN,function(){c||Du("Connection","WebChannel transport opened.")}),h(a,Tu.EventType.CLOSE,function(){c||(c=!0,Du("Connection","WebChannel transport closed"),l.Vi())}),h(a,Tu.EventType.ERROR,function(t){c||(c=!0,Mu("Connection","WebChannel transport errored:",t),l.Vi(new ku(ju.UNAVAILABLE,"The operation could not be completed")))}),h(a,Tu.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Fu(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Du("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Hl[t];if(void 0!==e)return Ql(e)}(i),s=r.message;void 0===o&&(o=ju.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new ku(o,s)),a.close()}else Du("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Cu.STAT_EVENT,function(t){10===t.stat?Du("Connection","Detected buffering proxy"):11===t.stat&&Du("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Du("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Du("RestConnection","Received: ",t),t},function(e){throw Mu("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Ip[t]},t}());function jp(){return"undefined"!=typeof window?window:null}function kp(){return"undefined"!=typeof document?document:null}function Np(t){return new Oh(t,!0)}var Rp=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Du("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Dp=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Rp(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===ju.RESOURCE_EXHAUSTED?(Pu(e.toString()),Pu("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===ju.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new ku(ju.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Au.b)(t,void 0,void 0,function(){return Object(Au.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Du("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Du("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Pp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Au.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Lu()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Fu(void 0===e||"string"==typeof e),nc.fromBase64String(e||"")):(Fu(void 0===e||e instanceof Uint8Array),nc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?ju.UNKNOWN:Ql(t.code);return new ku(e,t.message||"")}(a);n=new gh(r,i,o,s||null)}else if("documentChange"in e){i=jh(t,(r=e.documentChange).document.name),o=Th(r.document.updateTime);var a=new Ic({mapValue:{fields:r.document.fields}}),u=(s=xc.newFoundDocument(i,o,a),r.targetIds||[]);n=new dh(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=jh(t,(r=e.documentDelete).document),o=r.readTime?Th(r.readTime):Wu.min(),a=xc.newNoDocument(i,o),n=new dh([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=jh(t,(r=e.documentRemove).document),n=new dh([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Lu();var c=e.filter;i=new Wl(r=c.count||0),n=new ph(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Wu.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Wu.min():e.readTime?Th(e.readTime):Wu.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Rh(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Dc(r)?{documents:Fh(t,r)}:{query:Uh(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Sh(t,e.resumeToken):e.snapshotVersion.compareTo(Wu.min())>0&&(n.readTime=Eh(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Lu()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Rh(this.R),e.removeTarget=t,this.cr(e)},e}(Dp),Mp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Au.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Fu(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Fu(void 0!==e),t.map(function(t){return function(t,e){var n=Th(t.updateTime?t.updateTime:e);return n.isEqual(Wu.min())&&(n=Th(e)),new xl(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Th(t.commitTime);return this.listener.Tr(n,e)}return Fu(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Rh(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Vh(e.R,t)})};this.cr(n)},e}(Dp),Vp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Au.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new ku(ju.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===ju.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ku(ju.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===ju.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ku(ju.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Lp=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Pu(e),this.Vr=!1):Du("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Fp=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Au.b)(o,void 0,void 0,function(){return Object(Au.d)(this,function(t){switch(t.label){case 0:return $p(this)?(Du("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Au.b)(this,void 0,void 0,function(){var e;return Object(Au.d)(this,function(n){switch(n.label){case 0:return(e=Uu(t)).$r.add(4),[4,qp(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Up(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Lp(n,r)};function Up(t){return Object(Au.b)(this,void 0,void 0,function(){var e,n;return Object(Au.d)(this,function(r){switch(r.label){case 0:if(!$p(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function qp(t){return Object(Au.b)(this,void 0,void 0,function(){var e,n;return Object(Au.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Bp(t,e){var n=Uu(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Wp(n)?Kp(n):cg(n).er()&&zp(n,e))}function Hp(t,e){var n=Uu(t),r=cg(n);n.Or.delete(e),r.er()&&Gp(n,e),0===n.Or.size&&(r.er()?r.ir():$p(n)&&n.Br.set("Unknown"))}function zp(t,e){t.qr.U(e.targetId),cg(t).mr(e)}function Gp(t,e){t.qr.U(e),cg(t).yr(e)}function Kp(t){t.qr=new yh({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),cg(t).start(),t.Br.Sr()}function Wp(t){return $p(t)&&!cg(t).tr()&&t.Or.size>0}function $p(t){return 0===Uu(t).$r.size}function Qp(t){t.qr=void 0}function Yp(t){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(e){return t.Or.forEach(function(e,n){zp(t,e)}),[2]})})}function Xp(t,e){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(n){return Qp(t),Wp(t)?(t.Br.Nr(e),Kp(t)):t.Br.set("Unknown"),[2]})})}function Zp(t,e,n){return Object(Au.b)(this,void 0,void 0,function(){var r,i,o;return Object(Au.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof gh&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Au.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Du("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Jp(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof dh?t.qr.X(e):e instanceof ph?t.qr.rt(e):t.qr.et(e),n.isEqual(Wu.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Kd(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(nc.EMPTY_BYTE_STRING,n.snapshotVersion)),Gp(t,e);var r=new Lf(n.target,e,1,n.sequenceNumber);zp(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Du("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Jp(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Jp(t,e,n){return Object(Au.b)(this,void 0,void 0,function(){var r=this;return Object(Au.d)(this,function(i){switch(i.label){case 0:if(!xf(e))throw e;return t.$r.add(1),[4,qp(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Kd(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Au.b)(r,void 0,void 0,function(){return Object(Au.d)(this,function(e){switch(e.label){case 0:return Du("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Up(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function tg(t,e){return e().catch(function(n){return Jp(t,n,e)})}function eg(t){return Object(Au.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Au.d)(this,function(s){switch(s.label){case 0:e=Uu(t),n=lg(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return $p(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Qd(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=lg(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Jp(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return ng(e)&&rg(e),[2]}})})}function ng(t){return $p(t)&&!lg(t).tr()&&t.kr.length>0}function rg(t){lg(t).start()}function ig(t){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(e){return lg(t).Ar(),[2]})})}function og(t){return Object(Au.b)(this,void 0,void 0,function(){var e,n,r;return Object(Au.d)(this,function(i){for(e=lg(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function sg(t,e,n){return Object(Au.b)(this,void 0,void 0,function(){var r,i;return Object(Au.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Vf.from(r,e,n),[4,tg(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,eg(t)];case 2:return o.sent(),[2]}})})}function ag(t,e){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(n){switch(n.label){case 0:return e&&lg(t).pr?[4,function(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r;return Object(Au.d)(this,function(i){switch(i.label){case 0:return $l(r=e.code)&&r!==ju.ABORTED?(n=t.kr.shift(),lg(t).sr(),[4,tg(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,eg(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return ng(t)&&rg(t),[2]}})})}function ug(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n;return Object(Au.d)(this,function(r){switch(r.label){case 0:return n=Uu(t),e?(n.$r.delete(2),[4,Up(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,qp(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function cg(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Uu(t);return r.br(),new Pp(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Yp.bind(null,t),Ri:Xp.bind(null,t),_r:Zp.bind(null,t)}),t.Mr.push(function(n){return Object(Au.b)(e,void 0,void 0,function(){return Object(Au.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Wp(t)?Kp(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Qp(t),e.label=3;case 3:return[2]}})})})),t.Ur}function lg(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Uu(t);return r.br(),new Mp(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:ig.bind(null,t),Ri:ag.bind(null,t),Ir:og.bind(null,t),Tr:sg.bind(null,t)}),t.Mr.push(function(n){return Object(Au.b)(e,void 0,void 0,function(){return Object(Au.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,eg(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Du("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var hg=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ef,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ku(ju.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function fg(t,e){if(Pu("AsyncQueue",e+": "+t),xf(t))return new ku(ju.UNAVAILABLE,e+": "+t);throw t}var dg=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||dc.comparator(e.key,n.key)}:function(t,e){return dc.comparator(t.key,e.key)},this.keyedMap=ih(),this.sortedSet=new Yl(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),pg=function(){function t(){this.Kr=new Yl(dc.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Lu():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),gg=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,dg.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&al(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),mg=function(){this.Wr=void 0,this.listeners=[]},yg=function(){this.queries=new Sd(function(t){return ul(t)},al),this.onlineState="Unknown",this.Gr=new Set};function vg(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Au.d)(this,function(c){switch(c.label){case 0:if(n=Uu(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new mg),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=fg(a,"Initialization of query '"+cl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Og(n),[2]}})})}function bg(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Au.d)(this,function(a){return n=Uu(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function wg(t,e){for(var n=Uu(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Og(n)}function _g(t,e,n){var r=Uu(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Og(t){t.Gr.forEach(function(t){t.next()})}var Eg=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new gg(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=gg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Sg=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Cg=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return jh(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Mh(this.R,t.document,!1):xc.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Th(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Cg(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||uh()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Au.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Au.d)(this,function(o){switch(o.label){case 0:return[4,np(this.localStore,new Cg(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,rp(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Ld(Object.assign({},this.progress),t))]}})})}}();var Tg=function(t){this.key=t},Ig=function(t){this.key=t},Ag=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=uh(),this.mutatedKeys=uh(),this.lo=hl(t),this.fo=new dg(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new pg,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Jc(this.query)&&i.size===this.query.limit?i.last():null,c=tl(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=ll(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Jc(this.query)||tl(this.query))for(;s.size>this.query.limit;){var l=Jc(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lu()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new gg(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new pg,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=uh(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Ig(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Tg(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=uh();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return gg.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),xg=function(t,e,n){this.query=t,this.targetId=e,this.view=n},jg=function(t){this.key=t,this.bo=!1},kg=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Sd(function(t){return ul(t)},al),this.Vo=new Map,this.So=new Set,this.Do=new Yl(dc.comparator),this.Co=new Map,this.No=new op,this.xo={},this.Fo=new Map,this.ko=fd.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Ng(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Au.d)(this,function(a){switch(a.label){case 0:return n=am(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Yd(n.localStore,ol(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Rg(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Bp(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Rg(t,e,n,r){return Object(Au.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Au.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Au.b)(this,void 0,void 0,function(){var i,o,s;return Object(Au.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Zd(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Kg(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Zd(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Ag(e,i.Bn),s=o._o(i.documents),a=fh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Kg(t,n,u.To),c=new xg(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Dg(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i;return Object(Au.d)(this,function(o){switch(o.label){case 0:return n=Uu(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!al(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Xd(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Hp(n.remoteStore,r.targetId),zg(n,r.targetId)}).catch(yd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return zg(n,r.targetId),[4,Xd(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Pg(t,e,n){return Object(Au.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Au.d)(this,function(a){switch(a.label){case 0:r=um(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Uu(t),i=Ku.now(),o=e.reduce(function(t,e){return t.add(e.key)},uh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Pl(c,n.get(c.key));null!=l&&s.push(new Fl(c.key,l,Ac(l.toProto().mapValue),jl.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Yl(Hu)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Qg(r,i.changes)];case 3:return a.sent(),[4,eg(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=fg(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Mg(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r;return Object(Au.d)(this,function(i){switch(i.label){case 0:n=Uu(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Wd(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Fu(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Fu(r.bo):t.removedDocuments.size>0&&(Fu(r.bo),r.bo=!1))}),[4,Qg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,yd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Vg(t,e,n){var r=Uu(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Uu(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Og(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Lg(t,e,n){return Object(Au.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Au.d)(this,function(c){switch(c.label){case 0:return(r=Uu(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Yl(dc.comparator)).insert(o,xc.newNoDocument(o,Wu.min())),a=uh().add(o),u=new hh(Wu.min(),new Map,new Jl(Hu),s,a),[4,Mg(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),$g(r),[3,4];case 2:return[4,Xd(r.localStore,e,!1).then(function(){return zg(r,e,n)}).catch(yd)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Fg(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i;return Object(Au.d)(this,function(o){switch(o.label){case 0:n=Uu(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Gd(n.localStore,e)];case 2:return i=o.sent(),Hg(n,r,null),Bg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Qg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,yd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Ug(t,e,n){return Object(Au.b)(this,void 0,void 0,function(){var r,i;return Object(Au.d)(this,function(o){switch(o.label){case 0:r=Uu(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Uu(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Fu(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Hg(r,e,n),Bg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Qg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,yd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function qg(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Au.d)(this,function(a){switch(a.label){case 0:$p((n=Uu(t)).remoteStore)||Du("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Uu(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=fg(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Bg(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Hg(t,e,n){var r=Uu(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function zg(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Gg(t,e)})}function Gg(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Hp(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),$g(t))}function Kg(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Tg?(t.No.addReference(o.key,e),Wg(t,o)):o instanceof Ig?(Du("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Gg(t,o.key)):Lu()}}function Wg(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Du("SyncEngine","New document in limbo: "+n),t.So.add(r),$g(t))}function $g(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new dc(Zu.fromString(e)),r=t.ko.next();t.Co.set(r,new jg(n)),t.Do=t.Do.insert(n,r),Bp(t.remoteStore,new Lf(ol(Zc(n.path)),r,2,xu.o))}}function Qg(t,e,n){return Object(Au.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Au.d)(this,function(a){switch(a.label){case 0:return r=Uu(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ud.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Au.d)(this,function(l){switch(l.label){case 0:n=Uu(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Sf.forEach(e,function(e){return Sf.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Sf.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!xf(r=l.sent()))throw r;return Du("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Yg(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r;return Object(Au.d)(this,function(i){switch(i.label){case 0:return(n=Uu(t)).currentUser.isEqual(e)?[3,3]:(Du("SyncEngine","User change. New user:",e.toKey()),[4,zd(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new ku(ju.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Qg(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Xg(t,e){var n=Uu(t),r=n.Co.get(e);if(r&&r.bo)return uh().add(r.key);var i=uh(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Zg(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i;return Object(Au.d)(this,function(o){switch(o.label){case 0:return[4,Zd((n=Uu(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Kg(n,e.targetId,i.To),i)]}})})}function Jg(t){return Object(Au.b)(this,void 0,void 0,function(){var e;return Object(Au.d)(this,function(n){return[2,tp((e=Uu(t)).localStore).then(function(t){return Qg(e,t)})]})})}function tm(t,e,n,r){return Object(Au.b)(this,void 0,void 0,function(){var i,o;return Object(Au.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Uu(t),r=Uu(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Sf.resolve(null)})})}((i=Uu(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,eg(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Hg(i,e,r||null),Bg(i,e),function(t,e){Uu(Uu(t)._n).Gt(e)}(i.localStore,e)):Lu(),s.label=4;case 4:return[4,Qg(i,o)];case 5:return s.sent(),[3,7];case 6:Du("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function em(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Au.d)(this,function(c){switch(c.label){case 0:return am(n=Uu(t)),um(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,nm(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,ug(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Bp(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return zg(n,e),Xd(n.localStore,e,!0)}),Hp(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,nm(n,a)];case 5:return c.sent(),function(t){var e=Uu(t);e.Co.forEach(function(t,n){Hp(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Yl(dc.comparator)}(n),n.Oo=!1,[4,ug(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function nm(t,e,n){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Au.d)(this,function(g){switch(g.label){case 0:n=Uu(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Yd(n.localStore,ol(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Zg(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Jd(n.localStore,a)];case 8:return p=g.sent(),[4,Yd(n.localStore,p)];case 9:return u=g.sent(),[4,Rg(n,rm(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function rm(t){return Xc(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function im(t){var e=Uu(t);return Uu(Uu(e.localStore).persistence).fn()}function om(t,e,n,r){return Object(Au.b)(this,void 0,void 0,function(){var i,o,s;return Object(Au.d)(this,function(a){switch(a.label){case 0:return(i=Uu(t)).Oo?(Du("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,tp(i.localStore)];case 3:return o=a.sent(),s=hh.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Qg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Xd(i.localStore,e,!0)];case 6:return a.sent(),zg(i,e,r),[3,8];case 7:Lu(),a.label=8;case 8:return[2]}})})}function sm(t,e,n){return Object(Au.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Au.d)(this,function(f){switch(f.label){case 0:if(!(r=am(t)).Oo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Du("SyncEngine","Adding an already active target "+s),[3,5]):[4,Jd(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,Yd(r.localStore,a)];case 3:return u=f.sent(),[4,Rg(r,rm(a),u.targetId,!1)];case 4:f.sent(),Bp(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Au.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Xd(r.localStore,t,!1).then(function(){Hp(r.remoteStore,t),zg(r,t)}).catch(yd)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function am(t){var e=Uu(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lg.bind(null,e),e.vo._r=wg.bind(null,e.eventManager),e.vo.Mo=_g.bind(null,e.eventManager),e}function um(t){var e=Uu(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ug.bind(null,e),e}var cm=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(e){switch(e.label){case 0:return this.R=Np(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Hd(this.persistence,new qd,t.initialUser,this.R)},t.prototype.qo=function(t){return new hp(dp.bs,this.R)},t.prototype.Bo=function(t){return new Sp},t.prototype.terminate=function(){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),lm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Au.c)(e,t),e.prototype.initialize=function(e){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,ep(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,um(this.Ko.syncEngine)];case 4:return n.sent(),[4,eg(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Hd(this.persistence,new qd,t.initialUser,this.R)},e.prototype.Uo=function(t){return new wd(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Vd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?id.withCacheSize(this.cacheSizeBytes):id.DEFAULT;return new Dd(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,jp(),kp(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Sp},e}(cm),hm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Au.c)(e,t),e.prototype.initialize=function(e){return Object(Au.b)(this,void 0,void 0,function(){var n,r=this;return Object(Au.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Ep?(this.sharedClientState.syncEngine={ui:tm.bind(null,n),ai:om.bind(null,n),hi:sm.bind(null,n),fn:im.bind(null,n),ci:Jg.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Au.b)(r,void 0,void 0,function(){return Object(Au.d)(this,function(e){switch(e.label){case 0:return[4,em(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=jp();if(!Ep.yt(e))throw new ku(ju.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Vd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ep(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(lm),fm=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n=this;return Object(Au.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Vg(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Yg.bind(null,this.syncEngine),[4,ug(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new yg},t.prototype.createDatastore=function(t){var e=Np(t.databaseInfo.databaseId),n=new xp(t.databaseInfo);return function(t,e,n){return new Vp(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Vg(s.syncEngine,t,0)},o=Tp.yt()?new Tp:new Cp,new Fp(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new kg(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Au.b)(this,void 0,void 0,function(){var e;return Object(Au.d)(this,function(n){switch(n.label){case 0:return e=Uu(t),Du("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,qp(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),dm=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),pm=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Ef,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Au.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Au.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Sg(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Au.b)(this,void 0,void 0,function(){var t,e;return Object(Au.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Au.b)(this,void 0,void 0,function(){var e;return Object(Au.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Au.b)(this,void 0,void 0,function(){var t,e;return Object(Au.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Au.b)(this,void 0,void 0,function(){var e,n=this;return Object(Au.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ku(ju.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Au.d)(this,function(u){switch(u.label){case 0:return n=Uu(t),r=Rh(n.R)+"/documents",i={documents:e.map(function(t){return xh(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Fu(!!e.found);var n=jh(t,e.found.name),r=Th(e.found.updateTime),i=new Ic({mapValue:{fields:e.found.fields}});return xc.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Fu(!!e.missing),Fu(!!e.readTime);var n=jh(t,e.missing),r=Th(e.readTime);return xc.newNoDocument(n,r)}(t,e):Lu()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Fu(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Gl(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Au.b)(this,void 0,void 0,function(){var t,e=this;return Object(Au.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=dc.fromPath(n);e.mutations.push(new Kl(r,e.precondition(r)))}),[4,function(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i;return Object(Au.d)(this,function(o){switch(o.label){case 0:return n=Uu(t),r=Rh(n.R)+"/documents",i={writes:e.map(function(t){return Vh(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Lu();e=Wu.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ku(ju.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?jl.updateTime(e):jl.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Wu.min()))throw new ku(ju.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jl.updateTime(e)}return jl.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),gm=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Rp(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Au.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Au.d)(this,function(r){return t=new pm(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!lc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!$l(e)}return!1},t}(),mm=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=pp.UNAUTHENTICATED,this.clientId=Bu.u(),this.credentialListener=function(){},this.receivedInitialUser=new Ef,this.credentials.setChangeListener(function(t){Du("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ku(ju.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Ef;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Au.b)(t,void 0,void 0,function(){var t,n;return Object(Au.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=fg(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function ym(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Au.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Du("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Au.b)(i,void 0,void 0,function(){return Object(Au.d)(this,function(t){switch(t.label){case 0:return[4,zd(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function vm(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r;return Object(Au.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,bm(t)];case 1:return n=i.sent(),Du("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Au.b)(this,void 0,void 0,function(){var n,r;return Object(Au.d)(this,function(i){switch(i.label){case 0:return(n=Uu(t)).asyncQueue.verifyOperationInProgress(),Du("RemoteStore","RemoteStore received new credentials"),r=$p(n),n.$r.add(3),[4,qp(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Up(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function bm(t){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Du("FirestoreClient","Using default OfflineComponentProvider"),[4,ym(t,new cm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function wm(t){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Du("FirestoreClient","Using default OnlineComponentProvider"),[4,vm(t,new fm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function _m(t){return bm(t).then(function(t){return t.persistence})}function Om(t){return bm(t).then(function(t){return t.localStore})}function Em(t){return wm(t).then(function(t){return t.remoteStore})}function Sm(t){return wm(t).then(function(t){return t.syncEngine})}function Cm(t){return Object(Au.b)(this,void 0,void 0,function(){var e,n;return Object(Au.d)(this,function(r){switch(r.label){case 0:return[4,wm(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Ng.bind(null,e.syncEngine),n.onUnlisten=Dg.bind(null,e.syncEngine),n)]}})})}function Tm(t,e,n){var r=this;void 0===n&&(n={});var i=new Ef;return t.asyncQueue.enqueueAndForget(function(){return Object(Au.b)(r,void 0,void 0,function(){var r;return Object(Au.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new dm({next:function(o){e.enqueueAndForget(function(){return bg(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new ku(ju.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ku(ju.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Eg(Zc(n.path),o,{includeMetadataChanges:!0,so:!0});return vg(t,s)},[4,Cm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Im(t,e,n){var r=this;void 0===n&&(n={});var i=new Ef;return t.asyncQueue.enqueueAndForget(function(){return Object(Au.b)(r,void 0,void 0,function(){var r;return Object(Au.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new dm({next:function(n){e.enqueueAndForget(function(){return bg(t,s)}),n.fromCache&&"server"===r.source?i.reject(new ku(ju.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Eg(n,o,{includeMetadataChanges:!0,so:!0});return vg(t,s)},[4,Cm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Am=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},xm=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),jm=new Map,km=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Nm=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(pp.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Rm=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Dm=function(){function t(t){var e=this;this.oc=null,this.currentUser=pp.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Du("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Fu("string"==typeof n.accessToken),new km(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Fu(null===t||"string"==typeof t),new pp(t)},t}(),Pm=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=pp.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Mm=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Pm(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(pp.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Vm(t,e,n){if(!n)throw new ku(ju.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Lm(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ku(ju.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Fm(t,e,n,r){if(!0===e&&!0===r)throw new ku(ju.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Um(t){if(!dc.isDocumentKey(t))throw new ku(ju.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function qm(t){if(dc.isDocumentKey(t))throw new ku(ju.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Bm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Lu()}function Hm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ku(ju.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Bm(t);throw new ku(ju.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function zm(t,e){if(e<=0)throw new ku(ju.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Gm=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ku(ju.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ku(ju.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Fm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Km=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gm({}),this._settingsFrozen=!1,t instanceof xm?(this._databaseId=t,this._credentials=new Nm):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ku(ju.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xm(t.options.projectId)}(t),this._credentials=new Dm(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new ku(ju.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new ku(ju.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gm(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Nm;switch(t.type){case"gapi":var e=t.client;return Fu(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Mm(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ku(ju.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=jm.get(this))&&(Du("ComponentProvider","Removing Datastore"),jm.delete(this),t.terminate()),Promise.resolve();var t},t}(),Wm=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Qm(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),$m=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Qm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Zc(r))||this)._path=r,i.type="collection",i}return Object(Au.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Wm(this.firestore,null,new dc(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}($m);function Ym(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Si.h)(t),Vm("collection","path",e),t instanceof Km)return qm(n=Zu.fromString.apply(Zu,Object(Au.f)([e],r))),new Qm(t,null,n);if(!(t instanceof Wm||t instanceof Qm))throw new ku(ju.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return qm(n=Zu.fromString.apply(Zu,Object(Au.f)([t.path],r)).child(Zu.fromString(e))),new Qm(t.firestore,null,n)}function Xm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Si.h)(t),1===arguments.length&&(e=Bu.u()),Vm("doc","path",e),t instanceof Km)return Um(n=Zu.fromString.apply(Zu,Object(Au.f)([e],r))),new Wm(t,null,new dc(n));if(!(t instanceof Wm||t instanceof Qm))throw new ku(ju.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Um(n=t._path.child(Zu.fromString.apply(Zu,Object(Au.f)([e],r)))),new Wm(t.firestore,t instanceof Qm?t.converter:null,new dc(n))}function Zm(t,e){return t=Object(Si.h)(t),e=Object(Si.h)(e),(t instanceof Wm||t instanceof Qm)&&(e instanceof Wm||e instanceof Qm)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Jm(t,e){return t=Object(Si.h)(t),e=Object(Si.h)(e),t instanceof $m&&e instanceof $m&&t.firestore===e.firestore&&al(t._query,e._query)&&t.converter===e.converter}var ty=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Rp(this,"async_queue_retry"),this.Ec=function(){var e=kp();e&&Du("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=kp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=kp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Au.b)(this,void 0,void 0,function(){var t,e=this;return Object(Au.d)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!xf(t=n.sent()))throw t;return Du("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,Pu("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=hg.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Lu()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Au.b)(this,void 0,void 0,function(){var t;return Object(Au.d)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function ey(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Ef,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var ny=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new ty,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Au.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||iy(this),this._firestoreClient.terminate()},e}(Km);function ry(t){return t._firestoreClient||iy(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function iy(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Am(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new mm(t._credentials,t._queue,r)}function oy(t,e,n){var r=this,i=new Ef;return t.asyncQueue.enqueue(function(){return Object(Au.b)(r,void 0,void 0,function(){var r;return Object(Au.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ym(t,n)];case 1:return o.sent(),[4,vm(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ju.FAILED_PRECONDITION||t.code===ju.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function sy(t){if(t._initialized||t._terminated)throw new ku(ju.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ay=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ku(ju.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tc(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),uy=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(nc.fromBase64String(e))}catch(e){throw new ku(ju.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(nc.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),cy=function(t){this._methodName=t},ly=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ku(ju.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ku(ju.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Hu(this._lat,t._lat)||Hu(this._long,t._long)},t}(),hy=/^__.*__$/,fy=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Fl(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ll(t,this.data,e,this.fieldTransforms)},t}(),dy=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Fl(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function py(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lu()}}var gy=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Py(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(py(this.Dc)&&hy.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),my=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Np(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new gy({Dc:t,methodName:e,Lc:n,path:tc.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function yy(t){var e=t._freezeSettings(),n=Np(t._databaseId);return new my(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vy(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);ky("Data must be an object, but it was:",s,r);var a,u,c=xy(r,s);if(o.merge)a=new ec(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Ny(e,f[h],n);if(!s.contains(d))throw new ku(ju.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");My(l,d)||l.push(d)}a=new ec(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new fy(new Ic(c),a,u)}var by=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Au.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(cy);function wy(t,e,n){return new gy({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var _y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Au.c)(e,t),e.prototype._toFieldTransform=function(t){return new Al(t.path,new wl)},e.prototype.isEqual=function(t){return t instanceof e},e}(cy),Oy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Au.c)(e,t),e.prototype._toFieldTransform=function(t){var e=wy(this,t,!0),n=this.qc.map(function(t){return Ay(t,e)}),r=new _l(n);return new Al(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(cy),Ey=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Au.c)(e,t),e.prototype._toFieldTransform=function(t){var e=wy(this,t,!0),n=this.qc.map(function(t){return Ay(t,e)}),r=new El(n);return new Al(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(cy),Sy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Au.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Cl(t.R,gl(t.R,this.Uc));return new Al(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(cy);function Cy(t,e,n,r){var i=t.Bc(1,e,n);ky("Data must be an object, but it was:",i,r);var o=[],s=Ic.empty();Qu(r,function(t,r){var a=Dy(e,t,n);r=Object(Si.h)(r);var u=i.kc(a);if(r instanceof by)o.push(a);else{var c=Ay(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new ec(o);return new dy(s,a,i.fieldTransforms)}function Ty(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[Ny(e,r,n)],u=[i];if(o.length%2!=0)throw new ku(ju.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Ny(e,o[c])),u.push(o[c+1]);for(var l=[],h=Ic.empty(),f=a.length-1;f>=0;--f)if(!My(l,a[f])){var d=a[f],p=u[f];p=Object(Si.h)(p);var g=s.kc(d);if(p instanceof by)l.push(d);else{var m=Ay(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new ec(l);return new dy(h,y,s.fieldTransforms)}function Iy(t,e,n,r){return void 0===r&&(r=!1),Ay(n,t.Bc(r?4:3,e))}function Ay(t,e){if(jy(t=Object(Si.h)(t)))return ky("Unsupported field value:",e,t),xy(t,e);if(t instanceof cy)return function(t,e){if(!py(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ay(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Si.h)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gl(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ku.fromDate(t);return{timestampValue:Eh(e.R,n)}}if(t instanceof Ku)return n=new Ku(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Eh(e.R,n)};if(t instanceof ly)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uy)return{bytesValue:Sh(e.R,t._byteString)};if(t instanceof Wm){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ih(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Bm(t))}(t,e)}function xy(t,e){var n={};return Yu(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qu(t,function(t,r){var i=Ay(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function jy(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ku||t instanceof ly||t instanceof uy||t instanceof Wm||t instanceof cy)}function ky(t,e,n){if(!jy(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Bm(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Ny(t,e,n){if((e=Object(Si.h)(e))instanceof ay)return e._internalPath;if("string"==typeof e)return Dy(t,e);throw Py("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Ry=new RegExp("[~\\*/\\[\\]]");function Dy(t,e,n){if(e.search(Ry)>=0)throw Py("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(ay.bind.apply(ay,Object(Au.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Py("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Py(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new ku(ju.INVALID_ARGUMENT,(a+=". ")+t+u)}function My(t,e){return t.some(function(t){return t.isEqual(e)})}var Vy=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Wm(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Ly(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Fy("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Ly=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Au.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Vy);function Fy(t,e){return"string"==typeof e?Dy(t,e):e instanceof ay?e._internalPath:e._delegate._internalPath}var Uy=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),qy=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Au.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new By(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Fy("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Vy),By=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Au.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(qy),Hy=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Uy(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new By(n._firestore,n._userDataWriter,r.key,r,new Uy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ku(ju.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new By(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Uy(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new By(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Uy(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:zy(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function zy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lu()}}function Gy(t,e){return t instanceof qy&&e instanceof qy?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Hy&&e instanceof Hy&&t._firestore===e._firestore&&Jm(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Ky(t){if(tl(t)&&0===t.explicitOrderBy.length)throw new ku(ju.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Wy=function(){};function $y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Qy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Au.c)(e,t),e.prototype._apply=function(t){var e=yy(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ku(ju.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){nv(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(ev(r,t,l[c]));a={arrayValue:{values:u}}}else a=ev(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||nv(s,o),a=Iy(n,"where",s,"in"===o||"not-in"===o);var h=Pc.create(i,o,a);return function(t,e){if(e.g()){var n=nl(t);if(null!==n&&!n.isEqual(e.field))throw new ku(ju.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=el(t);null!==r&&rv(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new ku(ju.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new $m(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Yc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Wy),Yy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Au.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new ku(ju.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ku(ju.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Kc(e,n);return function(t,e){if(null===el(t)){var n=nl(t);null!==n&&rv(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new $m(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Yc(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Wy),Xy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Au.c)(e,t),e.prototype._apply=function(t){return new $m(t.firestore,t.converter,sl(t._query,this.Gc,this.zc))},e}(Wy),Zy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Au.c)(e,t),e.prototype._apply=function(t){var e=tv(t,this.type,this.Hc,this.Jc);return new $m(t.firestore,t.converter,function(t,e){return new Yc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Wy),Jy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Au.c)(e,t),e.prototype._apply=function(t){var e=tv(t,this.type,this.Hc,this.Jc);return new $m(t.firestore,t.converter,function(t,e){return new Yc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Wy);function tv(t,e,n,r){if(n[0]=Object(Si.h)(n[0]),n[0]instanceof Vy)return function(t,e,n,r,i){if(!r)throw new ku(ju.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=il(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(_c(e,r.key));else{var c=r.data.field(u.field);if(ac(c))throw new ku(ju.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new ku(ju.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new zc(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=yy(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new ku(ju.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new ku(ju.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!rl(t)&&-1!==c.indexOf("/"))throw new ku(ju.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Zu.fromString(c));if(!dc.isDocumentKey(l))throw new ku(ju.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new dc(l);a.push(_c(e,h))}else{var f=Iy(n,r,c);a.push(f)}}return new zc(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function ev(t,e,n){if("string"==typeof(n=Object(Si.h)(n))){if(""===n)throw new ku(ju.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!rl(e)&&-1!==n.indexOf("/"))throw new ku(ju.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Zu.fromString(n));if(!dc.isDocumentKey(r))throw new ku(ju.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return _c(t,new dc(r))}if(n instanceof Wm)return _c(t,n._key);throw new ku(ju.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Bm(n)+".")}function nv(t,e){if(!Array.isArray(t)||0===t.length)throw new ku(ju.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ku(ju.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function rv(t,e,n){if(!n.isEqual(e))throw new ku(ju.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var iv=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),pc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return oc(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(sc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Lu()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Qu(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new ly(oc(t.latitude),oc(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=uc(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(cc(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=ic(t);return new Ku(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Zu.fromString(t);Fu(Zh(n));var r=new xm(n.get(1),n.get(3)),i=new dc(n.popFirst(5));return r.isEqual(e)||Pu("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function ov(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var sv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Au.c)(e,t),e.prototype.convertBytes=function(t){return new uy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Wm(this.firestore,null,e)},e}(iv),av=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=yy(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=uv(t,this._firestore),i=ov(r.converter,e,n),o=vy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,jl.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=uv(t,this._firestore);return o="string"==typeof(e=Object(Si.h)(e))||e instanceof ay?Ty(this._dataReader,"WriteBatch.update",s._key,e,n,r):Cy(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,jl.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=uv(t,this._firestore);return this._mutations=this._mutations.concat(new Gl(e._key,jl.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new ku(ju.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function uv(t,e){if((t=Object(Si.h)(t)).firestore!==e)throw new ku(ju.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var cv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Au.c)(e,t),e.prototype.convertBytes=function(t){return new uy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Wm(this.firestore,null,e)},e}(iv);function lv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Hm(t,Wm);var o=Hm(t.firestore,ny),s=yy(o);return fv(o,[("string"==typeof(e=Object(Si.h)(e))||e instanceof ay?Ty(s,"updateDoc",t._key,e,n,r):Cy(s,"updateDoc",t._key,e)).toMutation(t._key,jl.exists(!0))])}function hv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(Si.h)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||ey(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(ey(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Wm)c=Hm(t.firestore,ny),l=Zc(t._key.path),u={next:function(e){i[a]&&i[a](dv(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Hm(t,$m);c=Hm(d.firestore,ny),l=d._query;var p=new cv(c);u={next:function(t){i[a]&&i[a](new Hy(c,p,d,t))},error:i[a+1],complete:i[a+2]},Ky(t._query)}return function(t,e,n,r){var i=this,o=new dm(r),s=new Eg(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Au.b)(i,void 0,void 0,function(){var e;return Object(Au.d)(this,function(n){switch(n.label){case 0:return e=vg,[4,Cm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Au.b)(i,void 0,void 0,function(){var e;return Object(Au.d)(this,function(n){switch(n.label){case 0:return e=bg,[4,Cm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(ry(c),l,h,u)}function fv(t,e){return function(t,e){var n=this,r=new Ef;return t.asyncQueue.enqueueAndForget(function(){return Object(Au.b)(n,void 0,void 0,function(){var n;return Object(Au.d)(this,function(i){switch(i.label){case 0:return n=Pg,[4,Sm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(ry(t),e)}function dv(t,e,n){var r=n.docs.get(e._key),i=new cv(t);return new qy(t,i,e._key,r,new Uy(n.hasPendingWrites,n.fromCache),e.converter)}var pv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Au.c)(e,t),e.prototype.get=function(e){var n=this,r=uv(e,this._firestore),i=new cv(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new qy(n._firestore,i,r._key,t._document,new Uy(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=yy(t)}return t.prototype.get=function(t){var e=this,n=uv(t,this._firestore),r=new sv(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Lu();var i=t[0];if(i.isFoundDocument())return new Vy(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Vy(e._firestore,r,n._key,null,n.converter);throw Lu()})},t.prototype.set=function(t,e,n){var r=uv(t,this._firestore),i=ov(r.converter,e,n),o=vy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=uv(t,this._firestore);return o="string"==typeof(e=Object(Si.h)(e))||e instanceof ay?Ty(this._dataReader,"Transaction.update",s._key,e,n,r):Cy(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=uv(t,this._firestore);return this._transaction.delete(e._key),this},t}());function gv(){if("undefined"==typeof Uint8Array)throw new ku(ju.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function mv(){if("undefined"==typeof atob)throw new ku(ju.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var yv=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return mv(),new t(uy.fromBase64String(e))},t.fromUint8Array=function(e){return gv(),new t(uy.fromUint8Array(e))},t.prototype.toBase64=function(){return mv(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return gv(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),vv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){sy(t=Hm(t,ny));var n=ry(t),r=t._freezeSettings(),i=new fm;return oy(n,i,new lm(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){sy(t=Hm(t,ny));var e=ry(t),n=t._freezeSettings(),r=new fm;return oy(e,r,new hm(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new ku(ju.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ef;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Au.b)(e,void 0,void 0,function(){var e;return Object(Au.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Au.b)(this,void 0,void 0,function(){return Object(Au.d)(this,function(e){switch(e.label){case 0:return Tf.yt()?[4,Tf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Vd(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),bv=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof xm||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Hm(t,Km))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Mu("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(Si.d)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ku(ju.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Rm(new km(o,new pp(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Au.b)(e,void 0,void 0,function(){var e,n;return Object(Au.d)(this,function(r){switch(r.label){case 0:return[4,_m(t)];case 1:return e=r.sent(),[4,Em(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Uu(t);return e.$r.delete(0),Up(e)}(n))]}})})})}(ry(Hm(this._delegate,ny)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Au.b)(e,void 0,void 0,function(){var e,n;return Object(Au.d)(this,function(r){switch(r.label){case 0:return[4,_m(t)];case 1:return e=r.sent(),[4,Em(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Au.b)(this,void 0,void 0,function(){var e;return Object(Au.d)(this,function(n){switch(n.label){case 0:return(e=Uu(t)).$r.add(0),[4,qp(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(ry(Hm(this._delegate,ny)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Fm("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Ef;return t.asyncQueue.enqueueAndForget(function(){return Object(Au.b)(e,void 0,void 0,function(){var e;return Object(Au.d)(this,function(r){switch(r.label){case 0:return e=qg,[4,Sm(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(ry(Hm(this._delegate,ny)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new dm(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Au.b)(n,void 0,void 0,function(){var e;return Object(Au.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Uu(t).Gr.add(e),e.next()},[4,Cm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Au.b)(n,void 0,void 0,function(){var e;return Object(Au.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Uu(t).Gr.delete(e)},[4,Cm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(ry(t=Hm(t,ny)),ey(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new ku(ju.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Rv(this,Ym(this._delegate,t))}catch(t){throw Cv(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Sv(this,Xm(this._delegate,t))}catch(t){throw Cv(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new jv(this,function(t,e){if(t=Hm(t,Km),Vm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ku(ju.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new $m(t,null,function(t){return new Yc(Zu.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Cv(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Ef;return t.asyncQueue.enqueueAndForget(function(){return Object(Au.b)(n,void 0,void 0,function(){var n;return Object(Au.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return wm(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new gm(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(ry(t),function(n){return e(new pv(t,n))})}(this._delegate,function(n){return t(new _v(e,n))})},t.prototype.batch=function(){var t=this;return ry(this._delegate),new Ov(new av(this._delegate,function(e){return fv(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new ku(ju.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new ku(ju.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),wv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Au.c)(e,t),e.prototype.convertBytes=function(t){return new yv(new uy(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Sv.Zc(e,this.firestore,null)},e}(iv),_v=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new wv(t)}return t.prototype.get=function(t){var e=this,n=Dv(t);return this._delegate.get(n).then(function(t){return new Av(e._firestore,new qy(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Dv(t);return n?(Lm("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Dv(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Au.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Dv(t);return this._delegate.delete(e),this},t}(),Ov=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Dv(t);return n?(Lm("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Dv(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Au.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Dv(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Ev=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new By(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new xv(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new wv(e),n),i.set(n,o)),o},t}();Ev.eu=new WeakMap;var Sv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new wv(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new ku(ju.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Wm(n._delegate,r,new dc(e)))},t.Zc=function(e,n,r){return new t(n,new Wm(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Rv(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Rv(this.firestore,Ym(this._delegate,t))}catch(t){throw Cv(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Si.h)(t))instanceof Wm&&Zm(this._delegate,t)},t.prototype.set=function(t,e){e=Lm("DocumentReference.set",e);try{return function(t,e,n){t=Hm(t,Wm);var r=Hm(t.firestore,ny),i=ov(t.converter,e,n);return fv(r,[vy(yy(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,jl.none())])}(this._delegate,t,e)}catch(t){throw Cv(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?lv(this._delegate,t):lv.apply(void 0,Object(Au.f)([this._delegate,t,e],n))}catch(t){throw Cv(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return fv(Hm((t=this._delegate).firestore,ny),[new Gl(t._key,jl.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Tv(e),i=Iv(e,function(e){return new Av(t.firestore,new qy(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return hv(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Hm(t,Wm);var e=Hm(t.firestore,ny),n=ry(e),r=new cv(e);return function(t,e){var n=this,r=new Ef;return t.asyncQueue.enqueueAndForget(function(){return Object(Au.b)(n,void 0,void 0,function(){var n;return Object(Au.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Au.b)(this,void 0,void 0,function(){var r,i;return Object(Au.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Uu(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new ku(ju.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=fg(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Om(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new qy(e,r,t._key,n,new Uy(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Hm(t,Wm);var e=Hm(t.firestore,ny);return Tm(ry(e),t._key,{source:"server"}).then(function(n){return dv(e,t,n)})}(this._delegate):function(t){t=Hm(t,Wm);var e=Hm(t.firestore,ny);return Tm(ry(e),t._key).then(function(n){return dv(e,t,n)})}(this._delegate)).then(function(t){return new Av(e.firestore,new qy(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Ev.tu(this.firestore,e):null))},t}();function Cv(t,e,n){return t.message=t.message.replace(e,n),t}function Tv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ey(r))return r}return{}}function Iv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=ey(t[0])?t[0]:ey(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Av=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Sv(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Gy(this._delegate,t._delegate)},t}(),xv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Au.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Av),jv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new wv(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,$y(this._delegate,function(t,e,n){var r=e,i=Fy("where",t);return new Qy(i,r,n)}(e,n,r)))}catch(e){throw Cv(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,$y(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Fy("orderBy",t);return new Yy(r,n)}(e,n)))}catch(e){throw Cv(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,$y(this._delegate,function(t){return zm("limit",t),new Xy("limit",t,"F")}(e)))}catch(e){throw Cv(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,$y(this._delegate,function(t){return zm("limitToLast",t),new Xy("limitToLast",t,"L")}(e)))}catch(e){throw Cv(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,$y(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zy("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Cv(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,$y(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zy("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Cv(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,$y(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jy("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Cv(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,$y(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jy("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Cv(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Jm(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Hm(t,$m);var e=Hm(t.firestore,ny),n=ry(e),r=new cv(e);return function(t,e){var n=this,r=new Ef;return t.asyncQueue.enqueueAndForget(function(){return Object(Au.b)(n,void 0,void 0,function(){var n;return Object(Au.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Au.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Au.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Zd(t,e,!0)];case 1:return a=u.sent(),r=new Ag(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=fg(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Om(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Hy(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Hm(t,$m);var e=Hm(t.firestore,ny),n=ry(e),r=new cv(e);return Im(n,t._query,{source:"server"}).then(function(n){return new Hy(e,r,t,n)})}(this._delegate):function(t){t=Hm(t,$m);var e=Hm(t.firestore,ny),n=ry(e),r=new cv(e);return Ky(t._query),Im(n,t._query).then(function(n){return new Hy(e,r,t,n)})}(this._delegate)).then(function(t){return new Nv(e.firestore,new Hy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Tv(e),i=Iv(e,function(e){return new Nv(t.firestore,new Hy(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return hv(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Ev.tu(this.firestore,e):null))},t}(),kv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new xv(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Nv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new jv(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new xv(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new kv(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new xv(n._firestore,r))})},t.prototype.isEqual=function(t){return Gy(this._delegate,t._delegate)},t}(),Rv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Au.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Sv(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Sv(this.firestore,void 0===t?Xm(this._delegate):Xm(this._delegate,t))}catch(t){throw Cv(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Hm(t.firestore,ny),r=Xm(t),i=ov(t.converter,e);return fv(n,[vy(yy(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,jl.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Sv(e.firestore,t)})},e.prototype.isEqual=function(t){return Zm(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Ev.tu(this.firestore,t):null))},e}(jv);function Dv(t){return Hm(t,Wm)}var Pv,Mv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(ay.bind.apply(ay,Object(Au.f)([void 0],t)))}return t.documentId=function(){return new t(tc.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Si.h)(t))instanceof ay&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Vv=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new _y("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new by("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Oy("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ey("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Sy("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Lv=n("/6Yf"),Fv={Firestore:bv,GeoPoint:ly,Timestamp:Ku,Blob:yv,Transaction:_v,WriteBatch:Ov,DocumentReference:Sv,DocumentSnapshot:Av,Query:jv,QueryDocumentSnapshot:xv,QuerySnapshot:Nv,CollectionReference:Rv,FieldPath:Mv,FieldValue:Vv,setLogLevel:function(t){Nu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Lv.a("firestore",function(t){return function(t,e){return new bv(t,new ny(t,e),new vv)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Fv)))})(Pv=Ei.a),Pv.registerVersion("@firebase/firestore","2.3.0");var Uv=n("VRyK"),qv=n("qgXg"),Bv=n("Ylt2");class Hv extends yt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new zv(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new vt.a;if(this.isStopped||this.hasError?o=be.a.EMPTY:(this.observers.push(t),o=new Bv.a(this,t)),r&&t.add(t=new wi.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||qv.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class zv{constructor(t,e){this.time=t,this.value=e}}function Gv(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Hv(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Kv(t,e){return e?Ut(()=>t,e):Ut(()=>t)}var Wv=n("tf+s");const $v=new r.r("angularfire2.auth.use-emulator"),Qv=new r.r("angularfire2.auth.settings"),Yv=new r.r("angularfire2.auth.tenant-id"),Xv=new r.r("angularfire2.auth.langugage-code"),Zv=new r.r("angularfire2.auth.use-device-language"),Jv=new r.r("angularfire.auth.persistence");let tb=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new _i.d(i),f=Object(_i.h)(h),d=new yt.a,p=Object(mt.a)(void 0).pipe(Object(wi.b)(h.outsideAngular),Ut(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(Lt.a)(()=>Object(_i.g)(t,i,e)),Object(Lt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(_i.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Gv({bufferSize:1,refCount:!1}));if(M(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(mt.a)(null);else{p.pipe(me()).subscribe();const t=p.pipe(Ut(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Gv({bufferSize:1,refCount:!1})),e=t=>new Tt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Ut(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Ut(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Kv(n),Object(Wv.a)(h.outsideAngular),Object(wi.b)(h.insideAngular)),this.user=t.pipe(Kv(r),Object(Wv.a)(h.outsideAngular),Object(wi.b)(h.insideAngular)),this.idToken=this.user.pipe(Ut(t=>t?Object(gt.a)(t.getIdToken()):Object(mt.a)(null))),this.idTokenResult=this.user.pipe(Ut(t=>t?Object(gt.a)(t.getIdTokenResult()):Object(mt.a)(null))),this.credential=Object(Uv.a)(t,d,this.authState.pipe(Xt(t=>!t))).pipe(Object(Lt.a)(t=>(null==t?void 0:t.user)?t:null),Object(Wv.a)(h.outsideAngular),Object(wi.b)(h.insideAngular))}return Object(_i.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(_i.c),r.Rb(_i.b,8),r.Rb(r.C),r.Rb(r.A),r.Rb($v,8),r.Rb(Qv,8),r.Rb(Yv,8),r.Rb(Xv,8),r.Rb(Zv,8),r.Rb(Jv,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(_i.c),Object(r.Rb)(_i.b,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)($v,8),Object(r.Rb)(Qv,8),Object(r.Rb)(Yv,8),Object(r.Rb)(Xv,8),Object(r.Rb)(Zv,8),Object(r.Rb)(Jv,8))},token:t,providedIn:"any"}),t})();function eb(t,e){return function(t,e=pi.a){return new Tt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function nb(t,e){return eb(t,e).pipe(Object(Lt.a)(t=>({payload:t,type:"query"})))}function rb(t,e){return nb(t,e).pipe(Wt(void 0),gi(),Object(Lt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function ib(t,e,n){return rb(t,n).pipe($t((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return ob(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return ob(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ob(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new vi(void 0,void 0)),Object(Lt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function ob(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function sb(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(_i.e)(tb,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class ab{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=rb(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Lt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Wt(void 0),gi(),Xt(([t,e])=>e.length>0||!t),Object(Lt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe($t((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=sb(t);return ib(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return nb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Lt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(gt.a)(this.query.get(t)).pipe(Object(wi.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new ub(this.ref.doc(t),this.afs)}}class ub{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=pb(n,e);return new ab(r,i,this.afs)}snapshotChanges(){return eb(this.ref,this.afs.schedulers.outsideAngular).pipe(Wt(void 0),gi(),Object(Lt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Lt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(gt.a)(this.ref.get(t)).pipe(Object(wi.b)(this.afs.schedulers.insideAngular))}}class cb{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?rb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Lt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Xt(t=>t.length>0),this.afs.keepUnstableUntilFirst):rb(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe($t((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=sb(t);return ib(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return nb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Lt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(gt.a)(this.query.get(t)).pipe(Object(wi.b)(this.afs.schedulers.insideAngular))}}const lb=new r.r("angularfire2.enableFirestorePersistence"),hb=new r.r("angularfire2.firestore.persistenceSettings"),fb=new r.r("angularfire2.firestore.settings"),db=new r.r("angularfire2.firestore.use-emulator");function pb(t,e=(t=>t)){return{query:e(t),ref:t}}let gb=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new _i.d(o),this.keepUnstableUntilFirst=Object(_i.h)(this.schedulers);const c=Object(_i.g)(t,o,e);!Oi.a.auth&&u&&Object(_i.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(_i.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!M(i)){const e=()=>{try{return Object(gt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Pv){return"undefined"!=typeof console&&console.warn(Pv),Object(mt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(mt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=pb(n,e),o=this.schedulers.ngZone.run(()=>r);return new ab(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new cb(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new ub(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(_i.c),r.Rb(_i.b,8),r.Rb(lb,8),r.Rb(fb,8),r.Rb(r.C),r.Rb(r.A),r.Rb(hb,8),r.Rb(db,8),r.Rb($v,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(_i.c),Object(r.Rb)(_i.b,8),Object(r.Rb)(lb,8),Object(r.Rb)(fb,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(hb,8),Object(r.Rb)(db,8),Object(r.Rb)($v,8))},token:t,providedIn:"any"}),t})(),mb=(()=>{class t{constructor(){this.user={id:"",name:""}}getUser(){return this.user}setUser(t){this.user=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var yb=n("XoHu");function vb(t,e){return new Tt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(gt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}class bb{}const wb=new r.r("NgValueAccessor"),_b={provide:wb,useExisting:Object(r.U)(()=>Eb),multi:!0},Ob=new r.r("CompositionEventMode");let Eb=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(Ob,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([_b])]}),t})();const Sb=new r.r("NgValidators"),Cb=new r.r("NgAsyncValidators");function Tb(t){return null!=t}function Ib(t){const e=Object(r.rb)(t)?Object(gt.a)(t):t;return Object(r.qb)(e),e}function Ab(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function xb(t,e){return e.map(e=>e(t))}function jb(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function kb(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Tb);return 0==e.length?null:function(t){return Ab(xb(t,e))}}(jb(t)):null}function Nb(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Tb);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(_t.a)(e))return vb(e,null);if(Object(yb.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return vb(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return vb(t=1===t.length&&Object(_t.a)(t[0])?t[0]:t,null).pipe(Object(Lt.a)(t=>e(...t)))}return vb(t,null)}(xb(t,e).map(Ib)).pipe(Object(Lt.a)(Ab))}}(jb(t)):null}function Rb(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let Db=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=kb(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Nb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),Pb=(()=>{class t extends Db{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Mb(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const Mb=r.Pb(Pb);class Vb extends Db{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Lb{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let Fb=(()=>{class t extends Lb{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Vb,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})(),Ub=(()=>{class t extends Lb{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Pb,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();function qb(t,e){Hb(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&zb(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&zb(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Bb(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Hb(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Rb(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);if(null!==e.asyncValidator?t.setAsyncValidators(Rb(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Bb(e._rawValidators,n),Bb(e._rawAsyncValidators,n)}}function zb(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Gb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Kb="VALID",Wb="INVALID",$b="PENDING",Qb="DISABLED";function Yb(t){return(tw(t)?t.validators:t)||null}function Xb(t){return Array.isArray(t)?kb(t):t||null}function Zb(t,e){return(tw(e)?e.asyncValidators:t)||null}function Jb(t){return Array.isArray(t)?Nb(t):t||null}function tw(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class ew{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Xb(this._rawValidators),this._composedAsyncValidatorFn=Jb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Kb}get invalid(){return this.status===Wb}get pending(){return this.status==$b}get disabled(){return this.status===Qb}get enabled(){return this.status!==Qb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Xb(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Jb(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=$b,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Qb,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Kb,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Kb&&this.status!==$b||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qb:Kb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=$b,this._hasOwnPendingAsyncValidator=!0;const e=Ib(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof rw?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof iw&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?Qb:this.errors?Wb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($b)?$b:this._anyControlsHaveStatus(Wb)?Wb:Kb}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){tw(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class nw extends ew{constructor(t=null,e,n){super(Yb(e),Zb(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Gb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Gb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class rw extends ew{constructor(t,e,n){super(Yb(e),Zb(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof nw?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class iw extends ew{constructor(t,e,n){super(Yb(e),Zb(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof nw?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const ow={provide:Pb,useExisting:Object(r.U)(()=>aw)},sw=(()=>Promise.resolve(null))();let aw=(()=>{class t extends Pb{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new rw({},kb(t),Nb(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){sw.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),qb(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){sw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Gb(this._directives,t)})}addFormGroup(t){sw.then(()=>{const e=this._findContainer(t.path),n=new rw({});(function(t,e){Hb(t,e,!1)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){sw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){sw.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Sb,10),r.Kb(Cb,10))},t.\u0275dir=r.Fb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.Ub("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([ow]),r.xb]}),t})();const uw={provide:Vb,useExisting:Object(r.U)(()=>lw)},cw=(()=>Promise.resolve(null))();let lw=(()=>{class t extends Vb{constructor(t,e,n,i){super(),this.control=new nw,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Eb?n=t:Object.getPrototypeOf(t.constructor)===bb?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){cw.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;cw.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Pb,9),r.Kb(Sb,10),r.Kb(Cb,10),r.Kb(wb,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([uw]),r.xb,r.yb]}),t})(),hw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),fw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})();const dw={provide:wb,useExisting:Object(r.U)(()=>gw),multi:!0};function pw(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let gw=(()=>{class t extends bb{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=pw(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([dw]),r.xb]}),t})(),mw=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(pw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.E),r.Kb(gw,9))},t.\u0275dir=r.Fb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const yw={provide:wb,useExisting:Object(r.U)(()=>bw),multi:!0};function vw(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let bw=(()=>{class t extends bb{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([yw]),r.xb]}),t})(),ww=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(vw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(vw(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.E),r.Kb(bw,9))},t.\u0275dir=r.Fb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),_w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[fw]]}),t})(),Ow=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[_w]}),t})(),Ew=(()=>{class t{constructor(t,e,n){this.firestore=t,this.router=e,this.userService=n,this.game={func:"x",initialChips:10,player1Name:"wst",player1Id:"wst"}}ngOnInit(){this.game.player1Id=this.userService.getUser().id,this.game.player1Name=this.userService.getUser().name}createGame(){this.firestore.collection("pendingGames").add(this.game).then(()=>{this.router.navigate(["/lobby"])})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(gb),r.Kb($r),r.Kb(mb))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-create-game"]],decls:13,vars:2,consts:[["type","text","name","chips",3,"ngModel","ngModelChange"],["name","func",3,"ngModel","ngModelChange"],["value","x"],["type","button",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"form"),r.Nb(1,"label"),r.ec(2," Initial number of chips "),r.Nb(3,"input",0),r.Ub("ngModelChange",function(t){return e.game.initialChips=t}),r.Mb(),r.Mb(),r.Lb(4,"br"),r.Nb(5,"label"),r.ec(6," Function "),r.Nb(7,"select",1),r.Ub("ngModelChange",function(t){return e.game.func=t}),r.Nb(8,"option",2),r.ec(9,"x"),r.Mb(),r.Mb(),r.Mb(),r.Lb(10,"br"),r.Nb(11,"button",3),r.Ub("click",function(){return e.createGame()}),r.ec(12,"Create"),r.Mb(),r.Mb()),2&t&&(r.Ab(3),r.Xb("ngModel",e.game.initialChips),r.Ab(4),r.Xb("ngModel",e.game.func))},directives:[hw,Ub,aw,Eb,Fb,lw,gw,mw,ww],styles:[""]}),t})();function Sw(t,e){1&t&&(r.Nb(0,"div"),r.Lb(1,"app-create-game"),r.Mb())}function Cw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"li",0),r.Ub("click",function(){r.ac(t);const n=e.$implicit;return r.Wb(2).joinGame(n)}),r.ec(1),r.Mb()}if(2&t){const t=e.$implicit;r.Ab(1),r.fc(t.player1Name)}}function Tw(t,e){if(1&t&&(r.Nb(0,"ul"),r.dc(1,Cw,2,1,"li",2),r.Mb()),2&t){const t=r.Wb();r.Ab(1),r.Xb("ngForOf",t.games)}}let Iw=(()=>{class t{constructor(t,e,n){this.firestore=t,this.router=e,this.userService=n,this.games=[],this.loaded=!1,this.gameCreationInProgress=!1,this.sub=new be.a}ngOnInit(){this.sub.add(this.firestore.collection("pendingGames").valueChanges({idField:"id"}).subscribe(t=>{this.games=t,this.loaded=!0}))}joinGame(t){this.firestore.collection("activeGames").add({currentTurn:1,func:t.func,initialChips:t.initialChips,maxChipsThisTurn:this.calculateMaxChipsFirstTurn(t),player1Id:t.player1Id,player1Name:t.player1Name,player2Id:this.userService.getUser().id,player2Name:this.userService.getUser().name,turnForPlayer:Math.random()>.5?1:2}).then(e=>{this.firestore.collection("pendingGames").doc(t.id).delete(),this.router.navigate(["/game",{id:e.id}])})}createGame(){this.gameCreationInProgress=!0}calculateMaxChipsFirstTurn(t){if("x"===t.func)return t.initialChips-1}ngOnDestroy(){this.sub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(gb),r.Kb($r),r.Kb(mb))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-game-list"]],decls:6,vars:2,consts:[[3,"click"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(r.Nb(0,"p"),r.ec(1,"List of games"),r.Mb(),r.Nb(2,"button",0),r.Ub("click",function(){return e.createGame()}),r.ec(3,"create game"),r.Mb(),r.dc(4,Sw,2,0,"div",1),r.dc(5,Tw,2,1,"ul",1)),2&t&&(r.Ab(4),r.Xb("ngIf",e.gameCreationInProgress),r.Ab(1),r.Xb("ngIf",e.loaded))},directives:[k,Ew,x],styles:[""]}),t})();function Aw(t,e){1&t&&(r.Nb(0,"p"),r.ec(1,"Opponent's turn!"),r.Mb())}const xw=function(){return{color:"red"}},jw=function(){return{}};function kw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"li",3),r.Ub("click",function(){r.ac(t);const n=e.$implicit;return r.Wb(4).toggleChip(n)}),r.ec(1," chip "),r.Mb()}2&t&&r.Xb("ngStyle",e.$implicit.taken?r.Yb(1,xw):r.Yb(2,jw))}function Nw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"ul"),r.dc(1,kw,2,3,"li",1),r.Nb(2,"button",2),r.Ub("click",function(){return r.ac(t),r.Wb(3).nextTurn()}),r.ec(3,"next turn"),r.Mb(),r.Mb()}if(2&t){const t=r.Wb(3);r.Ab(1),r.Xb("ngForOf",t.chips)}}function Rw(t,e){if(1&t&&(r.Nb(0,"div"),r.Nb(1,"p"),r.ec(2,"game works!"),r.Mb(),r.dc(3,Aw,2,0,"p",0),r.dc(4,Nw,4,1,"ul",0),r.Mb()),2&t){const t=r.Wb(2);r.Ab(3),r.Xb("ngIf",!t.isMyTurn()),r.Ab(1),r.Xb("ngIf",t.isMyTurn())}}function Dw(t,e){1&t&&(r.Nb(0,"div"),r.ec(1,"YOU WON"),r.Mb())}function Pw(t,e){1&t&&(r.Nb(0,"div"),r.ec(1,"YOU LOOSE"),r.Mb())}function Mw(t,e){if(1&t&&(r.Nb(0,"div"),r.dc(1,Rw,5,2,"div",0),r.dc(2,Dw,2,0,"div",0),r.dc(3,Pw,2,0,"div",0),r.Mb()),2&t){const t=r.Wb();r.Ab(1),r.Xb("ngIf",void 0===t.win),r.Ab(1),r.Xb("ngIf",!0===t.win),r.Ab(1),r.Xb("ngIf",!1===t.win)}}const Vw=[{path:"",component:(()=>{class t{constructor(t,e,n){this.firestore=t,this.router=e,this.userService=n}ngOnInit(){}createUser(){this.firestore.collection("pendingUsers").add({name:this.username}).then(t=>{this.userService.setUser({id:t.id,name:this.username}),this.router.navigate(["games"])})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(gb),r.Kb($r),r.Kb(mb))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-init-user"]],decls:7,vars:1,consts:[["type","text",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"h1"),r.ec(1,"Dynamic Subtraction Online"),r.Mb(),r.Nb(2,"p"),r.ec(3,"Enter username:"),r.Mb(),r.Nb(4,"input",0),r.Ub("ngModelChange",function(t){return e.username=t}),r.Mb(),r.Nb(5,"button",1),r.Ub("click",function(){return e.createUser()}),r.ec(6,"Done"),r.Mb()),2&t&&(r.Ab(4),r.Xb("ngModel",e.username))},directives:[Eb,Fb,lw],styles:[""]}),t})()},{path:"games",component:Iw},{path:"lobby",component:(()=>{class t{constructor(t,e,n){this.firestore=t,this.userService=e,this.router=n,this.sub=new be.a}ngOnInit(){this.sub.add(this.firestore.collection("activeGames").snapshotChanges().subscribe(t=>{const e=t.filter(t=>t.payload.doc.data().player1Id===this.userService.getUser().id);if(0===e.length)return;const n=e[0].payload.doc;this.firestore.collection("pendingUsers").doc(n.data().player1Id).delete(),this.firestore.collection("pendingUsers").doc(n.data().player2Id).delete(),this.router.navigate(["/game",{id:n.id}])}))}ngOnDestroy(){this.sub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(gb),r.Kb(mb),r.Kb($r))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-lobby"]],decls:4,vars:0,template:function(t,e){1&t&&(r.Nb(0,"h3"),r.ec(1,"Waiting for second player to join"),r.Mb(),r.Nb(2,"h4"),r.ec(3,"..."),r.Mb())},styles:[""]}),t})()},{path:"game",component:(()=>{class t{constructor(t,e,n,r){this.route=t,this.firestore=e,this.router=n,this.userService=r,this.chips=[],this.win=void 0,this.takenCnt=0,this.loaded=!1}ngOnInit(){this.route.params.subscribe(t=>{this.gameId=t.id,this.firestore.collection("activeGames").doc(t.id).snapshotChanges().subscribe(t=>{this.chips.length=0,this.takenCnt=0,this.game=t.payload.data(),void 0===this.win&&0===this.game.initialChips&&(this.win=!1);for(let e=0;e<this.game.initialChips;++e)this.chips.push({taken:!1});this.loaded=!0})})}isMyTurn(){return(1===this.game.turnForPlayer?this.game.player1Id:this.game.player2Id)===this.userService.getUser().id}toggleChip(t){if(t.taken)t.taken=!1,this.takenCnt--;else{if(this.game.maxChipsThisTurn===this.takenCnt)return;t.taken=!0,this.takenCnt++}}nextTurn(){this.loaded=!1,this.game.maxChipsThisTurn=this.getMaxChipsNextTurn(),this.game.turnForPlayer=1===this.game.turnForPlayer?2:1,this.game.initialChips-=this.takenCnt,this.game.currentTurn++,0===this.game.initialChips&&(this.win=!0),this.firestore.collection("activeGames").doc(this.gameId).update(this.game).then(()=>{})}getMaxChipsNextTurn(){return this.takenCnt}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(An),r.Kb(gb),r.Kb($r),r.Kb(mb))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-game"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngStyle","click",4,"ngFor","ngForOf"],[3,"click"],[3,"ngStyle","click"]],template:function(t,e){1&t&&r.dc(0,Mw,4,3,"div",0),2&t&&r.Xb("ngIf",e.loaded)},directives:[k,x,D],styles:[""]}),t})()}];let Lw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[oi.forRoot(Vw)],oi]}),t})(),Fw=(()=>{class t{constructor(){this.title="dynamic-subtraction-online"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:[Qr],styles:[""]}),t})();const Uw={apiKey:"AIzaSyDY2-jHQBZIXs-rKr9B50xc-LtUcW30_Mc",authDomain:"dynamic-subtraction-online.firebaseapp.com",projectId:"dynamic-subtraction-online",storageBucket:"dynamic-subtraction-online.appspot.com",messagingSenderId:"105581498015",appId:"1:105581498015:web:c19443670b8993428ddcaa",measurementId:"G-06SBHCW0RH"};let qw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t,bootstrap:[Fw]}),t.\u0275inj=r.Hb({providers:[],imports:[[pt,Lw,Ow,_i.a.initializeApp(Uw)]]}),t})();Object(r.T)(),ft().bootstrapModule(qw).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);